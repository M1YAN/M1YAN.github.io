[{"content":"åº I used to rule the world\nSeas would rise when I gave the word\nNow in the morning I sleep alone\nSweep the streets I used to own\nViva La Vida\næˆ‘å–œæ¬¢åœ¨æ™¾è¡£æœçš„æ—¶å€™å¬æ­Œï¼Œè®¸ä¹…æœªå¬çš„ã€ŠViva La Vidaã€‹åœ¨è€³è¾¹çªç„¶å“èµ·ã€‚çª—å¤–å¯’é£è§ç‘Ÿï¼Œä¸æ­Œè¯å±…ç„¶æ ¼å¤–çš„ç›¸é…ã€‚æˆ‘çœ‹å‘å±‹å†…ï¼Œæ¸©æš–çš„ç¯å…‰å’Œå„è‡ªå¿™ç¢Œçš„èˆå‹ä¸æˆ‘éš”ç¦»å¼€æ¥ï¼Œå¿½ç„¶æœ‰ç§ææƒšä¹‹æ„Ÿã€‚è®°å¾—æˆ‘ç¬¬ä¸€æ¬¡å¬è¿™é¦–æ­Œæ˜¯å› ä¸ºè¿™é¦–æ­Œæ˜¯æŸä¸ªé­”æ–¹é€Ÿæ‹§æ··å‰ªè§†é¢‘çš„é…ä¹ï¼Œå½“æ—¶ä¸Šå°å­¦è¿˜æ˜¯åˆä¸­çš„æˆ‘å¯¹é­”æ–¹ç‰¹åˆ«çš„ç—´è¿·ã€‚å½“æ—¶çš„é‚£ä¸ªæ‰‹æ‹¿é­”æ–¹çš„å°‘å¹´ä¼¼ä¹çªç„¶å°±ç«™åœ¨äº†å¼‚ä¹¡çš„æŸä¸ªè§’è½ã€‚\nå›å¿†è¿‡å»ï¼Œæ‰æ„è¯†åˆ°æ—¶é—´è¿‡å¾—å¦‚æ­¤ä¹‹å¿«ã€‚æ—¶é—´ä¼¼ä¹ä¸€ç›´ä¸åœæ­‡åœ°æ¨ç€æˆ‘ä»¬èµ°ï¼Œæˆ‘æƒ³ï¼Œä¹Ÿè®¸å¯¹æŠ—æ—¶é—´çš„æœ€å¥½æ–¹å¼ï¼Œå°±æ˜¯å°†å¦‚ç¬¬ä¸€æ¬¡è¿˜åŸé­”æ–¹ä¸€èˆ¬éš¾å¿˜çš„ç¬é—´è®°å½•ä¸‹æ¥ï¼Œæˆ–è®¸è¿™å°±æ˜¯â€œViva La vidaâ€çš„çœŸæ­£å«ä¹‰ã€‚\nå¤§åŒç¯‡ 2024çš„å‰å‡ ä¸ªæœˆéƒ½åœ¨å¯’å‡å’Œå¼€å­¦ä¹‹ä¸­å¹³æ·¡å¦‚æ°´åœ°åº¦è¿‡ï¼Œä¸ŠåŠå¹´å°è±¡æœ€æ·±åˆ»çš„å°±æ˜¯åŠ³åŠ¨èŠ‚å‡æœŸçš„å¤§åŒä¹‹æ—…ã€‚ç”±äºåŒ—é‚®ä¸è°ƒä¼‘çš„ä¼˜è‰¯ä¼ ç»Ÿï¼Œæˆ‘ä»¬å¾—ä»¥é”™å³°åœ¨äº”ä¸€æ­£å¼å‡æœŸä¹‹å‰å»æ¸¸ç©ã€‚åœ¨å¤§åŒï¼Œç»™æˆ‘å°è±¡æœ€æ·±åˆ»çš„ï¼Œå±…ç„¶æ˜¯åœ¨é…’åº—é‡Œæ™šä¸Šè·ŸZhrliä¸€èµ·çœ‹çš„è¶…æ™¦æ°”é¬¼ç‰‡ã€Šå’’ã€‹:( åœ¨è¿™æ ·ä¸€ä¸ªä½›æ•™å¯ºåº™éåœ°çš„åŸå¸‚ï¼Œå±…ç„¶æŠ˜ç£¨è‡ªå·±çœ‹è¿™ç§ä¸œè¥¿ğŸ˜¥ï¼Œä¸ä»…æ™šä¸Šæ²¡ç¡å¥½è§‰ï¼Œæ—©ä¸Šèµ·æ¥é€›ä¸€å †å¯ºåº™è¿˜èƒ½ä»£å…¥ç”µå½±é‡Œçš„æƒ…èŠ‚wwwwwã€‚\nä¸è¿‡å¤§åŒçš„æ‚¬ç©ºå¯ºè¿˜æ˜¯ç»™æˆ‘å¸¦æ¥äº†å¾ˆå¼ºçš„è§†è§‰éœ‡æ’¼ï¼Œå‡ æ ¹æŸ±å­å°±èƒ½æŠŠä¸€æ•´ä¸ªå‡ å±‚çš„å¯ºåº™æ”¯æ’‘åœ¨å´–å£ä¸Šï¼Œç”šè‡³å‡‘è¿‘äº†è¿˜èƒ½çœ‹åˆ°è¢«é£å¹åŠ¨å¾®å¾®æ‘‡æ™ƒçš„æŸ±å­ã€‚è¶Šæ˜¯è¿™æ ·å£®è§‚å±é™©çš„åœºæ™¯ï¼Œè¶Šæ˜¯è®©äººæ„Ÿå—åˆ°å¤§è‡ªç„¶çš„æ•¬ç•ã€‚\nä¹‹åæˆ‘ä»¬è¿˜å»çœ‹äº†åº”å¿æœ¨å¡”ï¼Œæ®è¯´æœ¨å¡”å¡”é¡¶æœ‰é‡Šè¿¦æ‘©å°¼çš„èˆåˆ©å­ã€‚åˆ°äº†æœ¨å¡”ä¸‹é¢ï¼Œå¬å°ä¼™ä¼´è¯´æœ¨å¡”çš„æŸ±å­æ¯éš”å‡ ä¸ªå°æ—¶ä¼šè½®æµæ‚¬ç©ºï¼Œäºæ˜¯æˆ‘ä»¬å°±ç»•ç€å¡”è¾¹å¾€æœ¨æŸ±å­ä¸‹é¢æ’å°çº¸ç‰‡ï¼Œè¿˜çœŸçš„æœ‰æŸ±å­ä¸åœ°é¢æœ‰å¾ˆå¤§çš„ç¼éš™ï¼ä½†æ˜¯å°±ç®—è¿™æ ·ï¼Œè¿™ä¸ªæœ¨å¡”è¿˜æ˜¯ç¨³ç¨³åœ°ã€é™é™åœ°å±¹ç«‹åœ¨è¿™é‡Œï¼Œè§è¯åƒå¹´è£è¾±ã€‚\nç¦»å¼€æœ¨å¡”æ—¶ï¼Œè·¯è¿‡ä¸€æ£µå¤è€çš„æ¾æ ‘ï¼Œä¸Šé¢æŒ‚æ»¡äº†é“œåˆ¶çš„é£é“ƒï¼Œä¸€é˜µé£å¹è¿‡ï¼Œä¸€è¿ä¸²æ¸…è„†çš„é“ƒéŸ³ä¸ç»äºè€³ï¼Œç»™äººä¸€ç§å‡€åŒ–å¿ƒçµçš„è¶…è„±ä¹‹æ„Ÿã€‚ä¸å¾—ä¸è¯´è¿™ç¡®å®æ˜¯é«˜åƒ§ä¿®è¡Œçš„å¥½åœ°æ–¹ã€‚\næˆ‘ä»¬è¿˜å»äº†å¤§åé¼é¼çš„äº‘å†ˆçŸ³çªŸï¼Œæ²¿ç€å±±ä½“ç»µå»¶æ•°å…¬é‡Œçš„å´–å£ä¸Šï¼Œå…¨æ˜¯å¤§å¤§å°å°çš„çŸ³çªŸã€‚å½“æ—¶ç»™æˆ‘å°è±¡æœ€æ·±åˆ»çš„æ˜¯ï¼Œå¾ˆå¤šä½›åƒçš„å¤´éƒ½å› ä¸ºä¿å­˜ä¸å½“æˆ–æ˜¯å¤±çªƒè€Œä¸è§äº†ï¼Œåªå‰©ä½›èº«å­¤é›¶é›¶åœ°ååœ¨é‚£é‡Œã€‚è¿™é‡ŒåŸ‹ä¸‹äº†ä¸€ä¸ªä¼ç¬”ï¼Œæˆ‘å±…ç„¶åœ¨æŸä¸€ä¸ªåœ°æ–¹è¿˜èƒ½è§åˆ°ç¼ºå¤±çš„ä½›å¤´ã€‚\nä¸Šæµ·ç¯‡ ç„¶åå°±æ˜¯æš‘å‡çš„ç¤¾ä¼šå®è·µâ€”â€”ä¸Šæµ·ä¹‹è¡Œå•¦~ç”±äºKimæ˜¯Shanghaiäººï¼Œä¹Ÿæ˜¯é¡ºç†æˆç« å¸¦é˜Ÿå¸¦æˆ‘ä»¬é¢†ç•¥ä¸Šæµ·é£æƒ…ã€‚åœ¨ä¸Šæµ·ï¼Œé™¤äº†é¡ºåˆ©å®Œæˆå‚è§‚ä¼ä¸šç­‰å®è·µä»»åŠ¡ï¼Œæˆ‘ä»¬ä¹Ÿé©¬ä¸åœè¹„åœ°é€›äº†ä¸Šæµ·çš„å¥½å¤šæ™¯ç‚¹ã€‚æˆ‘ä»¬ä»å—äº¬è·¯æ­¥è¡Œè¡—å¼€å§‹City Walkï¼Œä¸€è·¯ç»è¿‡å¤–æ»©èµ°åˆ°å¤–ç™½æ¸¡æ¡¥ï¼Œä¸Šæµ·çš„å†å²æ„Ÿå’Œç°ä»£æ„Ÿå°±è¿™æ ·åœ¨æ²¿é€”å±•å¼€ã€‚\næ­¤å¤–ï¼Œåœ¨é™å®‰å¯ºé—²é€›æ—¶ï¼Œæ°å¥½èµ¶ä¸Šè‹¹æœçš„å¤´æ˜¾è®¾å¤‡åœ¨å†…åœ°å‘å”®ï¼Œæˆ‘ä»¬æŠ±ç€è¯•è¯•çœ‹çš„æ€åº¦è¿›åº—æƒ³ä½“éªŒä½“éªŒï¼ˆå› ä¸ºä½“éªŒéœ€è¦é¢„çº¦ï¼‰ã€‚ä½†æ˜¯éå¸¸å¹¸è¿åœ°ç”±äºå‰é¢å‡ ä¸ªé¢„çº¦çš„å®¢äººæ²¡æ¥ï¼Œâ€œæ’é˜Ÿâ€ä½“éªŒåˆ°äº†å¤´æ˜¾ã€‚è™½ç„¶ç”»é¢æ¸…æ™°åº¦æ²¡æœ‰æˆ‘æƒ³è±¡çš„é‚£ä¹ˆæ¸…æ™°ï¼Œä½†æ˜¯ä½¿ç”¨æ‰‹æœºæåˆçš„æ“ä½œé€»è¾‘éå¸¸ä¸æ»‘~\næœ€åæˆ‘ä»¬åœ¨æ¸¡å£åšè½®æ¸¡å»çœ‹äº†æ™šä¸Šçš„é™†å®¶å˜´ï¼Œæ™šä¸Šå¤©ç©ºé£˜ç€ä¸å¤§ä¸å°çš„é›¨ï¼Œé›¨æ°´åœ¨åœ°é¢ä¸Šåå°„å‡ºä¸€ç‰‡ç‰‡å…‰æ€ªé™†ç¦»çš„éœ“è™¹ï¼Œä¸ºè¿™æ¬¡å¤œæ™šä¹‹è¡ŒåŠ å…¥äº†ä¸€äº›æ¢¦å¹»æ„Ÿã€‚æˆ‘ä»¬æ²¿ç€é»„åŸ”æ±Ÿè¾¹èµ°äº†å¾ˆè¿œï¼Œæœ¬æ¥å°ä¼™ä¼´ä»¬éƒ½æ­£ç»æ‰“ç€ä¼ï¼Œåæ¥YanmHaç›´æ¥ä¸¢äº†ä¼å¼€å§‹åœ¨é›¨ä¸­å¥”è·‘ï¼Œäºæ˜¯å¤§å®¶éƒ½æ”¾å¼€è·‘äº†èµ·æ¥å“ˆå“ˆå“ˆã€‚è™½ç„¶èµ°äº†å¾ˆè¿œè„šå¾ˆç—›ï¼Œè¡£æœé‹å­éƒ½æ¹¿äº†ï¼Œä½†æ˜¯é‚£ç§çŸ­æš‚äº†å¿˜è®°äº†çƒ¦æ¼çš„æ„Ÿè§‰çœŸçš„å¾ˆä¸é”™ã€‚\nç°åœ¨å›å¿†èµ·ï¼Œå½“æ—¶é€›çš„æ¯ä¸€æ¡è¡—ï¼Œåƒçš„æ¯ä¸€é¡¿é¥­ï¼Œéƒ½å› ä¸ºå’Œå°ä¼™ä¼´ä»¬ä¸€èµ·ï¼Œè€Œå˜å¾—ç‰¹åˆ«éš¾å¿˜ã€‚æˆ–è®¸æ—…è¡Œä¹Ÿæ˜¯å¢è¿›å‹è°Šçš„ä¸€ç§å¾ˆå¥½çš„æ–¹å¼~\næ—¥æœ¬ç¯‡ éšç€æš‘å‡çš„å¼€å§‹ï¼Œæˆ‘ä»¬åœ¨æ²™æ²³æ ¡åŒºçš„ä¸¤å¹´æ—¶å…‰ä¹Ÿå®£å‘Šæ­£å¼ç»“æŸï¼Œå­¦é™¢100å·äººæµ©æµ©è¡è¡æ¬å…¥è¥¿åœŸåŸæ ¡åŒºï¼Œä¸‰ç¯å†…çš„æ–°ç”Ÿæ´»å¼€å§‹äº†ï¼\nåœ¨æš‘å‡ï¼Œæˆ‘æŠ¥åå‚åŠ äº†æ—¥æœ¬ç”µæ°—é€šä¿¡å¤§å­¦çš„å­¦æœ¯äº¤æµæ´»åŠ¨ï¼Œæœ‰å¹¸èƒ½å¤Ÿå¾—åˆ°å­¦é™¢çš„èµ„åŠ©å‰å¾€æ—¥æœ¬è¿›è¡Œä¸ºæœŸ7å¤©çš„å­¦æœ¯äº¤æµã€‚\nè½åœ°æˆç”°æœºåœºåï¼Œæˆ‘ä»¬è´­ä¹°äº†è¥¿ç“œå¡ï¼Œä¹˜åå¤©ç©ºçº¿å‰å¾€é…’åº—çš„æ‰€åœ¨åœ°æ–°å®¿åŒºã€‚æ–°å®¿åŒºå¯†å¯†éº»éº»çš„ä½å®…å’Œå•†ä¸šåŒºè¢«åˆ†æˆäº†å¾ˆå¤šç”ºï¼Œçª„çª„çš„å··å­å¾ˆæœ‰æ—¥å¼é£æƒ…â€”â€”è¡Œäººé å·¦èµ°çš„é©¬è·¯æŒ‡ç¤ºçº¿ã€ä¸Šæ–¹äº¤é”™çºµæ¨ªçš„ç”µçº¿ã€å¾ˆèŠ‚çº¦ç©ºé—´çš„åŒå±‚åœè½¦åœºä»¥åŠå‡ æ­¥ä¸€ä¸ªçš„711å’Œç½—æ£®ã€‚\nåœ¨ä¸œäº¬çš„å‰å‡ å¤©ï¼Œæˆ‘ä»¬å‚åŠ äº†é¡¹ç›®çš„å¯åŠ¨ä»ªå¼ï¼Œé€›äº†é€›å­¦æ ¡å‘¨è¾¹çš„å•†åœºï¼Œå‘ç°æœ‰chikawaçš„å¿«é—ªåº—ï¼ˆä¸è¿‡ä¸œè¥¿éƒ½å¥½è´µwwwï¼Œæœ€ååªä¹°äº†å¼ è´´çº¸ï¼‰ï¼Œä»¥åŠåƒäº†åœ¨ä¸Šæµ·è¦æ’å¤§é˜Ÿçš„å›è½¬å¯¿å¸ğŸ£ã€‚å¯¿å¸ä¸€ç›˜å‡ä»·å¤§çº¦ä¸ƒå…«å—é’±ï¼Œè€Œä¸”ç”¨çš„éƒ½æ˜¯ç”Ÿç‰›ç¾Šé±¼è‚‰ï¼Œçœ‹è§å¯¿å¸å—–çš„ä¸€ä¸‹é€šè¿‡è½¨é“é€è¿‡æ¥ï¼Œè¿˜æ˜¯ä¸€ç§æŒºæ–°å¥‡çš„ä½“éªŒçš„hhh~\nåœ¨æ™šä¸Šï¼Œæˆ‘ä»¬å»äº†æ¶©è°·ï¼Œå»çœ‹äº†æ®è¯´æ˜¯å…¨ä¸–ç•Œæœ€ç¹å¿™çš„åå­—è·¯å£ã€‚æ ¹æ®å°çº¢ä¹¦çš„æ”»ç•¥ï¼Œæˆ‘ä»¬ç™»ä¸Šå•†åœºäºŒæ¥¼çš„æ˜Ÿå·´å…‹ï¼Œæœç„¶æ‹å‡ºäº†è¿‡é©¬è·¯æ—¶äººå±±äººæµ·çš„åœºæ™¯ï¼Œè§†è§‰ä¸Šè¿˜æ˜¯å¾ˆéœ‡æ’¼çš„ï¼ä¸å¾—ä¸æ„Ÿæ…¨ä¸œäº¬çœŸçš„æ˜¯ä¸€åº§æ‰¿è½½ç€å¾ˆå¤šäººçš„æ¢¦æƒ³çš„è¶…çº§å¤§éƒ½å¸‚~\néšåå‡ å¤©ï¼Œå› ä¸ºé¡¹ç›®è¦å¿™åˆ°ä¸‹åˆå¾ˆæ™šï¼Œæ‰€ä»¥åªæœ‰æ™šä¸Šæœ‰æ—¶é—´å‡ºæ¥é—²é€›ï¼Œæˆ‘ä»¬ä¹Ÿå»äº†è‘—åçš„æ­Œèˆä¼ç”ºï¼Œä¸è¿‡ä¹Ÿæ˜¯çœŸçš„ä¸æ•¢é è¿‘ä»»ä½•ä¸€å®¶18+çš„é…’å§å•Šhhhh~\nåœ¨å€’æ•°ç¬¬äºŒå¤©æ™šä¸Šï¼Œæˆ‘ä»¬å»äº†é“¶åº§ã€‚é“¶åº§æœç„¶æ˜¯å¯Œäººé›†åˆåœ°ï¼Œéšæ‰‹ä¸€æ‹éƒ½æ˜¯ä¸ªå…°åšåŸºå°¼ğŸ˜°ï¼Œå‘¨å›´ä¹Ÿéƒ½æ˜¯é€›ä¸èµ·çš„å¥¢ä¾ˆå“åº—ã€‚æˆ‘ä»¬èµ°ç€èµ°ç€ï¼Œä¸œäº¬å¡”å°±è¿™æ ·çªç„¶å‡ºç°åœ¨çœ¼å‰ã€‚æˆ‘ä»¬ä¹‹å‰äº†è§£äº†ä¸œäº¬å¡”çš„å†å²ï¼Œæ‰€ä»¥ä¹Ÿå¹¶ä¸æƒ³ä¸“é—¨æ¥çœ‹è¿™ä¸ªå¡”ï¼Œä½†æ˜¯æ—¢ç„¶éƒ½åˆ°è¿™äº†ï¼Œå’Œå°ä¼™ä¼´è¿˜æ˜¯å’¬å’¬ç‰™ä¹°äº†ç™»å¡”çš„æœ«ç­ç¥¨ï¼Œå¡ç€è¿˜æœ‰äºŒååˆ†é’Ÿå…³å¡”çš„æ—¶é—´ä¸Šå»äº†ã€‚åœ¨å¡”ä¸Šï¼Œçª—å¤–å¯ä»¥çœ‹åˆ°å£®è§‚çš„ä¸œäº¬éƒ½å¤œæ™¯ï¼Œå¯†å¯†éº»éº»çš„è¡—é“å’Œç¯å…‰å°±è¿™æ ·é“ºå¼€åœ¨çœ¼å‰ï¼Œäººåœ¨è¿™æ ·çš„é’¢é“æ°´æ³¥æ£®æ—ä¸­çœŸæ˜¯â€œæ¸ºæ²§æµ·ä¹‹ä¸€ç²Ÿâ€ã€‚åœ¨å¦‚æ­¤çš„ä¸Šå¸è§†è§’ä¸‹ï¼Œä»¿ä½›èƒ½å¤Ÿçœ‹é€åŸå¸‚çš„è¿è½¬è§„åˆ™ï¼Œå†™å­—æ¥¼é‡Œå¿™ç¢Œçš„ç™½é¢†ï¼Œä½å®…åŒºæ¸©é¦¨çš„ä¸€å®¶äººï¼Œé©¬è·¯ä¸Šå·æµä¸æ¯çš„è½¦è¾†â€¦â€¦\nåœ¨æ—¥æœ¬çš„æœ€åä¸€å¤©ï¼Œæˆ‘ä»¬ç»ˆäºåœ¨ç™½å¤©æœ‰æ—¶é—´ï¼Œå»é€›äº†ä¸œäº¬å›½ç«‹åšç‰©é¦†å’Œæµ…è‰å¯ºã€‚å‘ç°åšç‰©é¦†è¿˜éœ€è¦ä¹°ç¥¨ï¼Œåˆå¾—å¤¸å¤¸å›½å†…çš„å¤§å‹åšç‰©é¦†ï¼Œéƒ½æ˜¯å…è´¹çš„ï¼ˆå¦‚æœèƒ½çº¦çš„ä¸Šçš„è¯hhhï¼‰ã€‚æ²¡é”™ï¼Œåœ¨ä¸œäº¬å›½ç«‹åšç‰©é¦†çš„ä¸œäºšé¦†é‡Œï¼Œå¾ˆå·§åœ°è§åˆ°äº†åœ¨å¤§åŒå¤±çªƒçš„ä½›å¤´ã€‚çœ‹åˆ°å¾ˆå¤šç²¾å·§çš„é’é“œå™¨å’Œç”²éª¨æ®‹ç‰‡éƒ½åœ¨é¦†é‡Œï¼ŒçœŸæƒ³ä¸åˆ°è¿™äº›æ–‡ç‰©æ˜¯ä»¥æ˜¯æ€æ ·çš„æ–¹å¼æµè½æµ·å¤–çš„ï¼ŒçœŸæ˜¯ä»¤äººæ‰¼è…•å¹æ¯å•Šã€‚åœ¨æµ…è‰å¯ºæŠ½äº†ä¸€ç­¾ï¼ŒæŠ½åˆ°äº†å‡¶ç­¾ï¼Œåæ­£æˆ‘ä¹Ÿä¸è¿·ä¿¡ï¼Œé‚£å°±è®©è¿™ä¸ªç­¾ç•™åœ¨æ—¥æœ¬å§ï¼ŒæŠŠæˆ‘çš„åè¿æ°”ä¹Ÿç•™åœ¨æ—¥æœ¬ç®—äº†hhhhã€‚\næœ€åæä¸€ä¸‹é¡¹ç›®hhhï¼Œæˆ‘ä»¬å°ç»„æ‹¿åˆ°äº†â€œæœ€ä½³æ€§èƒ½å¥–â€ï¼Œä¹Ÿç®—æ˜¯è¿™å‡ å¤©çš„åŠªåŠ›æ²¡æœ‰ç™½è´¹ï¼ˆå¯èƒ½ä¹Ÿå°±æ˜¯æ¯”åˆ«äººæ™šèµ°åŠå°æ—¶hhhï¼‰~\næ€»ç»“ä¸€ä¸‹æœ¬æ¬¡æ—¥æœ¬ä¹‹è¡Œï¼Œç®—æ˜¯ä½“éªŒåˆ°äº†ä¸åŒæ–‡åŒ–çš„æ–‡åŒ–å·®å¼‚ï¼Œçœ‹åˆ°äº†æ›´å¤§çš„ä¸–ç•Œï¼ˆä¹Ÿçœ‹åˆ°äº†ä¸œäºšäººä¸€æ ·çš„å·wwwwï¼‰ã€‚\nå¼ å®¶æ¸¯ç¯‡ å¼€å­¦ä¹‹åå‘¢ï¼Œåœ¨æœŸä¸­å·¦å³çš„æ—¶é—´ï¼Œæˆ‘åˆæŠ¥åå‚åŠ çš„CCF China Netä¸­å›½ç½‘ç»œå¤§ä¼šï¼ˆä¹Ÿæ˜¯ä¸æ”¾è¿‡ä»»ä½•ä¸€æ¬¡èƒ½å‡ºå»ç©å­¦ä¹ çš„æœºä¼šï¼‰ï¼Œå‰å¾€å¼ å®¶æ¸¯ã€‚\nä¼šè®®å¾ˆé«˜ç«¯ï¼Œå‚ä¼šäººå‘˜å¤§å¤šæ˜¯åšå£«å’Œæ•™æˆï¼Œæ˜¾å¾—æˆ‘ä»¬è¿™äº›æœ¬ç§‘ç”Ÿèµ·åˆ°äº†ä¸€ä¸ªæ°”æ°›ç»„çš„ä½œç”¨hhhï¼Œè€Œä¸”ç½‘ç»œè¿™ä¸ªå¤§æ–¹å‘ä¹Ÿä¸æˆ‘æ„Ÿå…´è¶£çš„ç ”ç©¶æ–¹å‘ä¸æ˜¯ç‰¹åˆ«åŒ¹é…ï¼Œäºæ˜¯æˆ‘ä¹Ÿæƒå½“æ˜¯æ¥é•¿é•¿è§è¯†ã€æ‹“å±•æ‹“å±•è§†é‡å•¦ã€‚åœ¨ä¼šä¸Šsocialæœ‰åŒå­¦é—®æˆ‘åšå‡ çš„ï¼Œåªèƒ½è·Ÿä»–è¯´æˆ‘æ˜¯æœ¬ç§‘ç”ŸğŸ¤¡ã€‚\nå­¦ä¸šç¯‡ ä¸Šé¢æµæ°´è´¦ä¼¼çš„å•°é‡Œå•°å—¦å¤§åŠå¤©ï¼Œæ„Ÿè§‰æ€ä¹ˆä»Šå¹´å°è±¡æ·±åˆ»çš„äº‹æƒ…éƒ½æ˜¯å‡ºå»ç©hhhhï¼Œæ‰€ä»¥ä¸‹é¢ä¹Ÿè¯´è¯´æ­£äº‹ï¼ˆå’³å’³ï¼‰ã€‚\nä»Šå¹´å­¦ä¸šä¸Šçš„è¿›å±•å‘¢ï¼Œå°±æ˜¯ä¸‹å®šå†³å¿ƒæ”¹å˜äº†å½“æ—¶é€‰å®šçš„ç§‘ç ”æ–¹å‘ï¼Œé€‰æ‹©åœ¨AIè¿™ä¸ªå¤§æ–¹å‘æ¢ç´¢ä¸‹å»ã€‚åŒæ—¶å‘¢ï¼Œä¹Ÿæœ‰å¹¸é‡åˆ°äº†ä¸€ä¸ªå¾ˆè´Ÿè´£ä»»çš„å¯¼å¸ˆæ„¿æ„å¸¦æˆ‘ï¼Œé‡åˆ°äº†å¾ˆå¼ºå¾ˆæœ‰è€å¿ƒçš„å¸ˆå…„æ‰‹æŠŠæ‰‹æŒ‡å¯¼æˆ‘ã€‚éƒ½è¯´â€œå¸ˆå‚…é¢†è¿›é—¨ï¼Œä¿®è¡Œé ä¸ªäººâ€ï¼Œæœ‰è¿™ä¹ˆå¤šè€å¸ˆã€å¸ˆå…„å¸¦æˆ‘ä¸€èµ·è¿›æ­¥ï¼ŒçœŸçš„æ˜¯è«å¤§çš„å¹¸è¿ğŸ˜­ã€‚åŒæ—¶ï¼Œç”³æŠ¥çš„â€œæœªæ¥å­¦è€…è®¡åˆ’â€ä¹ŸæˆåŠŸç«‹é¡¹å’Œé€šè¿‡ç­”è¾©äº†ï¼Œä¹Ÿå¾ˆæ„Ÿæ¿€å­¦é™¢èƒ½ç»™äºˆæˆ‘ä»¬ç§‘ç ”çš„å¹³å°å’Œæœºä¼šã€‚å­¦ä¹ å’Œæç§‘ç ”çš„è¿‡ç¨‹å¹¶ä¸æ€»æ˜¯ä¸€å¸†é£é¡ºï¼Œéœ€è¦ä»˜å‡ºå·¨å¤§çš„è€å¿ƒå’Œç²¾åŠ›ï¼Œå‰ä¸€å¤©å¹»æƒ³çš„å®Œç¾å®éªŒç»“æœï¼Œç¬¬äºŒå¤©é†’æ¥ä¸€çœ‹å¯èƒ½å°±â€œå¤©å¡Œäº†â€ã€‚ä½†æ˜¯ï¼Œå¾®å°çš„æˆå°±æ­£æ˜¯å»ºç«‹åœ¨è¿™ä¸€æ¬¡æ¬¡çš„å¤±è´¥ä¸Šçš„ã€‚å¸Œæœ›è‡ªå·±æ˜å¹´èƒ½ç§¯ç´¯æ›´å¤šçš„ç»éªŒï¼Œæ— è®ºæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥çš„ç»éªŒï¼Œå¯¹ä¸ªäººæ¥è¯´éƒ½æ˜¯ä¸€æ¬¡å†ç»ƒã€‚\nç»“ â€œæˆ‘æ­¥å…¥ä¸›æ—ï¼Œæ˜¯å› ä¸ºæˆ‘æƒ³æ´»çš„æœ‰æ„ä¹‰ï¼Œæˆ‘å¸Œæœ›æ´»çš„æ·±åˆ»ï¼Œæ±²å–ç”Ÿå‘½å…¨éƒ¨çš„ç²¾é«“ï¼æŠŠéç”Ÿå‘½çš„ä¸€äº›å…¨éƒ¨å‡»æºƒï¼Œä»¥å…åœ¨ç”Ÿå‘½ç»ˆç»“ä¹‹æ—¶ï¼Œå‘ç°è‡ªå·±ä»æ¥æ²¡æœ‰æ´»è¿‡â€¦â€¦â€\nâ€”â€”æ¢­ç½—ã€Šç“¦å°”ç™»æ¹–ã€‹\nè¿™æ˜¯æˆ‘å¾ˆå–œæ¬¢çš„ä¸€å¥è¯ï¼Œè™½ç„¶å¬èµ·æ¥éå¸¸çš„ç†æƒ³åŒ–ï¼Œæœ‰ä¸€è‚¡é¸¡æ±¤å‘³ï¼Œä½†æ˜¯è¿™å¥è¯è•´å«çš„ç”Ÿå‘½åŠ›éå¸¸åŠ¨äººã€‚å°±åƒã€ŠViva La Vidaã€‹æ­Œè¯é‡Œè·¯æ˜“åå…­çš„è‡ªç™½ï¼Œå³ä½¿æœ‰ä¸€å¤©ä¼šç¦»å»ï¼Œä½†ä»ç„¶ç«­å°½å…¨åŠ›å»çœ‹æ•´ä¸ªä¸–ç•Œã€‚â€œç”Ÿå‘½ä¸‡å²â€ï¼Œç”Ÿå‘½å½“ç„¶æ˜¯æœ‰é™çš„ï¼Œä½†æ˜¯è¿™äº›é—ªå…‰çš„æ—¶åˆ»å´æ˜¯æ— é™çš„ï¼Œæ­£æ˜¯è¿™äº›é—ªå…‰çš„æ—¶åˆ»ï¼Œèµ‹äºˆç”Ÿå‘½ä»¥æ— é™çš„æ„ä¹‰ã€‚\n2025ï¼Œç¥å¥½ï¼\n","permalink":"https://m1yan.github.io/posts/2024%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/","summary":"\u003ch2 id=\"åº\"\u003eåº\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI used to rule the world\u003c/p\u003e\n\u003cp\u003eSeas would rise when I gave the word\u003c/p\u003e\n\u003cp\u003eNow in the morning I sleep alone\u003c/p\u003e\n\u003cp\u003eSweep the streets I used to own\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eViva La Vida\u003c/em\u003e\u003c/p\u003e\n\u003c/blockquote\u003e","title":"2024å¹´ç»ˆæ€»ç»“"},{"content":" Update [2024.12.7]ï¼šå¢åŠ æ¡ä»¶ç”Ÿæˆä»¥åŠæ½œåœ¨æ‰©æ•£æ¨¡å‹çš„ä»‹ç»ã€‚\nUpdate [2024.12.11]ï¼šå¢åŠ è¯„ä¼°æŒ‡æ ‡çš„å¯¹æ¯”ä»¥åŠè¶…å‚æ•°è°ƒæ•´ã€‚\nUpdate [2024.12.12]ï¼šå¢åŠ å¯¹äºæ‰©æ•£æ¨¡å‹ä¸ªæ€§åŒ–ç”Ÿæˆå¾®è°ƒæ–¹æ³•çš„ä»‹ç»\nç”Ÿæˆæ¨¡å‹ ç›®å‰ä¸»æµçš„ç”Ÿæˆæ¨¡å‹åŒ…æ‹¬ç”Ÿæˆå¯¹æŠ—æ¨¡å‹ (GAN)ã€å˜åˆ†è‡ªç¼–ç å™¨ (VAE)å’ŒåŸºäºæµçš„æ¨¡å‹ (Flow-based models)ã€‚\nå®ƒä»¬éƒ½èƒ½å¤Ÿç”Ÿæˆè¾ƒé«˜è´¨é‡çš„å›¾åƒï¼Œä½†æ˜¯ä¹Ÿéƒ½å…·æœ‰ä¸€å®šçš„å±€é™æ€§ã€‚ç”±äºGANæ¨¡å‹å…·æœ‰å¯¹æŠ—æ€§è®­ç»ƒçš„æ€§è´¨ï¼Œå› æ­¤å…¶è®­ç»ƒè¿‡ç¨‹æ¯”è¾ƒè„†å¼±ä¸”éš¾ä»¥ç¨³å®šæ”¶æ•›ï¼Œç”Ÿæˆå›¾åƒçš„å¤šæ ·æ€§ä¹Ÿè¾ƒä½ã€‚ä¸GANç›¸æ¯”ï¼ŒVAEç»å¸¸ä¼šç”Ÿæˆè¾ƒæ¨¡ç³Šã€ä¸å¤Ÿé”åˆ©çš„æ ·æœ¬ï¼Œå› ä¸ºVAEåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­å¼•å…¥äº†KLæ•£åº¦æ­£åˆ™é¡¹ï¼Œé¼“åŠ±æ½œå˜é‡åˆ†å¸ƒä¸å…ˆéªŒåˆ†å¸ƒé æ‹¢ï¼Œå› æ­¤ä¼šæŸå¤±éƒ¨åˆ†ç»†èŠ‚ä¿¡æ¯ã€‚åŸºäºæµçš„ç”Ÿæˆæ¨¡å‹é€šè¿‡ä¸¥æ ¼çš„å¯é€†å˜æ¢å®ç°å¯¹æ•°æ®åˆ†å¸ƒçš„ç²¾ç¡®å¯†åº¦ä¼°è®¡ï¼Œè¿™æ„å‘³ç€æ¯ä¸€æ­¥å˜æ¢éœ€è¦æ˜¯å¯é€†ä¸”é›…å¯æ¯”è¡Œåˆ—å¼å¯è®¡ç®—ï¼Œå› æ­¤åœ¨æ¨¡å‹è®¾è®¡ä¸Šå¯¹å±‚ç»“æ„æœ‰è¾ƒå¼ºé™åˆ¶ã€‚\næ‰©æ•£æ¨¡å‹çš„è®¾è®¡æ€è·¯æ¥è‡ªéå¹³è¡¡çƒ­åŠ›å­¦ã€‚æ¨¡å‹å®šä¹‰äº†ä¸€ä¸ªé©¬å°”å¯å¤«æ‰©æ•£æ­¥éª¤ï¼Œç¼“æ…¢åœ°å‘å›¾åƒä¸­æ·»åŠ éšæœºå™ªå£°ï¼Œç„¶åå­¦ä¹ æ‰©æ•£çš„é€†è¿‡ç¨‹ä»¥ä»å™ªå£°ä¸­æ„å»ºæ‰€éœ€è¦çš„æ•°æ®æ ·æœ¬ã€‚\nç”Ÿæˆæ¨¡å‹çš„ç»“æ„ï¼Œå›¾å¼•è‡ª Weng, Lilian. (Jul 2021). What are diffusion models? Lilâ€™Log. ä»€ä¹ˆæ˜¯æ‰©æ•£æ¨¡å‹ï¼Ÿ ç›®å‰ä¸»æµçš„åŸºäºæ‰©æ•£çš„ç”Ÿæˆæ¨¡å‹åŒ…æ‹¬æ‰©æ•£æ¦‚ç‡æ¨¡å‹ (Diffusion Probabilistic Models)ã€æ¡ä»¶å™ªå£°æ‰“åˆ†ç½‘ç»œ (noise-conditioned score network)å’Œå»å™ªæ‰©æ•£æ¦‚ç‡æ¨¡å‹ (denoising diffusion probabilistic models, DDPM)ï¼Œæ‰©æ•£è¿‡ç¨‹åŒ…æ‹¬å‰å‘æ‰©æ•£è¿‡ç¨‹å’Œé€†å‘æ‰©æ•£è¿‡ç¨‹ã€‚\nå‰å‘æ‰©æ•£è¿‡ç¨‹ ç»™å®šä»çœŸå®æ•°æ®åˆ†å¸ƒä¸­é‡‡æ ·çš„æ•°æ®ç‚¹ $x_0$ ~ $q(x) $ ï¼Œå®šä¹‰ä¸€ä¸ªå‰å‘æ‰©æ•£è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘æ ·æœ¬ä¸­æ·»åŠ é«˜æ–¯å™ªå£° $T$ æ­¥ï¼Œäº§ç”Ÿä¸€ç³»åˆ—å«æœ‰å™ªå£°çš„æ ·æœ¬ $ x_1, \u0026hellip;, x_T $ã€‚ $$ q(x_t|x_{t-1})=\\mathcal{N}(x_t; \\sqrt{1-\\beta_t}x_{t-1},\\beta_tI) \\ q(x_{1:T}|x_0) = \\prod_{t=1}^Tq(x_t|x_{t-1}) $$ éšç€åŠ å™ªæ­¥æ•°çš„å¢åŠ ï¼Œå›¾åƒç‰¹å¾é€æ¸æ¶ˆå¤±ï¼Œæœ€ç»ˆå½“Tè¶‹è¿‘äºæ— ç©·æ—¶ï¼Œ$x_T$ ç›¸å½“äºå„å‘åŒæ€§çš„é«˜æ–¯åˆ†å¸ƒã€‚\né€šè¿‡ç¼“æ…¢åœ°æ·»åŠ ï¼ˆå»é™¤ï¼‰å™ªå£°çš„æ­£å‘ï¼ˆåå‘ï¼‰æ‰©æ•£è¿‡ç¨‹ï¼Œå›¾å¼•è‡ªWeng, Lilian. (Jul 2021). What are diffusion models? Lilâ€™Log. ä¸Šè¿°é‡‡æ ·è¿‡ç¨‹èƒ½å¤Ÿä½¿æˆ‘ä»¬è®¡ç®—å‡ºåœ¨æ—¶é—´tæ—¶åˆ»çš„é‡‡æ ·$x_t$ã€‚ä»¤\n$$ \\alpha_t=1-\\beta_t, \\overline{\\alpha}_t = \\prod_{i=1}^t\\alpha_i \\\\ x_t = \\sqrt{\\alpha_t}x_{t-1}+\\sqrt{1-\\alpha_t}\\epsilon_{t-1} \\\\ =\\sqrt{\\alpha_t\\alpha_{t-1}}x_{t-2}+\\sqrt{1-\\alpha_t\\alpha_{t-1}}\\epsilon_{t-2} \\\\ =... \\\\ =\\sqrt{\\overline{\\alpha}_t}x_0+\\sqrt{1-\\overline{\\alpha_t}}\\epsilon $$ é€†å‘æ‰©æ•£è¿‡ç¨‹ ä¸ºäº†å®ç°ä»æ— åºå™ªå£°æ¢å¤åˆ°æ•°æ®åˆ†å¸ƒï¼ˆå³åå‘æ‰©æ•£è¿‡ç¨‹ï¼‰ï¼Œéœ€è¦å¯¹åéªŒåˆ†å¸ƒ $q(x_{t-1}|x_t, x_0)$ è¿›è¡Œåˆ†æã€‚æ ¹æ®è´å¶æ–¯å…¬å¼ï¼š\n$$ q(x_{t-1} \\mid x_t, x_0) = \\frac{q(x_t \\mid x_{t-1}, x_0) q(x_{t-1} \\mid x_0)}{q(x_t \\mid x_0)} $$ ç”±äºå‰å‘è¿‡ç¨‹å®šä¹‰ä¸ºæ¡ä»¶ç‹¬ç«‹çš„é©¬å°”å¯å¤«é“¾ï¼Œæœ‰ï¼š $$ q(x_t | x_{t-1}, x_0) = q(x_t | x_{t-1}) \\\\ q(x_{t-1} \\mid x_0) = \\mathcal{N}(x_{t-1}; \\sqrt{\\bar{\\alpha}_{t-1}} x_0, (1-\\bar{\\alpha}_{t-1})I) $$ å°†ä»¥ä¸Šåˆ†å¸ƒä»£å…¥åï¼Œå¯å¾—åˆ°åéªŒåˆ†å¸ƒä»æ˜¯é«˜æ–¯åˆ†å¸ƒå½¢å¼ï¼š $$ q(x_{t-1} \\mid x_t, x_0) = \\mathcal{N}(x_{t-1}; \\tilde{\\mu}_t(x_t, x_0), \\tilde{\\beta}_t I) $$ å…¶ä¸­ï¼š $$ \\tilde{\\mu}_t(x_t, x_0) = \\frac{\\sqrt{\\bar{\\alpha}_{t-1}}\\beta_t}{1-\\bar{\\alpha}_t} x_0 + \\frac{\\sqrt{\\alpha_t}(1-\\bar{\\alpha}_{t-1})}{1-\\bar{\\alpha}_t} x_t, \\\\ \\tilde{\\beta}_t = \\frac{1-\\bar{\\alpha}_{t-1}}{1-\\bar{\\alpha}_t}\\beta_t $$ åå‘æ‰©æ•£è¿‡ç¨‹çš„æ ¸å¿ƒåœ¨äºï¼šå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå¯¹ $q(x{t-1} | x_t)$ è¿›è¡Œè¿‘ä¼¼ï¼Œå°±å¯ä»¥ä»çº¯å™ªå£°ä¸€æ­¥ä¸€æ­¥è¿˜åŸä¸ºåŸå§‹æ•°æ®åˆ†å¸ƒã€‚ç”±äºæˆ‘ä»¬ä¸çŸ¥é“$x_0$ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªå‚æ•°åŒ–çš„æ¨¡å‹ $p\\theta$ æ¥è¿‘ä¼¼ $q(x_{t-1}|x_t,x_0)$ï¼š $$ p_\\theta(x_{t-1} \\mid x_t) \\approx q(x_{t-1} \\mid x_t, x_0) $$ è‹¥ä½¿ç”¨æ¨¡å‹ $\\epsilon_\\theta(x_t,t)$ æ¥é¢„æµ‹å™ªå£°ï¼Œåˆ™å¯å¾—åˆ°ç®€åŒ–çš„é€†æ‰©æ•£å…¬å¼ï¼š $$ x_{t-1} = \\frac{1}{\\sqrt{\\alpha_t}}\\left(x_t - \\frac{1-\\alpha_t}{\\sqrt{1-\\bar{\\alpha}_t}}\\epsilon_\\theta(x_t, t)\\right) + \\sqrt{\\tilde{\\beta}_t} z, \\quad z \\sim \\mathcal{N}(0, I) $$ t=1æ—¶çœç•¥æœ€åçš„å™ªå£°é¡¹ï¼Œæœ€ç»ˆå¯ä»¥å¾—åˆ°$x_0$çš„æ ·æœ¬ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ‰©æ•£æ¨¡å‹é€šè¿‡é¢„æµ‹å™ªå£°$\\epsilon_\\theta$æ¥é‡æ„ä¹‹å‰æ—¶é—´æ­¥çš„æ ·æœ¬ã€‚ å¯ä»¥å¾—åˆ°å¿½ç•¥åŠ æƒé¡¹çš„ç®€åŒ–ç›®æ ‡æ¥è®­ç»ƒæ‰©æ•£æ¨¡å‹ï¼Œæœ€ç»ˆè®¾è®¡çš„æŸå¤±å‡½æ•°å¦‚ä¸‹ï¼š\n$$ L_{\\text{simple}}(\\theta) = \\mathbb{E}_{t,x_0,\\epsilon} \\left[ \\| \\epsilon - \\epsilon_\\theta(x_t, t) \\|^2 \\right] $$ å…¶ä¸­ï¼Œ $$ x_t = \\sqrt{\\bar{\\alpha}_t}x_0 + \\sqrt{1-\\bar{\\alpha}_t}\\epsilon, \\quad \\epsilon \\sim \\mathcal{N}(0, I), \\quad t \\sim \\text{Uniform}\\{1,\\ldots,T\\} $$ è‹¥è€ƒè™‘ä¸åŒæ—¶é—´æ­¥çš„åŠ æƒï¼Œå¯ä»¥å®šä¹‰åŠ æƒæŸå¤±ï¼š $$ L(\\theta) = \\sum_{t=1}^{T} w_t \\mathbb{E}_{x_0,\\epsilon}\\left[\\| \\epsilon - \\epsilon_\\theta(x_t, t)\\|^2 \\right] $$ DDPMè®ºæ–‡ä¸­çš„ç®—æ³•å¦‚ä¸‹ï¼š å®ç°ä¸€ä¸ªDDPM ä¸ºäº†æ›´æ¸…æ¥šåœ°äº†è§£æ‰©æ•£æ¨¡å‹çš„æ•´ä½“æ¶æ„ï¼Œè€Œä¸æ˜¯ä¸ºäº†æ¢ç©¶å¤æ‚çš„æ¦‚ç‡è®ºå’Œæ•°å­¦åŸç†ï¼Œä½¿ç”¨diffusersåº“å®ç°DDPMçš„è®­ç»ƒå’Œæ¨ç†ã€‚\næˆ‘ä»¬ä½¿ç”¨huggingfaceä¸Šçš„huggan/smithsonian_butterflies_subsetä½œä¸ºè®­ç»ƒæ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åŒ…å«è‡ªç„¶ç•Œå„ç§å„æ ·çš„è´è¶ï¼Œå¯ç”¨äºæ— æ¡ä»¶çš„å›¾åƒç”Ÿæˆè¿‡ç¨‹ã€‚\nå‚æ•°é…ç½® é¦–å…ˆæŒ‰ç…§ä»¥ä¸‹é…ç½®è¿›è¡Œè®­ç»ƒå’Œæ¨ç†æ­¥éª¤çš„å‚æ•°é…ç½®ï¼š\nfrom dataclasses import dataclass @dataclass class TrainingConfig: image_size = 128 train_batch_size = 32 eval_batch_size = 8 # how many images to sample during evaluation num_epochs = 50 gradient_accumulation_steps = 1 learning_rate = 1e-4 lr_warmup_steps = 500 save_image_epochs = 10 save_model_epochs = 25 mixed_precision = \u0026#34;fp16\u0026#34; # `no` for float32, `fp16` for automatic mixed precision output_dir = \u0026#34;output\u0026#34; # the model name locally and on the HF Hub seed = 42 device = \u0026#34;cuda\u0026#34; config = TrainingConfig() è®­ç»ƒæ•°æ®å‡†å¤‡ ç„¶åä½¿ç”¨huggingfaceçš„datasetsåº“è¿›è¡Œæ•°æ®é›†çš„ä¸‹è½½å’Œå¯¼å…¥ï¼š\nfrom datasets import load_dataset config.dataset_name = \u0026#34;huggan/smithsonian_butterflies_subset\u0026#34; dataset = load_dataset(config.dataset_name, split=\u0026#34;train\u0026#34;) ä½¿ç”¨ä»¥ä¸‹ä»£ç æŸ¥çœ‹æ•°æ®é›†ä¸­çš„å›¾åƒï¼š\nimport matplotlib.pyplot as plt fig, axs = plt.subplots(1, 4, figsize=(16, 4)) for i, image in enumerate(dataset[:4][\u0026#34;image\u0026#34;]): axs[i].imshow(image) axs[i].set_axis_off() fig.show() ä½¿ç”¨torchvisionåº“ä¸­çš„transformsæ¨¡å—ï¼Œå°†å›¾åƒçš„å°ºå¯¸å’Œæ•°å€¼å½’ä¸€åŒ–å¤„ç†ï¼š\nfrom torchvision import transforms preprocess = transforms.Compose([ transforms.Resize((config.image_size, config.image_size)), transforms.RandomHorizontalFlip(), transforms.ToTensor(), transforms.Normalize([0.5], [0.5]), ]) def transform(examples): images = [preprocess(image.convert(\u0026#34;RGB\u0026#34;)) for image in examples[\u0026#34;image\u0026#34;]] return {\u0026#34;img\u0026#34;: images} dataset.set_transform(transform) print(dataset[0][\u0026#39;img\u0026#39;].shape) # torch.Size([3, 128, 128]) å®šä¹‰ä¸€ä¸ªdataloaderç”¨äºæ•°æ®é›†çš„æ‰¹é‡åŠ è½½ï¼š\nimport torch train_dataloader = torch.utils.data.DataLoader(dataset, batch_size=config.train_batch_size, shuffle=True) ä½¿ç”¨U-Netè¿›è¡Œå™ªå£°é¢„æµ‹ åœ¨æ‰©æ•£æ¨¡å‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨MLPæˆ–è€…U-Netæ¥è¿›è¡Œå™ªå£°çš„é¢„æµ‹ï¼Œä»è€Œå°†å™ªå£°ä¸€æ­¥ä¸€æ­¥å»å™ªå¾—åˆ°çœŸå®å›¾åƒã€‚é€‰æ‹©U-Netä½œä¸ºå™ªå£°é¢„æµ‹çš„æ¨¡å‹ï¼ŒU-Netçš„æ¶æ„ç”±ä¸‹é‡‡æ ·å †æ ˆå’Œä¸Šé‡‡æ ·å †æ ˆæ„æˆã€‚\nä¸‹é‡‡æ ·ï¼šæ¯ä¸ªæ­¥éª¤åŒ…æ‹¬é‡å¤åº”ç”¨ä¸¤ä¸ª 3x3 å·ç§¯ï¼ˆæ— å¡«å……å·ç§¯ï¼‰ï¼Œæ¯ä¸ªå·ç§¯åè·Ÿä¸€ä¸ª ReLU å’Œä¸€ä¸ªæ­¥å¹…ä¸º 2 çš„ 2x2 æœ€å¤§æ± åŒ–ã€‚åœ¨æ¯ä¸ªä¸‹é‡‡æ ·æ­¥éª¤ä¸­ï¼Œç‰¹å¾é€šé“çš„æ•°é‡éƒ½ä¼šåŠ å€ã€‚ ä¸Šé‡‡æ ·ï¼šæ¯ä¸ªæ­¥éª¤åŒ…æ‹¬å¯¹ç‰¹å¾å›¾çš„ä¸Šé‡‡æ ·ï¼Œç„¶åè¿›è¡Œ 2x2 å·ç§¯ï¼Œå¹¶ä¸”æ¯æ¬¡å°†ç‰¹å¾é€šé“æ•°é‡å‡åŠã€‚ æ·å¾„è¿æ¥ï¼šä¸Šä¸‹é‡‡æ ·å †æ ˆç›¸åº”å±‚é€šè¿‡æ·å¾„è¿æ¥ï¼Œä¸ºä¸Šé‡‡æ ·è¿‡ç¨‹æä¾›å¿…è¦çš„é«˜åˆ†è¾¨ç‡ç‰¹å¾ã€‚ å®ç°å¦‚ä¸‹ï¼š\nfrom diffusers import UNet2DModel model = UNet2DModel( sample_size=config.image_size, # the target image resolution in_channels=3, # the number of input channels, 3 for RGB images out_channels=3, # the number of output channels layers_per_block=2, # how many ResNet layers to use per UNet block block_out_channels=(128, 128, 256, 256, 512, 512), # the number of output channels for each UNet block down_block_types=( \u0026#34;DownBlock2D\u0026#34;, # a regular ResNet downsampling block \u0026#34;DownBlock2D\u0026#34;, \u0026#34;DownBlock2D\u0026#34;, \u0026#34;DownBlock2D\u0026#34;, \u0026#34;AttnDownBlock2D\u0026#34;, # a ResNet downsampling block with spatial self-attention \u0026#34;DownBlock2D\u0026#34;, ), up_block_types=( \u0026#34;UpBlock2D\u0026#34;, # a regular ResNet upsampling block \u0026#34;AttnUpBlock2D\u0026#34;, # a ResNet upsampling block with spatial self-attention \u0026#34;UpBlock2D\u0026#34;, \u0026#34;UpBlock2D\u0026#34;, \u0026#34;UpBlock2D\u0026#34;, \u0026#34;UpBlock2D\u0026#34;, ), ) # Check input and output shapes sample_image = dataset[0][\u0026#39;img\u0026#39;].unsqueeze(0) print(\u0026#34;Input Shape\u0026#34;, sample_image.shape) print(\u0026#34;Output Shape\u0026#34;, model(sample_image, timestep=0).sample.shape) é€šè¿‡æ£€æŸ¥è¾“å…¥U-Netå’Œè¾“å‡ºU-Netçš„å›¾åƒå½¢çŠ¶ï¼Œå¯ä»¥å¾—çŸ¥è¾“å…¥å’Œé¢„æµ‹å™ªå£°çš„å½¢çŠ¶ä¸€è‡´ï¼Œæ»¡è¶³æ‰©æ•£æ¨¡å‹çš„éœ€æ±‚ã€‚\nDDPM Scheduler åˆ›å»ºä¸€ä¸ªå™ªå£°è°ƒåº¦å™¨ï¼Œç”¨æ¥åœ¨ä¸åŒçš„æ—¶é—´æ­¥ä¸­ä¸ºå›¾åƒåŠ å™ªã€‚\n# Create a DDPM scheduler import torch from PIL import Image from diffusers import DDPMScheduler noise_scheduler = DDPMScheduler(num_train_timesteps=1000) noise = torch.randn(sample_image.shape) timesteps = torch.LongTensor([50]) noisy_image = noise_scheduler.add_noise(sample_image, noise, timesteps) Image.fromarray(((noisy_image.permute(0,2,3,1)+1.0)*127.5).type(torch.uint8).numpy()[0]) ä»åŠ å™ªåçš„è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œå›¾åƒä¸­å‡ºç°äº†æ˜æ˜¾çš„å™ªå£°ã€‚\nåˆ›å»ºä¼˜åŒ–å™¨å’Œå­¦ä¹ ç‡è°ƒåº¦å™¨ # Create optim and lr scheduler from diffusers.optimization import get_cosine_schedule_with_warmup optimizer = torch.optim.Adam(model.parameters(), lr=config.learning_rate) lr_scheduler = get_cosine_schedule_with_warmup(optimizer, num_warmup_steps=config.lr_warmup_steps, num_training_steps= (len(train_dataloader)*config.num_epochs) ) è®¾è®¡æŸå¤±å‡½æ•° æ‰©æ•£æ¨¡å‹çš„æ ¸å¿ƒåœ¨äºä¼˜åŒ–é¢„æµ‹å™ªå£°çš„æ¨¡å‹ï¼Œå› æ­¤éœ€è¦ä½¿é¢„æµ‹å™ªå£°çš„æ¨¡å‹ (U-Net) è¾“å‡ºçš„å™ªå£°ä¸å®é™…å™ªå£°çš„åˆ†å¸ƒæ¥è¿‘ã€‚å› æ­¤æŸå¤±å‡½æ•°å¯ä»¥ç®€å•åœ°è®¾è®¡ä¸ºï¼š\nnoise_pred = model(noisy_images, timesteps, return_dict=False)[0] loss = F.mse_loss(noise_pred, noise) è®­ç»ƒè¿‡ç¨‹ ä½¿ç”¨huggingfaceçš„accelerateåº“è¿›è¡Œæ–¹ä¾¿çš„æ¨¡å‹åŠ è½½ã€æƒé‡ä¿å­˜ä»¥åŠæ¨¡å‹è¯„ä¼°ã€‚è®­ç»ƒçš„æ•´ä½“æ€è·¯æ˜¯ç”Ÿæˆå›¾åƒä¸åŒæ—¶é—´æ­¥ä¸­åŠ å…¥å™ªå£°åçš„å›¾åƒï¼ŒU-Netæ¥å—åŠ å™ªåçš„å›¾åƒä»¥åŠå…¶å¯¹åº”çš„æ—¶é—´æ­¥ï¼Œé¢„æµ‹å‡ºè¯¥æ­¥éª¤åŠ å…¥çš„å™ªå£°ã€‚é¢„æµ‹å™ªå£°ä¸å®é™…åŠ å…¥çš„å™ªå£°ä½¿ç”¨lossè¿›è¡Œè®¡ç®—ï¼Œæœ€å°åŒ–lossï¼Œè¿›è€Œä½¿U-Netå…·æœ‰é¢„æµ‹å™ªå£°çš„èƒ½åŠ›ã€‚æœ€ç»ˆåœ¨æ¨ç†è¿‡ç¨‹ä¸­èƒ½å¤Ÿä½¿ç”¨U-Netåœ¨æ¯ä¸ªæ—¶é—´æ­¥è¿›è¡Œå»å™ªï¼Œæœ€åç”Ÿæˆæ¥è¿‘çœŸå®åˆ†å¸ƒçš„å›¾åƒã€‚è®­ç»ƒå¾ªç¯ä»£ç å¦‚ä¸‹ï¼š\nfrom accelerate import Accelerator from tqdm.auto import tqdm from pathlib import Path import torch.nn.functional as F import os def train_loop(config, model, noise_scheduler, optimizer, train_dataloader, lr_scheduler): # Initialize accelerator accelerator = Accelerator( mixed_precision=config.mixed_precision, gradient_accumulation_steps=config.gradient_accumulation_steps, project_dir=os.path.join(config.output_dir, \u0026#34;logs\u0026#34;) ) if accelerator.is_main_process: if config.output_dir is not None: os.makedirs(config.output_dir, exist_ok=True) # Prepare everything model, optimizer, train_dataloader, lr_scheduler = accelerator.prepare( model, optimizer, train_dataloader, lr_scheduler ) global_step = 0 # Train! for epoch in range(config.num_epochs): progress_bar = tqdm(total=len(train_dataloader), disable=not accelerator.is_local_main_process) progress_bar.set_description(f\u0026#34;Epoch {epoch}\u0026#34;) for step, batch in enumerate(train_dataloader): clean_images = batch[\u0026#34;img\u0026#34;] # Sample noise to add to the clean image noise = torch.randn(clean_images.shape, device=config.device) bs = clean_images.shape[0] # Sample a random timestep for each image timesteps = torch.randint( 0, noise_scheduler.config.num_train_timesteps, (bs,), device=config.device, dtype=torch.int64 ) # forward diffusion process noisy_images = noise_scheduler.add_noise(clean_images, noise, timesteps) with accelerator.accumulate(model): # Predict Noise residual noise_pred = model(noisy_images, timesteps, return_dict=False)[0] loss = F.mse_loss(noise_pred, noise) accelerator.backward(loss) if accelerator.sync_gradients: accelerator.clip_grad_norm_(model.parameters(), 1.0) # Gradient clipping optimizer.step() lr_scheduler.step() optimizer.zero_grad() progress_bar.update(1) logs = {\u0026#34;loss\u0026#34;: loss.detach().item(), \u0026#34;lr\u0026#34;: lr_scheduler.get_last_lr()[0], \u0026#34;step\u0026#34;: global_step} progress_bar.set_postfix(**logs) accelerator.log(logs, step=global_step) global_step += 1 # Evaluation if accelerator.is_main_process: pipeline = DDPMPipeline(unet=accelerator.unwrap_model(model), scheduler=noise_scheduler) if (epoch + 1) % config.save_image_epochs == 0: evaluate(config, epoch, pipeline) if (epoch + 1) % config.save_model_epochs == 0: pipeline.save_pretrained(os.path.join(config.output_dir, f\u0026#34;epoch_{epoch}\u0026#34;)) elif (epoch + 1) == config.num_epochs: pipeline.save_pretrained(os.path.join(config.output_dir, f\u0026#34;final\u0026#34;)) å…¶ä¸­ï¼Œæ¨¡å‹è¯„ä¼°çš„ä»£ç å¦‚ä¸‹ï¼š\n# Evaluation from diffusers import DDPMPipeline from diffusers.utils import make_image_grid import os def evaluate(config, epoch, pipeline): images = pipeline( batch_size = config.eval_batch_size, generator = torch.Generator(device=config.device).manual_seed(config.seed), ).images image_grid = make_image_grid(images, rows=2, cols=4) test_dir = os.path.join(config.output_dir, \u0026#34;test\u0026#34;) os.makedirs(test_dir, exist_ok=True) image_grid.save(os.path.join(test_dir, f\u0026#34;epoch_{epoch}.png\u0026#34;)) è®­ç»ƒä¸æ¨ç†ç»“æœ æœ€åä½¿ç”¨ä»¥ä¸‹ä»£ç åœ¨Jupyter Notebookä¸­å¯åŠ¨è®­ç»ƒï¼š\nrom accelerate import notebook_launcher args = (config, model, noise_scheduler, optimizer, train_dataloader, lr_scheduler) notebook_launcher(train_loop, args, num_processes=1) æœ€ç»ˆä¸åŒè®­ç»ƒepochçš„æ¨ç†ç»“æœå¦‚ä¸‹ï¼š\nå¯ä»¥çœ‹å‡ºï¼Œéšç€è®­ç»ƒæ­¥æ•°çš„å¢åŠ ï¼Œç”Ÿæˆçš„å›¾åƒè¶Šæ¥è¶Šå‘çœŸå®çš„å›¾åƒåˆ†å¸ƒï¼ˆè´è¶å½¢æ€ï¼‰é æ‹¢ï¼Œè¯´æ˜ç»è¿‡è®­ç»ƒåï¼Œæ‰©æ•£æ¨¡å‹å…·æœ‰äº†ç”Ÿæˆå›¾åƒçš„èƒ½åŠ›ã€‚\nä½¿ç”¨ISå’ŒFIDæŒ‡æ ‡è¿›è¡Œå›¾åƒè´¨é‡è¯„ä¼° ä»€ä¹ˆæ˜¯IS (Inception Score) ? Inception Score æ˜¯ä¸€ç§å¯¹ç”Ÿæˆå›¾åƒçš„è´¨é‡å’Œå¤šæ ·æ€§è¿›è¡Œè¯„ä»·çš„æŒ‡æ ‡ã€‚å…¶æ€è·¯æ˜¯åˆ©ç”¨ä¸€ä¸ªé¢„è®­ç»ƒå¥½çš„åˆ†ç±»æ¨¡å‹ï¼ˆé€šå¸¸æ˜¯ Inception v3ï¼‰å¯¹ç”Ÿæˆçš„å›¾åƒè¿›è¡Œåˆ†ç±»ï¼Œç„¶åæ ¹æ®åˆ†ç±»ç»“æœçš„åˆ†å¸ƒæ¥è®¡ç®—å¾—åˆ†ã€‚\n$p(y|x)$ ä¸ºç»™å®šç”Ÿæˆå›¾åƒ $x$ çš„ç±»åˆ«åˆ†å¸ƒï¼Œ$p(y) = \\int p(y|x) p(x) dx$ ä¸ºæ‰€æœ‰ç”Ÿæˆå›¾åƒçš„å¹³å‡ç±»åˆ«åˆ†å¸ƒï¼Œ$KL(\\cdot|\\cdot)$ ä¸ºKLæ•£åº¦ï¼Œåˆ™ISä¸ºï¼š $$ \\text{IS} = \\exp\\left( \\mathbb{E}_{x}\\bigl[ KL(p(y \\mid x) | p(y)) \\bigr] \\right) $$\nç›´è§‚ä¸Šï¼š\nå¦‚æœç”Ÿæˆå›¾åƒçš„è´¨é‡é«˜ï¼Œåˆ™æ¦‚ç‡åˆ†å¸ƒåº”è¯¥é›†ä¸­åœ¨æŸäº›æ˜ç¡®çš„ç±»ä¸Šï¼ˆå³åˆ†å¸ƒå³°å€¼è¾ƒé«˜ï¼Œè¯´æ˜å›¾åƒèƒ½å¤Ÿè¢«è½»æ¾åˆ†ç±»ï¼‰ å¦‚æœç”Ÿæˆå›¾åƒçš„å¤šæ ·æ€§é«˜ï¼Œåˆ™æ¦‚ç‡åˆ†å¸ƒåº”è¯¥å‡åŒ€è¦†ç›–å¤šä¸ªç±»åˆ«ã€‚ ç»¼åˆæ¥çœ‹ï¼ŒISé«˜æ—¶ï¼Œè¯´æ˜ç”Ÿæˆå›¾åƒæ—¢æ¸…æ™°åˆå¤šæ ·ã€‚\nä»€ä¹ˆæ˜¯FID (Frechet Inception Distance) ? FID ç”¨äºè¡¡é‡ç”Ÿæˆåˆ†å¸ƒå’ŒçœŸå®æ•°æ®åˆ†å¸ƒåœ¨ç‰¹å¾ç©ºé—´ï¼ˆé€šå¸¸æ˜¯ Inception v3 çš„ä¸­é—´ç‰¹å¾å±‚ï¼‰ä¸Šçš„å·®å¼‚ã€‚ä¸ISä¸åŒï¼ŒFIDéœ€è¦çœŸå®æ ·æœ¬å’Œç”Ÿæˆæ ·æœ¬ä½œä¸ºå¯¹æ¯”ï¼Œå…³æ³¨ä¸¤è€…ä¹‹é—´çš„ç»Ÿè®¡å·®å¼‚ã€‚\nè®¾çœŸå®æ•°æ®ç‰¹å¾åˆ†å¸ƒä¸º $\\mathcal{N}(\\mu_r, \\Sigma_r)$ï¼Œç”Ÿæˆæ•°æ®ç‰¹å¾åˆ†å¸ƒä¸º $\\mathcal{N}(\\mu_g, \\Sigma_g)$ï¼Œåˆ™FIDå®šä¹‰ä¸ºä¸¤é«˜æ–¯åˆ†å¸ƒçš„FrÃ©chetè·ç¦»ï¼š $$ \\text{FID}(\\mu_r, \\Sigma_r, \\mu_g, \\Sigma_g) = |\\mu_r - \\mu_g|^2 + \\text{Tr}\\left(\\Sigma_r + \\Sigma_g - 2(\\Sigma_r \\Sigma_g)^{1/2}\\right). $$ å…¶ä¸­ï¼Œ$\\mu_r, \\Sigma_r$ ä¸ºçœŸå®åˆ†å¸ƒç‰¹å¾çš„å‡å€¼å’Œåæ–¹å·®ï¼Œ$\\mu_g, \\Sigma_g$ ä¸ºç”Ÿæˆåˆ†å¸ƒç‰¹å¾çš„å‡å€¼å’Œåæ–¹å·®ï¼Œ$\\text{Tr}(\\cdot)$ ä¸ºè¿¹è¿ç®—ï¼Œ$( \\Sigma_r \\Sigma_g )^{1/2}$ ä¸ºçŸ©é˜µçš„å¯¹ç§°æ­£å®šå¹³æ–¹æ ¹ã€‚\nç›´è§‚ä¸Šï¼š\nFIDè¡¡é‡çš„æ˜¯ä¸¤ä¸ªé«˜æ–¯åˆ†å¸ƒä¹‹é—´çš„FrÃ©chetè·ç¦»ï¼Œå½“ä¸¤ç»„ç‰¹å¾åˆ†å¸ƒä¸€è‡´æ—¶ï¼ŒFIDä¸º0ï¼ˆç†æƒ³æƒ…å†µä¸‹ï¼‰ã€‚\nå¦‚æœç”Ÿæˆå›¾åƒè´¨é‡è¶Šé«˜è¶Šé€¼è¿‘çœŸå®åˆ†å¸ƒï¼Œé‚£ä¹ˆ $\\mu_g \\approx \\mu_r$ ä¸” $\\Sigma_g \\approx \\Sigma_r$ï¼Œå› æ­¤FIDä¼šå¾ˆä½ã€‚\nå¦‚æœç”Ÿæˆå›¾åƒä¸çœŸå®åˆ†å¸ƒåå·®å¤§ï¼Œåˆ†å¸ƒç»Ÿè®¡å·®å¼‚æ˜æ˜¾ï¼ŒFIDä¼šè¾ƒé«˜ã€‚\nISä¸FIDçš„å¯¹æ¯” æŒ‡æ ‡ ISï¼ˆInception Scoreï¼‰ FIDï¼ˆFrÃ©chet Inception Distanceï¼‰ ç›®æ ‡ æµ‹é‡ç”Ÿæˆå›¾åƒçš„å¤šæ ·æ€§å’Œæ¸…æ™°åº¦ æµ‹é‡ç”Ÿæˆå›¾åƒä¸çœŸå®å›¾åƒåˆ†å¸ƒçš„ç›¸ä¼¼æ€§ å…¬å¼ åŸºäºåˆ†ç±»åˆ†å¸ƒçš„KLæ•£åº¦ é«˜æ–¯åˆ†å¸ƒå‡å€¼å’Œåæ–¹å·®çš„FrÃ©chetè·ç¦» æ•°å€¼èŒƒå›´ æ— ä¸Šé™ 0 ï¼ˆè¶Šä½è¶Šå¥½ï¼‰ ä¼˜ç‚¹ ç®€å•ç›´è§‚ï¼Œå…³æ³¨å¤šæ ·æ€§å’Œæ¸…æ™°åº¦ ç»¼åˆè€ƒè™‘ç»†èŠ‚å’Œåˆ†å¸ƒç›¸ä¼¼æ€§ ç¼ºç‚¹ ä¸è€ƒè™‘ç”Ÿæˆå›¾åƒä¸çœŸå®å›¾åƒçš„åŒ¹é…ç¨‹åº¦ è®¡ç®—ä¾èµ–æ ·æœ¬é‡ï¼Œå¤æ‚åº¦ç¨é«˜ é€‚ç”¨åœºæ™¯ å¿«é€Ÿè¯„ä¼°ç”Ÿæˆå›¾åƒçš„åŸºæœ¬æ€§èƒ½ æ›´å…¨é¢çš„è¡¡é‡ç”Ÿæˆå›¾åƒè´¨é‡å’ŒçœŸå®æ„Ÿ ISè¯„ä¼° æµ‹é‡ISå’ŒFIDæŒ‡æ ‡ï¼Œéœ€è¦çš„å›¾åƒæ•°é‡è‡³å°‘éœ€è¦ä¸Šä¸‡å¼ ï¼Œç”±äºç”Ÿå›¾é€Ÿåº¦è¾ƒæ…¢ï¼Œä½¿ç”¨500å¼ ç”Ÿæˆå›¾åƒè¿›è¡ŒISæŒ‡æ ‡çš„æµ‹é‡ã€‚\né¦–å…ˆä½¿ç”¨ä»¥ä¸‹ä»£ç è¿›è¡Œsamplingï¼š\n# Generate samples from diffusers import DDPMPipeline import random pipeline = DDPMPipeline.from_pretrained(\u0026#34;/openbayes/home/miyan/works/Diffusion-Model-0-1/output/epoch_49\u0026#34;).to(config.device) samples_num = 500 batch_size = 20 for epoch in range(samples_num // batch_size): images = pipeline( batch_size = batch_size, generator = [torch.Generator(device=config.device).manual_seed(random.randint(0, 100000)) for _ in range(batch_size)], ).images test_dir = os.path.join(config.output_dir, \u0026#34;samples\u0026#34;) os.makedirs(test_dir, exist_ok=True) for i, image in enumerate(images): image.save(os.path.join(test_dir, f\u0026#34;{i+epoch*batch_size}.png\u0026#34;)) ä½¿ç”¨ä»¥ä¸‹ä»£ç è¿›è¡ŒISæŒ‡æ ‡çš„æµ‹é‡ï¼š\nimport torch import torch.nn as nn import torch.nn.functional as F import torchvision.models as models import numpy as np from scipy.linalg import sqrtm def calculate_inception_score(images, device, batch_size=32, splits=10): \u0026#34;\u0026#34;\u0026#34; è®¡ç®— Inception Score (IS)ã€‚ å‚æ•°: images: torch.Tensorï¼Œå½¢çŠ¶ä¸º(N, C, H, W) çš„ç”Ÿæˆå›¾åƒ device: torch.deviceï¼Œè®¡ç®—è®¾å¤‡ï¼ˆCPUæˆ–GPUï¼‰ batch_size: æ‰¹å¤§å° splits: å°†ç”Ÿæˆçš„å›¾ç‰‡é›†åˆ†ä¸ºå‡ ä»½è®¡ç®—IS è¿”å›: (is_mean, is_std): ISçš„å‡å€¼å’Œæ ‡å‡†å·® \u0026#34;\u0026#34;\u0026#34; # åŠ è½½é¢„è®­ç»ƒçš„Inception v3æ¨¡å‹ï¼Œç”¨äºåˆ†ç±» inception = models.inception_v3(pretrained=True, transform_input=True).to(device) inception.eval() preds = [] # åˆ†æ‰¹æ¬¡è®¡ç®—é¢„æµ‹æ¦‚ç‡åˆ†å¸ƒ with torch.no_grad(): for i in range(0, len(images), batch_size): batch = images[i:i+batch_size].to(device) # Inception v3è¦æ±‚è¾“å…¥ä¸º299x299ï¼Œå¦‚æœ images å·²ç»æ˜¯æ­¤å¤§å°ä¸”å·²æ ‡å‡†åŒ–åˆ™æ— éœ€å†æ¬¡å¤„ç† logits = inception(batch) probs = F.softmax(logits, dim=1) preds.append(probs.cpu().numpy()) preds = np.concatenate(preds, axis=0) # (N, 1000) # è®¡ç®—IS N = preds.shape[0] split_scores = [] for k in range(splits): part = preds[k * (N // splits) : (k+1) * (N // splits), :] p_y = np.mean(part, axis=0) scores = [] for i in range(part.shape[0]): p_yx = part[i] scores.append(np.sum(p_yx * (np.log(p_yx + 1e-10) - np.log(p_y + 1e-10)))) split_scores.append(np.exp(np.mean(scores))) is_mean = np.mean(split_scores) is_std = np.std(split_scores) return is_mean, is_std import os from PIL import Image import torch import torchvision.transforms as transforms from torch.utils.data import DataLoader from torchvision import datasets import numpy as np device = torch.device(\u0026#34;cuda\u0026#34; if torch.cuda.is_available() else \u0026#34;cpu\u0026#34;) ####################### # æ•°æ®é¢„å¤„ç†Transform ####################### # Inception v3é¢„æœŸè¾“å…¥å°ºå¯¸ä¸º299x299ï¼Œä¸”é€šå¸¸ä½¿ç”¨æ ‡å‡†åŒ–åˆ°[-1,1] transform = transforms.Compose([ transforms.Resize((299, 299)), transforms.ToTensor(), transforms.Normalize([0.5,0.5,0.5],[0.5,0.5,0.5]) ]) ####################### # åŠ è½½ç”Ÿæˆçš„å›¾åƒ (fake_images) ####################### def load_fake_images_from_folder(folder, transform): images = [] for filename in os.listdir(folder): if filename.lower().endswith((\u0026#39;png\u0026#39;,\u0026#39;jpg\u0026#39;,\u0026#39;jpeg\u0026#39;)): img_path = os.path.join(folder, filename) img = Image.open(img_path).convert(\u0026#39;RGB\u0026#39;) img = transform(img) images.append(img) # å°†æ‰€æœ‰å›¾åƒåˆå¹¶ä¸ºä¸€ä¸ªTensor: (N, C, H, W) if len(images) \u0026gt; 0: images = torch.stack(images, dim=0) else: images = torch.empty(0) # å¦‚æœæ²¡æœ‰å›¾åƒåˆ™è¿”å›ç©ºtensor return images fake_folder = \u0026#34;/openbayes/home/miyan/works/Diffusion-Model-0-1/output/samples\u0026#34; fake_images = load_fake_images_from_folder(fake_folder, transform) # (N,3,299,299) is_mean, is_std = calculate_inception_score(fake_images, device) print(\u0026#34;IS:\u0026#34;, is_mean, is_std) FIDè¯„ä¼° ä½¿ç”¨ä»¥ä¸‹ä»£ç è¿›è¡ŒFIDæŒ‡æ ‡çš„æµ‹é‡ï¼š\ndef calculate_frechet_distance(mu1, sigma1, mu2, sigma2): \u0026#34;\u0026#34;\u0026#34; è®¡ç®—FrÃ©chet Inception Distanceæ‰€éœ€çš„FrÃ©chetè·ç¦»ã€‚ å‚æ•°: mu1, sigma1: å®é™…æ•°æ®ç‰¹å¾å‡å€¼å’Œåæ–¹å·®çŸ©é˜µ mu2, sigma2: ç”Ÿæˆæ•°æ®ç‰¹å¾å‡å€¼å’Œåæ–¹å·®çŸ©é˜µ è¿”å›: fid: FIDåˆ†æ•° \u0026#34;\u0026#34;\u0026#34; diff = mu1 - mu2 diff_sq = diff.dot(diff) # è®¡ç®—çŸ©é˜µçš„å¯¹ç§°çŸ©é˜µå¹³æ–¹æ ¹ covmean, _ = sqrtm(sigma1.dot(sigma2), disp=False) if np.iscomplexobj(covmean): covmean = covmean.real fid = diff_sq + np.trace(sigma1 + sigma2 - 2 * covmean) return fid def calculate_fid(real_features, fake_features): \u0026#34;\u0026#34;\u0026#34; è®¡ç®— Frechet Inception Distance (FID)ã€‚ å‚æ•°: real_features: np.ndarray, shape (N, 2048)ï¼ŒçœŸå®å›¾åƒç‰¹å¾ fake_features: np.ndarray, shape (M, 2048)ï¼Œç”Ÿæˆå›¾åƒç‰¹å¾ è¿”å›: fid: FIDåˆ†æ•°ï¼ˆè¶Šä½è¶Šå¥½ï¼‰ \u0026#34;\u0026#34;\u0026#34; mu_real = np.mean(real_features, axis=0) sigma_real = np.cov(real_features, rowvar=False) mu_fake = np.mean(fake_features, axis=0) sigma_fake = np.cov(fake_features, rowvar=False) fid = calculate_frechet_distance(mu_real, sigma_real, mu_fake, sigma_fake) return fid transform_img = transforms.Compose([ transforms.Resize((299, 299)), transforms.ToTensor(), transforms.Normalize([0.5,0.5,0.5],[0.5,0.5,0.5]) ]) dataset = load_dataset(\u0026#34;huggan/smithsonian_butterflies_subset\u0026#34;, split=\u0026#34;train\u0026#34;) def transform(examples): images = [transform_img(image.convert(\u0026#34;RGB\u0026#34;)) for image in examples[\u0026#34;image\u0026#34;]] return {\u0026#34;img\u0026#34;: images} dataset.set_transform(transform) real_loader = DataLoader(dataset, batch_size=32, shuffle=False) inception = models.inception_v3(pretrained=True, transform_input=True).to(device) inception.eval() # è®¡ç®—FIDéœ€è¦real_featureså’Œfake_featuresï¼ˆéœ€è¦å…ˆæå–ç‰¹å¾ï¼‰ # å¯é€šè¿‡è¿­ä»£real_loaderå¯¹çœŸå®æ•°æ®æå–ç‰¹å¾ï¼š real_features_list = [] with torch.no_grad(): for batch in real_loader: imgs = batch[\u0026#34;img\u0026#34;] imgs = imgs.to(device) feats = inception(imgs) real_features_list.append(feats.cpu().numpy()) real_features = np.concatenate(real_features_list, axis=0) # å¯¹ fake_images åŒæ ·æå–ç‰¹å¾ fake_features = [] with torch.no_grad(): for i in range(0, len(fake_images), 32): batch = fake_images[i:i+32].to(device) feats = inception(batch) fake_features.append(feats.cpu().numpy()) fake_features = np.concatenate(fake_features, axis=0) fid_score = calculate_fid(real_features, fake_features) print(\u0026#34;FID:\u0026#34;, fid_score) æœ€ç»ˆç»æµ‹é‡å¾—å‡ºçš„ISå’ŒFIDæŒ‡æ ‡å¦‚ä¸‹ï¼š\nIS (mean Â± std) FID 2.369Â±0.231 606.887 è°ƒæ•´è¶…å‚æ•°ä»¥æå‡å›¾åƒè´¨é‡ è¶…å‚æ•° æ‰©æ•£æ¨¡å‹çš„è¶…å‚æ•°è§è®­ç»ƒé…ç½®ï¼š\nclass TrainingConfig: image_size = 128 train_batch_size = 32 eval_batch_size = 8 # how many images to sample during evaluation num_epochs = 100 gradient_accumulation_steps = 1 learning_rate = 1e-4 lr_warmup_steps = 1000 save_image_epochs = 10 save_model_epochs = 500 mixed_precision = \u0026#34;fp16\u0026#34; # `no` for float32, `fp16` for automatic mixed precision output_dir = \u0026#34;output\u0026#34; # the model name locally and on the HF Hub seed = 42 device = \u0026#34;cuda\u0026#34; image_sizeï¼šå›¾åƒçš„åˆ†è¾¨ç‡ï¼Œè¾ƒå°å›¾åƒå°ºå¯¸å¯ä»¥åŠ å¿«è®­ç»ƒé€Ÿåº¦ï¼Œä½†æ— æ³•æ•è·å¤æ‚ç»†èŠ‚ï¼›è¾ƒå¤§å›¾åƒå°ºå¯¸èƒ½æå‡å›¾åƒè´¨é‡ï¼Œä½†æ˜¯ä¼šå¢åŠ è®¡ç®—è´Ÿæ‹…ã€‚ train_batch_sizeï¼šä¸€æ¬¡è¿­ä»£ä¸­ç”¨äºè®­ç»ƒçš„æ ·æœ¬æ•°ï¼Œè¾ƒå¤§çš„æ‰¹é‡å¤§å°èƒ½æå‡æ¨¡å‹ç¨³å®šæ€§ï¼Œå‡å°‘ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„æ¢¯åº¦éœ‡è¡ã€‚ eval_batch_sizeï¼šè¯„ä¼°é˜¶æ®µç”Ÿæˆå›¾åƒçš„æ•°é‡ï¼Œå¯¹è®­ç»ƒè¿‡ç¨‹æ²¡æœ‰å½±å“ã€‚ num_epochsï¼šè®­ç»ƒæ•°æ®çš„å®Œæ•´è®­ç»ƒè½®æ•°ã€‚ gradient_accumulation_stepsï¼šæ¢¯åº¦ç´¯è®¡æ­¥æ•°ï¼Œå¢å¤§æ­¤å€¼èƒ½å¤Ÿå®ç°æ›´å¤§çš„ç­‰æ•ˆæ‰¹é‡å¤§å°ï¼Œä»è€Œæå‡è®­ç»ƒçš„ç¨³å®šæ€§å’Œå›¾åƒè´¨é‡ã€‚ learning_rateï¼šæ§åˆ¶æ¨¡å‹å‚æ•°çš„æ›´æ–°æ­¥å¹…ã€‚ lr_warmup_stepsï¼šåœ¨åˆå§‹é˜¶æ®µé€æ­¥æå‡å­¦ä¹ ç‡ï¼Œé¿å…å‚æ•°æ›´æ–°è¿‡å¿«ã€‚ è°ƒæ•´è¶…å‚æ•°é‡æ–°è®­ç»ƒ ç”±äºä¸€æ¬¡è®­ç»ƒæ—¶é—´è¿‡é•¿ï¼Œå°è¯•è¿›è¡ŒæŸäº›å‚æ•°çš„è°ƒæ•´ä»¥å°½é‡æå‡å›¾åƒè´¨é‡ã€‚\nå°†num_epochsæé«˜åˆ°100è½®ï¼Œå¢åŠ æ¨¡å‹å¯¹äºå›¾åƒä¿¡æ¯çš„å­¦ä¹ è½®æ•°ï¼›å°†lr_warmup_stepsæé«˜è‡³1000æ­¥ï¼Œå¢åŠ æ¨¡å‹é€‚åº”ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œé¿å…åˆæœŸæ¢¯åº¦ä¸‹é™ä¸ç¨³å®šçš„æƒ…å†µå‘ç”Ÿã€‚\nè®­ç»ƒè¿‡ç¨‹ä¸­æ¯10ä¸ªepochéªŒè¯ä¸€æ¬¡ï¼ŒéªŒè¯ç»“æœå¦‚ä¸‹ï¼š\nä½¿ç”¨ISå’ŒFIDæŒ‡æ ‡è¿›è¡Œè¯„ä¼° ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹ç”Ÿæˆ500å¼ å›¾åƒç”¨äºæŒ‡æ ‡è®¡ç®—ï¼ŒæŒ‡æ ‡ä»¥åŠæŒ‡æ ‡æå‡å¯¹æ¯”å¦‚ä¸‹ï¼š\nModel ISâ†‘ FIDâ†“ Epochs 50 + lr warmup steps 500 2.369Â±0.231 606.887 Epochs 100 + lr warmup steps 1000 2.237Â±0.217 380.933 ISå€¼æœ‰æ‰€ä¸‹é™ï¼Œè¿™æ˜¯ç”±äºè®­ç»ƒå›¾åƒè¿‡äºå•ä¸€å¯¼è‡´å›¾åƒå¤šæ ·æ€§ä¸è¶³ï¼›FIDå€¼ä¸‹é™æ˜æ˜¾ï¼Œè¯´æ˜ç”Ÿæˆå›¾åƒä¸è®­ç»ƒæ•°æ®åˆ†å¸ƒç›¸ä¼¼æ€§æé«˜ï¼Œå›¾åƒç»†èŠ‚å¢åŠ ã€‚\næ¡ä»¶ç”Ÿæˆ Conditioned Generation åœ¨ä½¿ç”¨å¸¦æœ‰æ¡ä»¶ä¿¡æ¯ï¼ˆå¦‚æ–‡æœ¬æè¿°ï¼‰çš„å›¾åƒè®­ç»ƒç”Ÿæˆæ¨¡å‹æ—¶ï¼Œé€šå¸¸ä¼šç”Ÿæˆä»¥ç±»æ ‡ç­¾æˆ–è€…ä¸€æ®µæè¿°æ€§æ–‡æœ¬ä¸ºæ¡ä»¶çš„æ ·æœ¬ã€‚ä¸»è¦æ–¹æ³•åŒ…æ‹¬åˆ†ç±»å™¨å¼•å¯¼çš„æ‰©æ•£ (Classifier Guided Diffusion) å’Œæ— åˆ†ç±»å™¨å¼•å¯¼çš„æ‰©æ•£ (Classifier-Free Guidance)ã€‚\nClassifier Guided Diffusion ä¸ºäº†å°†ç±»åˆ«ä¿¡æ¯æ˜ç¡®åœ°åŠ å…¥ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡åœ¨å«æœ‰å™ªå£°çš„å›¾åƒ$x_t$ä¸Šè®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨$p_\\phi(y | \\mathbf{x}_t)$ å¹¶ä¸”ä½¿ç”¨æ¢¯åº¦ $\\nabla_{\\mathbf{x}_t} \\log p_\\phi(y | \\mathbf{x}_t)$å¼•å¯¼é‡‡æ ·è¿‡ç¨‹æœå‘è°ƒèŠ‚ä¿¡æ¯yï¼ˆå¦‚æ ‡ç­¾ä¿¡æ¯æˆ–æè¿°æ–‡æœ¬ï¼‰æ–¹å‘é¢„æµ‹å™ªå£°ã€‚ æ— æ¡ä»¶çš„å™ªå£°é¢„æµ‹å™¨ä½¿ç”¨ä»¥ä¸‹å…¬å¼è¿›è¡Œå™ªå£°çš„é¢„æµ‹å’Œå»å™ªè¿‡ç¨‹ï¼š\n$$ \\mathbf{x}_{t-1} = \\frac{1}{\\sqrt{\\alpha_t}} \\left( \\mathbf{x}_t - \\frac{1 - \\alpha_t}{\\sqrt{1 - \\bar{\\alpha}_t}} \\epsilon_\\theta(\\mathbf{x}_t, t) \\right) + \\sigma_t \\mathbf{z}, $$ å…¶ä¸­ï¼Œ$\\epsilon_\\theta(\\mathbf{x}_t, t)$æ˜¯æ— æ¡ä»¶çš„å™ªå£°é¢„æµ‹å™¨ã€‚ åˆ†ç±»å™¨å¼•å¯¼çš„æ‰©æ•£æ¨¡å‹åå‘é‡‡æ ·å…¬å¼ä¸ºï¼š\n$$ \\mathbf{x}_{t-1} = \\frac{1}{\\sqrt{\\alpha_t}} \\left( \\mathbf{x}_t - \\frac{1 - \\alpha_t}{\\sqrt{1 - \\bar{\\alpha}_t}} \\epsilon_\\theta^{\\text{guided}}(\\mathbf{x}_t, t, y) \\right) + \\sigma_t \\mathbf{z}. $$ å¯¹äºæ¡ä»¶å¼•å¯¼çš„å™ªå£°é¢„æµ‹å™¨ä¸æ— æ¡ä»¶å™ªå£°é¢„æµ‹å™¨çš„å…³ç³»ï¼Œæœ‰ï¼š $$ \\epsilon_\\theta^{\\text{guided}}(\\mathbf{x}_t, t, y) = \\epsilon_\\theta(\\mathbf{x}_t, t) - w \\cdot \\sqrt{1 - \\bar{\\alpha}_t} \\cdot \\nabla_{\\mathbf{x}_t} \\log p_\\phi(y | \\mathbf{x}_t), $$ å…¶ä¸­ï¼Œ$\\epsilon_\\theta(\\mathbf{x}_t, t)$ æ˜¯æ— æ¡ä»¶å™ªå£°é¢„æµ‹å™¨ï¼Œ$\\nabla_{\\mathbf{x}_t} \\log p_\\phi(y | \\mathbf{x}_t)$ æ˜¯åˆ†ç±»å™¨å¯¹ç±»åˆ« $y$ çš„æ¢¯åº¦ï¼Œ$w$æ˜¯åˆ†ç±»å™¨å¼•å¯¼å¼ºåº¦çš„è°ƒèŠ‚å‚æ•°ï¼Œ$\\sqrt{1 - \\bar{\\alpha}_t}$ ç”¨äºå°†æ¢¯åº¦é¡¹æ˜ å°„åˆ°å™ªå£°ç©ºé—´ã€‚ Classifier-Free Guidance æ²¡æœ‰ç‹¬ç«‹çš„åˆ†ç±»å™¨$p_\\phi(y | \\mathbf{x}_t)$ ï¼Œå¯ä»¥é€šè¿‡åˆå¹¶æ¡ä»¶å’Œéæ¡ä»¶å¼•å¯¼çš„æ‰©æ•£æ­¥éª¤æ¥å®ç°æ— åˆ†ç±»å™¨å¼•å¯¼çš„æ¡ä»¶æ‰©æ•£ã€‚ä¸ºäº†é¿å…è®­ç»ƒä¸€ä¸ªæ˜¾å¼çš„åˆ†ç±»å™¨ $p_\\theta(y | \\mathbf{x}_t)$ï¼ŒClassifier-Free Guidanceé€šè¿‡ç›´æ¥å­¦ä¹ ä¸¤ä¸ªå™ªå£°é¢„æµ‹å™¨æ¥å®ç°æ¡ä»¶ç”Ÿæˆã€‚ æ¡ä»¶å™ªå£°é¢„æµ‹å™¨$\\epsilon_\\theta(\\mathbf{x}_t, t, y)$ï¼šåŸºäºç›®æ ‡æ¡ä»¶ y çš„å™ªå£°é¢„æµ‹å™¨ã€‚ æ— æ¡ä»¶å™ªå£°é¢„æµ‹å™¨ $\\epsilon_\\theta(\\mathbf{x}_t, t)$ï¼šä¸ä¾èµ–ä»»ä½•æ¡ä»¶çš„å™ªå£°é¢„æµ‹å™¨ã€‚ é€šè¿‡çº¿æ€§ç»„åˆæ¡ä»¶å’Œæ— æ¡ä»¶å™ªå£°é¢„æµ‹å™¨ï¼Œå¯ä»¥æ„é€ å‡ºä¸€ç§å¢å¼ºæ¡ä»¶ç”Ÿæˆæ•ˆæœçš„å™ªå£°é¢„æµ‹å™¨ï¼š\n$$ \\epsilon_\\theta^{\\text{guided}}(\\mathbf{x}_t, t, y) = \\epsilon_\\theta(\\mathbf{x}_t, t) + w \\cdot \\left(\\epsilon_\\theta(\\mathbf{x}_t, t, y) - \\epsilon_\\theta(\\mathbf{x}_t, t)\\right), $$ å…¶ä¸­ï¼š$w \\geq 1$ æ˜¯å¼•å¯¼å¼ºåº¦ï¼ˆé€šå¸¸ç§°ä¸ºâ€œæ”¾å¤§ç³»æ•°â€ï¼‰ï¼Œ$\\epsilon_\\theta(\\mathbf{x}_t, t, y) - \\epsilon_\\theta(\\mathbf{x}_t, t)$ è¡¨ç¤ºæ¡ä»¶ä¿¡æ¯å¯¹å™ªå£°é¢„æµ‹çš„å¢é‡ã€‚ åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ— æ¡ä»¶å’Œæ¡ä»¶å™ªå£°é¢„æµ‹å™¨é€šè¿‡å•ä¸ªç¥ç»ç½‘ç»œè¿›è¡Œå­¦ä¹ ï¼Œå…¶ä¸­æ¡ä»¶ä¿¡æ¯$y$è¢«å®šæœŸä¸¢å¼ƒï¼Œä»¥ä¾¿æ¨¡å‹çŸ¥é“å¦‚ä½•æ— æ¡ä»¶çš„ç”Ÿæˆå›¾åƒï¼Œå³\n$$ \\epsilon_\\theta(\\mathbf{x}_t, t)= \\epsilon_\\theta(\\mathbf{x}_t, t, \\tilde{y}) \\\\ \\tilde{y} = \\begin{cases} y, \u0026 \\text{with probability } 1 - p_\\text{drop}, \\\\ \\varnothing, \u0026 \\text{with probability } p_\\text{drop}. \\end{cases} $$ æ½œåœ¨æ‰©æ•£æ¨¡å‹ (Latent Diffusion Model) æ½œåœ¨æ‰©æ•£æ¨¡å‹é€šè¿‡åœ¨æ½œç©ºé—´è€Œä¸æ˜¯åƒç´ ç©ºé—´è¿è¡Œæ‰©æ•£è¿‡ç¨‹ï¼Œä»è€Œé™ä½è®­ç»ƒæˆæœ¬å¹¶åŠ å¿«æ¨ç†é€Ÿåº¦ã€‚æ¨¡å‹å‘ç°çš„åŠ¨æœºæ˜¯è§‚å¯Ÿåˆ°å›¾åƒçš„å¤§å¤šæ•°ä½ç½®å¯¹æ„ŸçŸ¥ç»†èŠ‚éƒ½æœ‰ç€å¸®åŠ©ï¼Œè€Œä¸”è¯­ä¹‰å’Œæ¦‚å¿µä¿¡æ¯ç»è¿‡å‹ç¼©åä¾ç„¶å­˜åœ¨ã€‚LDMé€šè¿‡ä½¿ç”¨è‡ªåŠ¨ç¼–ç å™¨å°†ä¿¡æ¯ç¼–ç åˆ°æ½œåœ¨ç©ºé—´ï¼Œç„¶ååœ¨æ½œåœ¨æ‰©æ•£è¿‡ç¨‹ä¸­ç”Ÿæˆè¯­ä¹‰æ¦‚å¿µã€‚\né¦–å…ˆï¼Œç»™å®šé«˜ç»´æ•°æ®$x_0$ï¼ˆå¦‚å›¾åƒï¼‰ï¼Œé€šè¿‡ä¸€ä¸ªé¢„è®­ç»ƒçš„è‡ªåŠ¨ç¼–ç å™¨å°†å…¶æ˜ å°„åˆ°æ½œåœ¨ç©ºé—´ï¼š\n$$ \\mathbf{z}_0 = E(\\mathbf{x}_0), $$ æ‰©æ•£å’Œå»å™ªè¿‡ç¨‹éƒ½å‘ç”Ÿåœ¨æ½œåœ¨ç©ºé—´ä¸­ï¼Œå»å™ªæ¨¡å‹å¢åŠ äº†äº¤å‰æ³¨æ„åŠ›æœºåˆ¶ï¼Œç”¨äºå¤„ç†ç”¨äºå›¾åƒç”Ÿæˆçš„çµæ´»æ¡ä»¶ä¿¡æ¯ï¼ˆå¦‚ç±»æ ‡ç­¾ã€è¯­ä¹‰ä¿¡æ¯ç­‰ï¼‰ã€‚è¯¥è®¾è®¡ç›¸å½“äºä½¿ç”¨äº¤å‰æ³¨æ„åŠ›æœºåˆ¶å°†ä¸åŒæ¨¡æ€çš„ä¿¡æ¯è¡¨ç¤ºèåˆåˆ°æ¨¡å‹ä¸­ã€‚æ¯ç§ä¿¡æ¯éƒ½ä¸ç‰¹å®šçš„ç¼–ç å™¨ $\\tau_\\theta$é…å¯¹ï¼Œå¯¹äºæ¡ä»¶è¾“å…¥$y$ï¼Œæ½œç©ºé—´ä¸­çš„æ¡ä»¶ä¸º$\\tau_\\theta(y)$ï¼š $$ \\mathbf{Attention} = \\text{softmax}\\left(\\frac{\\mathbf{Q}\\mathbf{K}^\\top}{\\sqrt{d_k}}\\right)\\mathbf{V}, \\\\ where \\ \\mathbf{Q}=\\mathbf{W_Q}\\varphi(z), \\mathbf{K}=\\mathbf{W_K}\\tau_\\theta(y), \\mathbf{V}=\\mathbf{W_V}\\tau_\\theta(y) $$ Latent Diffusion Model çš„ç»“æ„ï¼Œå›¾å¼•è‡ªHigh-Resolution Image Synthesis with Latent Diffusion Models ä½¿ç”¨ç¨³å®šæ‰©æ•£æ¨¡å‹è¿›è¡Œæ¡ä»¶ç”Ÿæˆ è®­ç»ƒå‚æ•° ç”±äºé‡æ–°è®­ç»ƒä¸€ä¸ªå¤§è§„æ¨¡çš„ç¨³å®šæ‰©æ•£æ¨¡å‹éå¸¸å›°éš¾ï¼Œå› æ­¤ä½¿ç”¨å›¾åƒ-æ–‡æœ¬å¯¹æ•°æ®é›†å¯¹é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œæ¥æµ‹è¯•æ¨¡å‹çš„ç”Ÿæˆæ•ˆæœã€‚åœ¨stable-diffusion-v1-4çš„é¢„è®­ç»ƒæƒé‡ä¸Šè¿›è¡Œè®­ç»ƒï¼Œé‡‡ç”¨lambdalabs/naruto-blip-captionsï¼ˆã€Šç«å½±å¿è€…ã€‹ä¸­å„ä¸ªè§’è‰²çš„å›¾åƒ-æ–‡æœ¬å¯¹ï¼‰æ•°æ®é›†è¿›è¡Œè®­ç»ƒã€‚\nè®­ç»ƒå‚æ•°çš„è®¾ç½®å¦‚ä¸‹ï¼š\nexport MODEL_NAME=\u0026#34;CompVis/stable-diffusion-v1-4\u0026#34; export dataset_name=\u0026#34;lambdalabs/naruto-blip-captions\u0026#34; accelerate launch --mixed_precision=\u0026#34;fp16\u0026#34; train_text_to_image.py \\ --pretrained_model_name_or_path=$MODEL_NAME \\ --dataset_name=$dataset_name \\ --use_ema \\ --resolution=512 --center_crop --random_flip \\ --train_batch_size=1 \\ --gradient_accumulation_steps=4 \\ --gradient_checkpointing \\ --checkpointing_steps=5000 \\ --max_train_steps=15000 \\ --learning_rate=1e-05 \\ --max_grad_norm=1 \\ --enable_xformers_memory_efficient_attention \\ --lr_scheduler=\u0026#34;constant\u0026#34; --lr_warmup_steps=0 \\ --output_dir=\u0026#34;sd-naruto-model\u0026#34; å…¶ä¸­ä¸€äº›é‡è¦çš„å‚æ•°æœ‰ï¼š\n--pretrain_model_name_or_pathï¼šHubä¸Šçš„æ¨¡å‹åç§°æˆ–é¢„è®­ç»ƒæ¨¡å‹çš„æœ¬åœ°è·¯å¾„ --dataset_nameï¼šHubä¸Šçš„æ•°æ®é›†åç§°æˆ–æœ¬åœ°æ•°æ®é›†è·¯å¾„ --output_dirï¼šè®­ç»ƒæ¨¡å‹çš„ä¿å­˜ä½ç½® è®¾ç½®Stable Diffusionçš„å„ç§ç»„æˆç»“æ„ ç”±äºéœ€è¦ä½¿ç”¨æ–‡æœ¬ä½œä¸ºæ¡ä»¶è¿›è¡Œç”Ÿæˆï¼Œå› æ­¤éœ€è¦tokenizerå’Œtext encoderï¼Œå°†æ–‡æœ¬tokenizeä¸ºä¸€äº›tokensï¼Œå†å°†tokensç»è¿‡text encoderå˜ä¸º768ç»´çš„embeddingsã€‚\ntokenizerã€noise_schedulerã€text_encoderã€vaeå’ŒU-Netçš„å¯¼å…¥å¦‚ä¸‹ï¼š\n# Load scheduler, tokenizer and models. noise_scheduler = DDPMScheduler.from_pretrained(args.pretrained_model_name_or_path, subfolder=\u0026#34;scheduler\u0026#34;) tokenizer = CLIPTokenizer.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;tokenizer\u0026#34;, revision=args.revision ) # Load text encoder and vae with ContextManagers(deepspeed_zero_init_disabled_context_manager()): text_encoder = CLIPTextModel.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;text_encoder\u0026#34;, revision=args.revision, variant=args.variant ) vae = AutoencoderKL.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;vae\u0026#34;, revision=args.revision, variant=args.variant ) # Load U-Net unet = UNet2DConditionModel.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;unet\u0026#34;, revision=args.non_ema_revision ) è®­ç»ƒè¿‡ç¨‹åªè°ƒæ•´U-Netçš„æƒé‡ï¼Œå†»ç»“vaeå’Œtext encoderçš„æƒé‡ã€‚\nvae.requires_grad_(False) text_encoder.requires_grad_(False) unet.train() å®šä¹‰ä¼˜åŒ–å™¨ç”¨äºä¼˜åŒ–U-Netçš„æƒé‡ï¼š\noptimizer = optimizer_cls( unet.parameters(), lr=args.learning_rate, betas=(args.adam_beta1, args.adam_beta2), weight_decay=args.adam_weight_decay, eps=args.adam_epsilon, ) è®­ç»ƒè¿‡ç¨‹ä¸DDPMéƒ¨åˆ†æµç¨‹ä¸€è‡´ï¼ŒåŠ å…¥äº†å°†å›¾åƒç¼–ç åˆ°æ½œåœ¨ç©ºé—´ä»¥åŠå°†æ–‡æœ¬tokensç¼–ç ä¸ºembeddingsçš„è¿‡ç¨‹ï¼Œå…¶ä»£ç å®ç°å¦‚ä¸‹ï¼š\n# Convert images to latent space latents =vae.encode(batch[\u0026#34;pixel_values\u0026#34;].to(weight_dtype)).latent_dist.sample() latents = latents * vae.config.scaling_factor # Get the text embedding for conditioning encoder_hidden_states = text_encoder(batch[\u0026#34;input_ids\u0026#34;], return_dict=False)[0] æŸå¤±å‡½æ•°å¦‚ä¸‹ï¼š\n# Predict the noise residual and compute loss model_pred = unet(noisy_latents, timesteps, encoder_hidden_states, return_dict=False)[0] # Loss loss = F.mse_loss(model_pred.float(), target.float(), reduction=\u0026#34;mean\u0026#34;) å¯ä»¥çœ‹åˆ°ï¼Œå™ªå£°é¢„æµ‹çš„è¿‡ç¨‹ä¸­éœ€è¦è¾“å…¥å«æœ‰å™ªå£°çš„å›¾åƒã€æ—¶é—´æ­¥ä»¥åŠç”Ÿæˆæ¡ä»¶ï¼ˆæ–‡æœ¬ç¼–ç çš„embeddingsï¼‰ã€‚\nå®Œæ•´ä»£ç ä½äºGithubä»“åº“ã€‚ä½¿ç”¨bash train.shå¯åŠ¨è®­ç»ƒã€‚\nè®­ç»ƒä¸æ¨ç†ç»“æœ åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åŠ å…¥Validationï¼Œå¯ä»¥çœ‹åˆ°åœ¨å›¾åƒ-æ–‡æœ¬å¯¹æ•°æ®çš„è®­ç»ƒä¸‹ï¼Œç”Ÿæˆå›¾åƒçš„ç»“æœå‘ç€æ¡ä»¶åç§»ï¼Œå¦‚ä¸‹å›¾ä¸­ä»¥Yodaå’Œdogä¸ºpromptç”Ÿæˆçš„å›¾åƒã€‚\nè®­ç»ƒå®Œæ¯•åï¼Œç»è¿‡æ¨ç†èƒ½å¤Ÿç”Ÿæˆä¸€äº›å…·æœ‰ã€Šç«å½±å¿è€…ã€‹ç”»é¢ç‰¹å¾çš„å›¾åƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nä»æ¨ç†ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼ŒU-Netç»è¿‡Fine-tuneä¹‹åï¼Œèƒ½å¤Ÿå°†é¢„æµ‹å™ªå£°å’Œå»å™ªè¿‡ç¨‹å‘ç€æ¡ä»¶ï¼ˆã€Šç«å½±å¿è€…ã€‹ç”»é¢å…ƒç´ å’Œç”»é£ï¼‰çš„æ–¹å‘è¿›è¡Œå¼•å¯¼ï¼Œå¹¶ä¸”ç”Ÿæˆè¿‡ç¨‹ä¸­å—åˆ°æ–‡æœ¬ä¿¡æ¯çš„å¼•å¯¼ã€‚\næ‰©æ•£æ¨¡å‹ä¸ªæ€§åŒ–ç”Ÿæˆçš„å¾®è°ƒæ–¹æ³• ä»€ä¹ˆæ˜¯ä¸ªæ€§åŒ– (Personalization) ? æ‰©æ•£æ¨¡å‹ï¼ˆDiffusion Modelsï¼‰å·²åœ¨å›¾åƒç”Ÿæˆã€æ–‡æœ¬ç”Ÿæˆç­‰ä»»åŠ¡ä¸­å±•ç°å‡ºå¼ºå¤§çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œå®é™…åº”ç”¨ä¸­ï¼Œä¸åŒç”¨æˆ·æˆ–åœºæ™¯å¯¹ç”Ÿæˆå†…å®¹çš„éœ€æ±‚å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œå½“å‰é€šç”¨ç”Ÿæˆæ¨¡å‹å¾€å¾€éš¾ä»¥æ»¡è¶³ä¸ªæ€§åŒ–éœ€æ±‚ã€‚å› æ­¤ï¼Œå¦‚ä½•åœ¨ä¿è¯åŸºç¡€æ¨¡å‹é€šç”¨æ€§çš„åŒæ—¶ï¼Œé€šè¿‡è½»é‡åŒ–çš„å¾®è°ƒæ–¹å¼å¿«é€Ÿé€‚åº”ä¸ªæ€§åŒ–éœ€æ±‚æˆä¸ºä¸€ä¸ªé‡è¦è¯¾é¢˜ã€‚\nå…·ä½“é—®é¢˜åŒ…æ‹¬ï¼š\nä¸ªæ€§åŒ–æ•°æ®çš„ç¨€ç¼ºæ€§ï¼šç”¨æˆ·æä¾›çš„ä¸ªæ€§åŒ–æ•°æ®é€šå¸¸è¾ƒå°‘ï¼Œç›´æ¥è®­ç»ƒå¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆæˆ–æ•°æ®ä¸è¶³çš„é—®é¢˜ã€‚ è®¡ç®—æˆæœ¬ï¼šå®Œå…¨é‡æ–°è®­ç»ƒæ‰©æ•£æ¨¡å‹éœ€è¦å¤§é‡è®¡ç®—èµ„æºï¼Œå¦‚ä½•é€šè¿‡å¾®è°ƒå‡å°‘èµ„æºéœ€æ±‚æ˜¯å…³é”®ã€‚ ç”Ÿæˆè´¨é‡ï¼šå¾®è°ƒåçš„æ¨¡å‹éœ€å¹³è¡¡ä¸ªæ€§åŒ–ç‰¹å¾å’ŒåŸºç¡€æ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›ï¼Œé¿å…è´¨é‡ä¸‹é™æˆ–ç”Ÿæˆå†…å®¹å•ä¸€ã€‚ DreamBooth æ ¸å¿ƒæ–¹æ³•ï¼šåŸºäºç‰¹å®šç”¨æˆ·çš„å›¾åƒï¼Œå¾®è°ƒæ‰©æ•£æ¨¡å‹ä»¥ç”ŸæˆåŒ…å«æŒ‡å®šä¸ªæ€§åŒ–ç‰¹å¾çš„è¾“å‡ºã€‚ ç‰¹ç‚¹ï¼š ä½¿ç”¨æå°‘é‡çš„ä¸ªæ€§åŒ–æ•°æ®ï¼ˆä¾‹å¦‚å‡ å¼ å¸¦æœ‰æŸä¸ªå¯¹è±¡çš„å›¾ç‰‡ï¼‰ã€‚ é€šè¿‡åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­æ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è®°ï¼ˆ\u0026quot;[V]\u0026quot;ï¼‰æ¥å…³è”ç”¨æˆ·æä¾›çš„ç‰¹å¾ã€‚ å¾®è°ƒæ‰€æœ‰æ¨¡å‹å‚æ•°ï¼ŒåŒæ—¶ä¿ç•™æ¨¡å‹å¯¹äºé€šç”¨ä»»åŠ¡çš„ç”Ÿæˆèƒ½åŠ›ã€‚ ä¼˜ç‚¹ï¼šé€‚åˆç”Ÿæˆé«˜åº¦ä¸€è‡´çš„ä¸ªæ€§åŒ–å†…å®¹ã€‚ å±€é™ï¼šå¾®è°ƒå…¨å‚æ•°æ¨¡å‹ï¼Œè®¡ç®—èµ„æºéœ€æ±‚è¾ƒé«˜ã€‚ DreamBoothçš„è®­ç»ƒæ¶æ„ DreamTuner æ ¸å¿ƒæ–¹æ³•ï¼šæ”¹è¿›äº†DreamBoothçš„ç»“æ„ï¼Œå¢åŠ ä¸»é¢˜ç¼–ç å™¨å’Œä¸»é¢˜è‡ªæ³¨æ„åŠ›æ¥ä»ç²—åˆ°ç»†åœ°è¿›è¡Œä¸»é¢˜èº«ä»½çš„ä¿ç•™ã€‚ ç‰¹ç‚¹ï¼š ä»…éœ€å•å¼ å›¾åƒå°±å¯ä»¥è¿›è¡Œä¸ªæ€§åŒ–å¾®è°ƒ å¯ä»¥ä¸ControlNetç›¸ç»“åˆè¿›è¡Œæ¡ä»¶ç”Ÿæˆ ä¼˜ç‚¹ï¼šä¸DreamBoothç›¸æ¯”ï¼Œå¤§å¹…é™ä½äº†è®¡ç®—èµ„æºéœ€æ±‚ã€‚ å±€é™ï¼šæ¨¡å‹ç»“æ„è¾ƒDreamBoothæ›´ä¸ºå¤æ‚ã€‚ DreamTunerçš„è®­ç»ƒè¿‡ç¨‹ï¼Œå›¾å¼•è‡ª DreamTuner: Single Image is Enough for Subject Driven Generation Textual Inversion æ ¸å¿ƒæ–¹æ³•ï¼šé€šè¿‡å­¦ä¹ ä¸€ä¸ªç‰¹å®šçš„æ–‡æœ¬åµŒå…¥ï¼ˆembeddingï¼‰ï¼Œå°†ä¸ªæ€§åŒ–ç‰¹å¾æ˜ å°„åˆ°æ¨¡å‹çš„æ½œåœ¨ç©ºé—´ã€‚ ç‰¹ç‚¹ï¼š ä¸è°ƒæ•´æ¨¡å‹å‚æ•°ï¼Œè€Œæ˜¯å­¦ä¹ ä¸€ä¸ªæ–°çš„ç‰¹å®šTokenï¼Œå¹¶å°†å…¶ä¸æä¾›çš„ä¸ªæ€§åŒ–æ•°æ®è¿›è¡ŒåŒ¹é…ã€‚ ç”Ÿæˆæ—¶åœ¨æ–‡æœ¬æç¤ºï¼ˆPromptï¼‰ä¸­åŠ å…¥è¯¥Tokenï¼Œæ§åˆ¶ç”Ÿæˆç»“æœã€‚ ä¼˜ç‚¹ï¼š é«˜æ•ˆï¼Œæ— éœ€å¯¹æ¨¡å‹è¿›è¡Œæƒé‡è°ƒæ•´ã€‚ é€‚åˆå¤„ç†å°è§„æ¨¡çš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚ å±€é™ï¼šå¯¹è¾“å…¥ç‰¹å¾çš„æ³›åŒ–èƒ½åŠ›æœ‰é™ï¼Œå¤æ‚éœ€æ±‚å¯èƒ½éš¾ä»¥æ»¡è¶³ã€‚ Textual Inversionçš„å·¥ä½œåŸç†ï¼Œå›¾å¼•è‡ª An Image is Worth One Word: Personalizing Text-to-Image Generation using Textual Inversion Custom Diffusion æ ¸å¿ƒæ–¹æ³•ï¼šå±€éƒ¨å‚æ•°å¾®è°ƒæŠ€æœ¯ï¼Œåªå¾®è°ƒæ‰©æ•£æ¨¡å‹çš„U-Netä¸­çš„å‚æ•°ã€‚ ç‰¹ç‚¹ï¼š é€šè¿‡å±€éƒ¨å‚æ•°æ›´æ–°ï¼Œä»…å¯¹ç”Ÿæˆç‰¹å¾é«˜åº¦ç›¸å…³çš„ç½‘ç»œå±‚è¿›è¡Œè°ƒæ•´ã€‚ æä¾›æ›´é«˜çš„æ§åˆ¶èƒ½åŠ›ï¼Œç”¨äºç”Ÿæˆç‰¹å®šé£æ ¼æˆ–å¯¹è±¡ã€‚ èƒ½å¤Ÿè¿›è¡Œå¤šä¸ªä¸»é¢˜ç‰¹å¾çš„ä¸ªæ€§åŒ–ç”Ÿæˆ ä¼˜ç‚¹ï¼šç›¸æ¯”å…¨å‚æ•°å¾®è°ƒï¼Œæ•ˆç‡æ›´é«˜ã€‚ å±€é™ï¼šæ›´å¤šæ¦‚å¿µçš„ç»„åˆç”Ÿæˆå­˜åœ¨é—®é¢˜ã€‚ Custom Diffusionçš„ç»“æ„å’Œå¾®è°ƒåŸç†ï¼Œå›¾å¼•è‡ª Multi-Concept Customization of Text-to-Image Diffusion LoRA (Low-Rank Adaptation) æ ¸å¿ƒæ–¹æ³•ï¼šåœ¨æ¨¡å‹çš„æƒé‡çŸ©é˜µä¸­å¼•å…¥ä½ç§©åˆ†è§£ï¼Œå¹¶åªè®­ç»ƒæ–°å¢çš„ä½ç§©çŸ©é˜µã€‚ ç‰¹ç‚¹ï¼š ä¿æŒåŸæ¨¡å‹çš„æƒé‡å†»ç»“ï¼Œå‡å°‘è®­ç»ƒå‚æ•°è§„æ¨¡ã€‚ é€šè¿‡æ·»åŠ ä½ç§©è°ƒæ•´é¡¹ï¼Œæé«˜æ¨¡å‹å¯¹ä¸ªæ€§åŒ–éœ€æ±‚çš„é€‚åº”æ€§ã€‚ ä¼˜ç‚¹ï¼š æå¤§é™ä½è®­ç»ƒæˆæœ¬å’Œæ˜¾å­˜éœ€æ±‚ã€‚ æ˜“äºä¸é¢„è®­ç»ƒæ¨¡å‹å…¼å®¹ã€‚ å±€é™ï¼šå¯¹é«˜åº¦å¤æ‚çš„ä¸ªæ€§åŒ–ç”Ÿæˆéœ€æ±‚æ”¯æŒå¯èƒ½ä¸è¶³ã€‚ IP Adapter æ ¸å¿ƒæ–¹æ³•ï¼šä½¿ç”¨å…·æœ‰è§£è€¦äº¤å‰æ³¨æ„åŠ›æœºåˆ¶çš„é€‚é…æ¨¡å—ï¼Œå°†å›¾åƒç‰¹å¾åµŒå…¥é¢„è®­ç»ƒæ‰©æ•£æ¨¡å‹ä¸­ã€‚ ç‰¹ç‚¹ï¼š æ¨¡å—åŒ–è®¾è®¡ï¼Œåœ¨ä¸æ”¹å˜ä¸»å¹²æ¨¡å‹çš„åŸºç¡€ä¸Šå®ç°ä¸ªæ€§åŒ–ç”Ÿæˆã€‚ é€‚é…å™¨æ¨¡å—çš„å‚æ•°è§„æ¨¡å°ã€è®­ç»ƒå¼€é”€ä½ã€‚ ä¼˜ç‚¹ï¼šå¯æ¨å¹¿è‡³å…¶ä»–è‡ªå®šä¹‰æ¨¡å‹ä»¥åŠç»“æ„æ§åˆ¶æ¨¡å‹ã€‚ å±€é™ï¼šé€‚é…å™¨è®¾è®¡çš„å¤æ‚æ€§å¯èƒ½å½±å“æœ€ç»ˆç”Ÿæˆè´¨é‡ã€‚ IP Adapterçš„ç»“æ„ï¼Œå›¾å¼•è‡ª IP-Adapter: Text Compatible Image Prompt Adapter for Text-to-Image Diffusion Models æ€»ç»“ æ‰©æ•£æ¨¡å‹ä½œä¸ºç”Ÿæˆæ¨¡å‹çš„ä¸€ç§ï¼Œé€šè¿‡æ­£å‘å’Œåå‘çš„æ‰©æ•£è¿‡ç¨‹ï¼Œå®ç°äº†å™ªå£°é¢„æµ‹å’Œå»å™ªï¼Œè¿›è€Œå®ç°äº†ä»å™ªå£°ä¸­ç”Ÿæˆå›¾åƒçš„åŠŸèƒ½ã€‚æ¡ä»¶æ‰©æ•£æ¨¡å‹é€šè¿‡å°†æ¡ä»¶ä¿¡æ¯åŠ å…¥å™ªå£°é¢„æµ‹å™¨ä¸­ï¼Œä½¿å¾—å»å™ªè¿‡ç¨‹èƒ½å¤Ÿåœ¨æ¡ä»¶å¼•å¯¼ä¸‹è¿›è¡Œã€‚æ½œåœ¨æ‰©æ•£æ¨¡å‹é€šè¿‡å°†ä¿¡æ¯ç¼–ç åˆ°æ½œåœ¨ç©ºé—´ä»¥åŠåœ¨U-Netä¸­åŠ å…¥äº¤å‰æ³¨æ„åŠ›æœºåˆ¶ï¼Œå®ç°äº†æ¨¡æ€çš„å¯¹é½ä»¥åŠæ›´åŠ é«˜æ•ˆçš„æ‰©æ•£æ€§èƒ½ã€‚\nCitation æ–‡ç« éƒ¨åˆ†å†…å®¹æ¥è‡ª\nWeng, Lilian. (Jul 2021). What are diffusion models? Lilâ€™Log. https://lilianweng.github.io/posts/2021-07-11-diffusion-models/.\næ–‡ç« ä»£ç å¼€æºåœ¨\nhttps://github.com/M1YAN/Diffusion-Model-0-1\n","permalink":"https://m1yan.github.io/posts/diffusion-model/","summary":"\u003cblockquote\u003e\n\u003cp\u003eUpdate [2024.12.7]ï¼šå¢åŠ æ¡ä»¶ç”Ÿæˆä»¥åŠæ½œåœ¨æ‰©æ•£æ¨¡å‹çš„ä»‹ç»ã€‚\u003c/p\u003e\n\u003cp\u003eUpdate [2024.12.11]ï¼šå¢åŠ è¯„ä¼°æŒ‡æ ‡çš„å¯¹æ¯”ä»¥åŠè¶…å‚æ•°è°ƒæ•´ã€‚\u003c/p\u003e\n\u003cp\u003eUpdate [2024.12.12]ï¼šå¢åŠ å¯¹äºæ‰©æ•£æ¨¡å‹ä¸ªæ€§åŒ–ç”Ÿæˆå¾®è°ƒæ–¹æ³•çš„ä»‹ç»\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"ç”Ÿæˆæ¨¡å‹\"\u003eç”Ÿæˆæ¨¡å‹\u003c/h2\u003e\n\u003cp\u003eç›®å‰ä¸»æµçš„ç”Ÿæˆæ¨¡å‹åŒ…æ‹¬\u003cstrong\u003eç”Ÿæˆå¯¹æŠ—æ¨¡å‹ (GAN)\u003c/strong\u003eã€\u003cstrong\u003eå˜åˆ†è‡ªç¼–ç å™¨ (VAE)\u003cstrong\u003eå’Œ\u003c/strong\u003eåŸºäºæµçš„æ¨¡å‹ (Flow-based models)\u003c/strong\u003eã€‚\u003c/p\u003e","title":"What are Diffusion Models?"},{"content":"Pipelines, models and schedulers è§£æ„åŸºæœ¬pipeline pipelineæ˜¯ä¸€ç§å¿«é€Ÿç®€ä¾¿è¿è¡Œæ¨ç†æ¨¡å‹çš„æ–¹æ³•ï¼Œåªéœ€è¦å››è¡Œä»£ç å³å¯ç”Ÿæˆå›¾åƒ\nfrom diffusers import DDPMPipeline ddpm = DDPMPipeline.from_pretrained(\u0026#34;google/ddpm-cat-256\u0026#34;, use_safetensors=True).to(\u0026#34;cuda\u0026#34;) image = ddpm(num_inference_steps=25).images[0] image åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œpipelineä¸­åŒ…æ‹¬ä¸€ä¸ªUNet2DModelå’Œä¸€ä¸ªDDPMSchedulerã€‚pipelineé€šè¿‡è·å–æ‰€éœ€è¾“å‡ºå¤§å°çš„éšæœºå™ªå£°å¹¶å°†å…¶å¤šæ¬¡ä¼ é€’ç»™æ¨¡å‹å¯¹å›¾åƒè¿›è¡Œå»å™ªã€‚æ¯ä¸ªæ—¶é—´æ­¥ï¼Œæ¨¡å‹éƒ½ä¼šé¢„æµ‹å™ªå£°æ®‹å·®ï¼Œè°ƒåº¦å™¨ä¼šä½¿ç”¨å®ƒæ¥é¢„æµ‹ä¸€ä¸ªå™ªå£°æ›´å°‘çš„å›¾åƒï¼Œé‡å¤è¯¥æ­¥éª¤ç›´åˆ°åˆ°è¾¾ç‰¹å®šçš„æ—¶é—´æ­¥ã€‚\nè§£æ„pipelineï¼Œä»æ¨¡å‹ä¸­é‡æ–°æ„å»ºä¸€ä¸ªpipelineç”¨äºå»å™ªè¿‡ç¨‹ã€‚\nåŠ è½½æ¨¡å‹å’Œscheduler: from diffusers import DDPMScheduler, UNet2DModel scheduler = DDPMScheduler.from_pretrained(\u0026#34;google/ddpm-cat-256\u0026#34;) model = UNet2DModel.from_pretrained(\u0026#34;google/ddpm-cat-256\u0026#34;, use_safetensors=True).to(\u0026#34;cuda\u0026#34;) è®¾ç½®æ—¶é—´æ­¥ç”¨äºå»å™ªè¿‡ç¨‹ scheduler.set_timesteps(50) è®¾ç½®schedulerçš„æ—¶é—´æ­¥ä¼šåˆ›å»ºä¸€ä¸ªå¼ é‡ï¼Œå…¶ä¸­åŒ…å«å‡åŒ€åˆ†å¸ƒçš„å…ƒç´ ï¼Œä¾‹å­ä¸­ä¸º50ä¸ªã€‚æ¯ä¸ªå…ƒç´ å¯¹åº”æ¨¡å‹å¯¹å›¾åƒè¿›è¡Œå»å™ªæ­¥é•¿ã€‚åœ¨å»å™ªå¾ªç¯ä¸­ï¼Œè¿­ä»£æ­¤å¼ é‡å¯¹å›¾åƒè¿›è¡Œå»å™ªï¼š scheduler.timesteps tensor([980, 960, 940, 920, 900, 880, 860, 840, 820, 800, 780, 760, 740, 720, 700, 680, 660, 640, 620, 600, 580, 560, 540, 520, 500, 480, 460, 440, 420, 400, 380, 360, 340, 320, 300, 280, 260, 240, 220, 200, 180, 160, 140, 120, 100, 80, 60, 40, 20, 0]) åˆ›å»ºä¸€äº›ä¸è¾“å‡ºå½¢çŠ¶ä¸€è‡´çš„éšæœºå™ªå£°ï¼š import torch sample_size = model.config.sample_size noise = torch.randn((1, 3, sample_size, sample_size), device=\u0026#34;cuda\u0026#34;) ç¼–å†™ä¸€ä¸ªå¾ªç¯æ¥è¿­ä»£æ—¶é—´æ­¥ã€‚åœ¨æ¯ä¸ªæ—¶é—´æ­¥ä¸­ï¼Œæ¨¡å‹ä¼šæ‰§è¡ŒUNet2DModel.forward()ä¼ é€’å¹¶ä¸”è¿”å›å™ªå£°æ®‹å·®ã€‚Schedulerçš„step()æ–¹æ³•ä¼šä½¿ç”¨å™ªå£°æ®‹å·®ã€æ—¶é—´æ­¥å’Œè¾“å…¥ï¼Œé¢„æµ‹ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„å›¾åƒï¼ˆæ—¶é—´æ­¥æ˜¯ä»å¤§åˆ°å°ï¼Œâ€œä¸Šä¸€ä¸ªæ—¶é—´æ­¥â€æŒ‡æ¯”å…¶æ•°å€¼å°çš„æ—¶é—´æ­¥ï¼‰ input = noise for t in scheduler.timesteps: with torch.no_grad(): noisy_residual = model(input, t).sample previous_noisy_sample = scheduler.step(noisy_residual, t, input).prev_sample input = previous_noisy_sample ä¸Šè¿°è¿‡ç¨‹ä¸ºæ•´ä¸ªå»å™ªè¿‡ç¨‹ã€‚\næœ€åä¸€æ­¥æ˜¯å°†å»å™ªè¾“å‡ºè½¬æ¢ä¸ºå›¾åƒ from PIL import Image import numpy as np image = (input / 2 + 0.5).clamp(0, 1).squeeze() image = (image.permute(1, 2, 0) * 255).round().to(torch.uint8).cpu().numpy() image = Image.fromarray(image) image è§£æ„ç¨³å®šæ‰©æ•£Pipeline ç¨³å®šæ‰©æ•£ (Stable Diffusion) æ˜¯ä¸€ç§æ–‡æœ¬åˆ°å›¾åƒçš„æ½œåœ¨æ‰©æ•£æ¨¡å‹ï¼Œä½¿ç”¨å›¾åƒçš„ä½ç»´è¡¨ç¤ºè€Œä¸æ˜¯å®é™…åƒç´ ç©ºé—´ï¼Œä½¿å¾—å®ƒæ›´èŠ‚çœå†…å­˜ã€‚ç¼–ç å™¨å°†å›¾åƒå‹ç¼©ä¸ºè¾ƒå°çš„è¡¨ç¤ºï¼Œè§£ç å™¨å°†å‹ç¼©åçš„è¡¨ç¤ºè½¬æ¢ä¸ºå›¾åƒã€‚å¯¹äºæ–‡æœ¬åˆ°å›¾åƒçš„ç”Ÿæˆæ¨¡å‹ï¼Œéœ€è¦ä¸€ä¸ªtokenizer å’Œä¸€ä¸ªencoder æ¥ç”Ÿæˆæ–‡æœ¬åµŒå…¥ï¼Œæ‰€ä»¥ï¼Œç¨³å®šæ‰©æ•£æ¨¡å‹éœ€è¦ä¸‰ä¸ªå•ç‹¬çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚\nä½¿ç”¨from_pretrained()æ–¹æ³•åŠ è½½è¿™äº›ç»„ä»¶ï¼Œä½¿ç”¨stable-diffusion-v1-4æ¨¡å‹ã€‚\nfrom PIL import Image import torch from transformers import CLIPTextModel, CLIPTokenizer from diffusers import AutoencoderKL, UNet2DConditionModel, PNDMScheduler vae = AutoencoderKL.from_pretrained(\u0026#34;CompVis/stable-diffusion-v1-4\u0026#34;, subfolder=\u0026#34;vae\u0026#34;, use_safetensors=True) tokenizer = CLIPTokenizer.from_pretrained(\u0026#34;CompVis/stable-diffusion-v1-4\u0026#34;, subfolder=\u0026#34;tokenizer\u0026#34;) text_encoder = CLIPTextModel.from_pretrained( \u0026#34;CompVis/stable-diffusion-v1-4\u0026#34;, subfolder=\u0026#34;text_encoder\u0026#34;, use_safetensors=True ) unet = UNet2DConditionModel.from_pretrained( \u0026#34;CompVis/stable-diffusion-v1-4\u0026#34;, subfolder=\u0026#34;unet\u0026#34;, use_safetensors=True ) ä¸ä½¿ç”¨é»˜è®¤çš„PNDMSchedulerï¼Œè€Œæ˜¯æ¢æˆUniPCMultistepSchedulerï¼š\nfrom diffusers import UniPCMultistepScheduler scheduler = UniPCMultistepScheduler.from_pretrained(\u0026#34;CompVis/stable-diffusion-v1-4\u0026#34;, subfolder=\u0026#34;scheduler\u0026#34;) ä¸ºäº†åŠ å¿«æ¨ç†é€Ÿåº¦ï¼Œå°†æ¨¡å‹ç§»è‡³GPUä¸­ï¼ŒVAEã€Encoderã€UNetå…·æœ‰å¯è®­ç»ƒçš„æƒé‡ã€‚\ntorch_device = \u0026#34;cuda\u0026#34; vae.to(torch_device) text_encoder.to(torch_device) unet.to(torch_device) åˆ›å»ºæ–‡æœ¬åµŒå…¥ (Text Embeddings) å°†æ–‡æœ¬tokenizedä»¥ç”Ÿæˆembeddingsã€‚æ–‡æœ¬ç”¨äºå¼•å¯¼æ‰©æ•£æ¨¡å‹è¾“å‡ºæç¤ºä¸­çš„å†…å®¹ï¼Œå…¶ä¸­å‚æ•°guidance_scaleå†³å®šäº†åœ¨ç”Ÿæˆå›¾åƒæ—¶åº”è¯¥ç»™äºˆæç¤ºå¤šå°‘æƒé‡ã€‚\nprompt = [\u0026#34;a photograph of an astronaut riding a horse\u0026#34;] height = 512 # default height of Stable Diffusion width = 512 # default width of Stable Diffusion num_inference_steps = 25 # Number of denoising steps guidance_scale = 7.5 # Scale for classifier-free guidance generator = torch.manual_seed(0) # Seed generator to create the initial latent noise batch_size = len(prompt) å¯¹æ–‡æœ¬è¿›è¡Œtokenizeå¹¶ä¸”ä»promptä¸­ç”ŸæˆåµŒå…¥ï¼š\n# ä½¿ç”¨åˆ†è¯å™¨å¯¹promptè¿›è¡Œåˆ†è¯ï¼Œå¹¶å¡«å……åˆ°æœ€å¤§é•¿åº¦ text_input = tokenizer( prompt, padding=\u0026#34;max_length\u0026#34;, max_length=tokenizer.model_max_length, truncation=True, return_tensors=\u0026#34;pt\u0026#34; ) # ä½¿ç”¨text_encoderå¯¹åˆ†è¯åå¯¹promptç”Ÿæˆtext_embeddings with torch.no_grad(): text_embeddings = text_encoder(text_input.input_ids.to(torch_device))[0] è¿˜éœ€è¦ç”Ÿæˆæ— æ¡ä»¶æ–‡æœ¬åµŒå…¥ï¼Œç”¨äºå¡«å……åµŒå…¥ã€‚è¿™äº›åµŒå…¥éœ€è¦æœ‰ç›¸åŒçš„å½¢çŠ¶ï¼ˆbatch_sizeå’Œseq_lengthï¼‰ï¼Œåƒæ¡ä»¶æ–‡æœ¬åµŒå…¥ä¸€æ ·ï¼š\n# text_inputçš„å½¢çŠ¶ï¼šbatch_size * seq_length max_length = text_input.input_ids.shape[-1] uncond_input = tokenizer([\u0026#34;\u0026#34;] * batch_size, padding=\u0026#34;max_length\u0026#34;, max_length=max_length, return_tensors=\u0026#34;pt\u0026#34;) uncond_embeddings = text_encoder(uncond_input.input_ids.to(torch_device))[0] å°†æ— æ¡ä»¶æ–‡æœ¬åµŒå…¥å’Œæ¡ä»¶æ–‡æœ¬åµŒå…¥æ‹¼æ¥ï¼š\ntext_embeddings = torch.cat([uncond_embeddings, text_embeddings]) åˆ›å»ºéšæœºå™ªå£° æ¥ä¸‹æ¥ï¼Œç”Ÿæˆä¸€äº›éšæœºå™ªå£°ä½œä¸ºå»å™ªè¿‡ç¨‹çš„èµ·ç‚¹ã€‚ä½œä¸ºæ½œç©ºé—´çš„å›¾åƒè¡¨ç¤ºï¼Œå®ƒä»¬ä¼šè¢«é€æ¸å»å™ªã€‚å›¾åƒçš„æ½œåœ¨è¡¨ç¤ºå°äºæœ€ç»ˆçš„å›¾åƒå°ºå¯¸ï¼Œæ¨¡å‹ä¹‹åä¼šå°†å…¶è½¬æ¢ä¸ºæœ€ç»ˆçš„512*512å°ºå¯¸ã€‚\nç”±äºVAEæ¯æ¬¡ä¸‹é‡‡æ ·éƒ½ä¼šå°†å°ºå¯¸çš„é•¿å®½å˜ä¸ºåŸæ¥çš„1/2ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥éªŒè¯VAEçš„ä¸‹é‡‡æ ·æ¬¡æ•°ï¼š\n2 ** (len(vae.config.block_out_channels) - 1) == 8 # vae.config.block_out_channelsä¸ºå·ç§¯å±‚çš„æ•°é‡ # -1åæ—¶ä¸‹é‡‡æ ·çš„æ¬¡æ•° # è¯´æ˜ç»å†äº†3æ¬¡ä¸‹é‡‡æ · ç”Ÿæˆéšæœºå™ªå£°çš„ä»£ç ï¼š\nlatents = torch.randn( (batch_size, unet.config.in_channels, height // 8, width // 8), # ç”Ÿæˆçš„å™ªå£°ä½äºä¸‰æ¬¡ä¸‹é‡‡æ ·ä¹‹åçš„æ½œç©ºé—´ generator=generator, device=torch_device, ) å›¾åƒå»å™ª é¦–å…ˆä½¿ç”¨åˆå§‹åŒ–å™ªå£°åˆ†å¸ƒsigma ç¼©æ”¾è¾“å…¥ï¼Œæ˜¯ä½¿ç”¨UniPCMultistepSchedulerè°ƒåº¦å™¨çš„å¿…é¡»æ­¥éª¤ã€‚\nlatents = latents * scheduler.init_noise_sigma åˆ›å»ºä¸€ä¸ªå»å™ªå¾ªç¯ï¼Œèƒ½å¤Ÿé€æ­¥å°†çº¯å™ªå£°è½¬æ¢ä¸ºåœ¨latent spaceä¸­çš„å›¾åƒè¡¨ç¤ºï¼Œå»å™ªå¾ªç¯ä¸­æœ‰ä¸‰ä¸ªæ“ä½œï¼š\nè®¾ç½®å»å™ªæœŸé—´Schedulerçš„æ—¶é—´æ­¥é•¿ è¿­ä»£æ—¶é—´æ­¥é•¿ åœ¨æ¯ä¸ªæ—¶é—´æ­¥ä¸­ï¼Œè°ƒç”¨UNetæ¨¡å‹æ¥é¢„æµ‹å™ªå£°æ®‹å·®å¹¶å°†å…¶ä¼ é€’ç»™Scheduleræ¥è®¡ç®—ä¹‹å‰çš„å™ªå£°æ ·æœ¬ from tqdm.auto import tqdm scheduler.set_timesteps(num_inference_steps) for t in tqdm(scheduler.timesteps): # expand the latents if we are doing classifier-free guidance to avoid doing two forward passes. latent_model_input = torch.cat([latents] * 2) latent_model_input = scheduler.scale_model_input(latent_model_input, timestep=t) # predict the noise residual # å™ªå£°é¢„æµ‹éœ€è¦è¾“å…¥ä¸Šä¸€æ­¥çš„æ½œç©ºé—´è¡¨ç¤ºã€æ—¶é—´æ­¥ä»¥åŠæ–‡æœ¬åµŒå…¥ with torch.no_grad(): noise_pred = unet(latent_model_input, t, encoder_hidden_states=text_embeddings).sample # perform guidance noise_pred_uncond, noise_pred_text = noise_pred.chunk(2) # guidance_scale ç”¨äºè°ƒèŠ‚æ–‡æœ¬æŒ‡å¯¼ç”Ÿæˆçš„å¼ºåº¦ noise_pred = noise_pred_uncond + guidance_scale * (noise_pred_text - noise_pred_uncond) # compute the previous noisy sample x_t -\u0026gt; x_t-1 # è¾“å…¥é¢„æµ‹çš„å™ªå£°ã€æ—¶é—´æ­¥å’Œæ½œç©ºé—´è¡¨ç¤ºæ¥è®¡ç®—ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„æ½œç©ºé—´è¡¨ç¤º latents = scheduler.step(noise_pred, t, latents).prev_sample è§£ç å›¾åƒ æœ€åä¸€æ­¥æ˜¯ä½¿ç”¨VAEå°†æ½œç©ºé—´è¡¨ç¤ºè§£ç ä¸ºå›¾åƒå¹¶è·å–è§£ç è¾“å‡ºã€‚\n# scale and decode the image latents with vae latents = 1 / 0.18215 * latents with torch.no_grad(): image = vae.decode(latents).sample æœ€åï¼Œä½¿ç”¨PIL.Imageæ¥å±•ç¤ºå›¾åƒã€‚\nimage = (image / 2 + 0.5).clamp(0, 1).squeeze() image = (image.permute(1, 2, 0) * 255).to(torch.uint8).cpu().numpy() image = Image.fromarray(image) image Training Diffusion Model DreamBooth é¦–å…ˆï¼Œä¸‹è½½diffuersç¤ºä¾‹è„šæœ¬ï¼Œå®‰è£…å¯¹åº”ä¾èµ–ï¼š\ngit clone https://github.com/huggingface/diffusers cd diffusers pip install . é…ç½®Accelerateç¯å¢ƒï¼š\naccelerate config è„šæœ¬å‚æ•° è®­ç»ƒè„šæœ¬æä¾›äº†è®¸å¤šå‚æ•°ç”¨äºè‡ªå®šä¹‰è®­ç»ƒè¿è¡Œã€‚å¯åŠ¨è®­ç»ƒä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š\naccelerate launch train_dreambooth.py ä¸€äº›åŸºæœ¬ä¸”é‡è¦çš„å‚æ•°ï¼š\n--pretrained_model_name_or_path: Hubä¸Šçš„æ¨¡å‹åç§°æˆ–è€…é¢„è®­ç»ƒæ¨¡å‹æœ¬åœ°è·¯å¾„ --instance_data_path: åŒ…å«è®­ç»ƒæ•°æ®é›†çš„æ–‡ä»¶å¤¹è·¯å¾„ --instance_prompt: åŒ…å«ç¤ºä¾‹å›¾ç‰‡çš„ç¨€æœ‰æ ‡è®°çš„æ–‡æœ¬æç¤º --train_text_encoder: æ˜¯å¦è®­ç»ƒæ–‡æœ¬ç¼–ç å™¨ --output_dir: è®­ç»ƒå¥½çš„æ¨¡å‹ä¿å­˜åœ°å€ --push_to_hub: æ˜¯å¦å°†è®­ç»ƒå¥½çš„æ¨¡å‹æ¨é€è‡³hub --checkpointing_steps: åœ¨æ¨¡å‹è®­ç»ƒæ—¶ä¿å­˜æ£€æŸ¥ç‚¹çš„é¢‘ç‡ï¼›å¦‚æœè®­ç»ƒå› ä¸ºæŸç§åŸå› ä¸­æ–­ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ --resume_from_checkpointåˆ°è®­ç»ƒå‘½ä»¤ä¸­ä»è¯¥æ£€æŸ¥ç‚¹ç»§ç»­è®­ç»ƒ å…ˆéªŒä¿å­˜æŸå¤± å…ˆéªŒä¿å­˜æŸå¤±é€šè¿‡ä½¿ç”¨æ¨¡å‹è‡ªå·±ç”Ÿæˆçš„æ ·æœ¬æ¥å¸®åŠ©å­¦ä¹ æ›´åŠ å¤šæ ·æ€§çš„å›¾åƒä¸»ä½“ã€‚ç”±äºç”Ÿæˆçš„æ ·æœ¬å›¾åƒä¸æä¾›çš„å›¾åƒå±äºåŒä¸€ç±»åˆ«ï¼Œå› æ­¤å®ƒä»¬æœ‰åŠ©äºæ¨¡å‹ä¿ç•™å¯¹è¯¥ç±»åˆ«çš„ç†è§£åŒæ—¶åˆ©ç”¨è¯¥ç±»åˆ«çš„å·²çŸ¥ä¿¡æ¯æ¥æä¾›æ–°çš„æ„å›¾ã€‚\n--with_prior_preservation: æ˜¯å¦ä½¿ç”¨å…ˆéªŒä¿ç•™æŸå¤± --prior_loss_weight: æ§åˆ¶å…ˆéªŒä¿å­˜æŸå¤±å¯¹æ¨¡å‹çš„å½±å“ --class_data_dir: åŒ…å«ç”Ÿæˆç±»å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ --class_prompt: æè¿°ç”Ÿæˆç±»å›¾åƒçš„æ–‡æœ¬æç¤º accelerate launch train_dreambooth.py \\ --with_prior_preservation \\ --prior_loss_weight=1.0 \\ --class_data_dir=\u0026#34;path/to/class/images\u0026#34; \\ --class_prompt=\u0026#34;text prompt describing class\u0026#34; è®­ç»ƒè„šæœ¬ DreamBoothåŒ…å«æ•°æ®é›†ç±»ï¼š\nDreamBoothDatasetï¼šå¯¹å›¾åƒå’Œç±»åˆ«å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼Œå¹¶å¯¹è®­ç»ƒæç¤ºè¿›è¡Œåˆ†è¯ PromptDatasetï¼šç”Ÿæˆæç¤ºåµŒå…¥ä»¥ç”Ÿæˆç±»åˆ«å›¾åƒ å¦‚æœå¯ç”¨äº†å…ˆéªŒä¿å­˜æŸå¤±ï¼Œåˆ™ç±»åˆ«å›¾åƒåœ¨æ­¤å¤„ç”Ÿæˆï¼š\n# åŒ…å«ç±»åˆ«æç¤ºçš„æ•°æ®é›† sample_dataset = PromptDataset(args.class_prompt, num_new_images) sample_dataloader = torch.utils.data.DataLoader(sample_dataset, batch_size=args.sample_batch_size) sample_dataloader = accelerator.prepare(sample_dataloader) pipeline.to(accelerator.device) for example in tqdm( sample_dataloader, desc=\u0026#34;Generating class images\u0026#34;, disable=not accelerator.is_local_main_process ): images = pipeline(example[\u0026#34;prompt\u0026#34;]).images æ¥ä¸‹æ¥ä½¿ç”¨main()å¤„ç†è®¾ç½®è®­ç»ƒæ•°æ®é›†å’Œè®­ç»ƒå¾ªç¯ã€‚è¯¥è„šæœ¬åŠ è½½tokenizerã€schedulerå’Œmodelsï¼š\n# Load the tokenizer if args.tokenizer_name: tokenizer = AutoTokenizer.from_pretrained(args.tokenizer_name, revision=args.revision, use_fast=False) elif args.pretrained_model_name_or_path: tokenizer = AutoTokenizer.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;tokenizer\u0026#34;, revision=args.revision, use_fast=False, ) # Load scheduler and models noise_scheduler = DDPMScheduler.from_pretrained(args.pretrained_model_name_or_path, subfolder=\u0026#34;scheduler\u0026#34;) text_encoder = text_encoder_cls.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;text_encoder\u0026#34;, revision=args.revision ) if model_has_vae(args): vae = AutoencoderKL.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;vae\u0026#34;, revision=args.revision ) else: vae = None unet = UNet2DConditionModel.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;unet\u0026#34;, revision=args.revision ) ç„¶åï¼Œåˆ›å»ºè®­ç»ƒæ•°æ®é›†å’Œæ•°æ®åŠ è½½å™¨ï¼š\ntrain_dataset = DreamBoothDataset( instance_data_root=args.instance_data_dir, instance_prompt=args.instance_prompt, class_data_root=args.class_data_dir if args.with_prior_preservation else None, class_prompt=args.class_prompt, class_num=args.num_class_images, tokenizer=tokenizer, size=args.resolution, center_crop=args.center_crop, encoder_hidden_states=pre_computed_encoder_hidden_states, class_prompt_encoder_hidden_states=pre_computed_class_prompt_encoder_hidden_states, tokenizer_max_length=args.tokenizer_max_length, ) train_dataloader = torch.utils.data.DataLoader( train_dataset, batch_size=args.train_batch_size, shuffle=True, collate_fn=lambda examples: collate_fn(examples, args.with_prior_preservation), num_workers=args.dataloader_num_workers, ) æœ€åï¼Œè®­ç»ƒå¾ªç¯è´Ÿè´£å°†å›¾åƒè½¬æ¢ä¸ºæ½œç©ºé—´è¡¨ç¤ºã€å‘è¾“å…¥æ·»åŠ å™ªå£°ã€é¢„æµ‹å™ªå£°æ®‹å·®ä»¥åŠè®¡ç®—æŸå¤±ç­‰ã€‚\nå¯åŠ¨è®­ç»ƒè„šæœ¬ æ·»åŠ éƒ¨åˆ†å˜é‡åˆ°bashç¯å¢ƒå˜é‡ä¸­ï¼Œå¯åŠ¨è®­ç»ƒè„šæœ¬ï¼š\nexport MODEL_NAME=\u0026#34;stable-diffusion-v1-5/stable-diffusion-v1-5\u0026#34; export INSTANCE_DIR=\u0026#34;./dog\u0026#34; export OUTPUT_DIR=\u0026#34;path_to_saved_model\u0026#34; accelerate launch train_dreambooth.py \\ --pretrained_model_name_or_path=$MODEL_NAME \\ --instance_data_dir=$INSTANCE_DIR \\ --output_dir=$OUTPUT_DIR \\ --instance_prompt=\u0026#34;a photo of sks dog\u0026#34; \\ --resolution=512 \\ --train_batch_size=1 \\ --gradient_accumulation_steps=1 \\ --learning_rate=5e-6 \\ --lr_scheduler=\u0026#34;constant\u0026#34; \\ --lr_warmup_steps=0 \\ --max_train_steps=400 \\ --push_to_hub è®­ç»ƒå®Œæˆåå³å¯ä½¿ç”¨æ–°è®­ç»ƒçš„æ¨¡å‹è¿›è¡Œæ¨ç†ã€‚\nTextual Inversion Textual Inversionæ˜¯ä¸€ç§å¾®è°ƒæŠ€æœ¯ï¼Œåªéœ€å‡ ä¸ªç¤ºä¾‹å›¾åƒå³å¯ä¸ªæ€§åŒ–å›¾åƒç”Ÿæˆæ¨¡å‹ã€‚æ­¤æŠ€æœ¯çš„å·¥ä½œåŸç†æ˜¯å­¦ä¹ å’Œæ›´æ–°æ–‡æœ¬åµŒå…¥ï¼ˆæ–°åµŒå…¥å¿…é¡»ä¸ç‰¹æ®Šå•è¯ç›¸å…³è”ï¼‰ä»¥åŒ¹é…æä¾›çš„ç¤ºä¾‹å›¾åƒã€‚\nè„šæœ¬å‚æ•° ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥å¯åŠ¨è®­ç»ƒï¼š\naccelerate launch textual_inversion.py \\ --gradient_accumulation_steps=4 ä¸€äº›éœ€è¦æŒ‡å®šçš„é‡è¦å‚æ•°å¦‚ä¸‹ï¼š\n-pretrained_model_name_or_pathï¼šHub ä¸Šçš„æ¨¡å‹åç§°æˆ–é¢„è®­ç»ƒæ¨¡å‹çš„æœ¬åœ°è·¯å¾„ -train_data_dirï¼šåŒ…å«è®­ç»ƒæ•°æ®é›†ï¼ˆç¤ºä¾‹å›¾åƒï¼‰çš„æ–‡ä»¶å¤¹è·¯å¾„ -output_dirï¼šè®­ç»ƒå¥½çš„æ¨¡å‹ä¿å­˜ä½ç½® -push_to_hubï¼šæ˜¯å¦å°†è®­ç»ƒå¥½çš„æ¨¡å‹æ¨é€åˆ°Hub -checkpointing_steps-resume_from_checkpointï¼šåœ¨æ¨¡å‹è®­ç»ƒæ—¶ä¿å­˜æ£€æŸ¥ç‚¹çš„é¢‘ç‡ï¼›å¦‚æœç”±äºæŸç§åŸå› è®­ç»ƒä¸­æ–­ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ æ­¤å‚æ•°ç»§ç»­è®­ç»ƒ -num_vectorsï¼šç”¨äºå­¦ä¹ åµŒå…¥çš„å‘é‡æ•°é‡ï¼›å¢åŠ æ­¤å‚æ•°æœ‰åŠ©äºæ¨¡å‹æ›´å¥½åœ°å­¦ä¹ ï¼Œä½†ä¼šå¢åŠ è®­ç»ƒæˆæœ¬ -placeholder_tokenï¼šå°†å­¦ä¹ åˆ°çš„åµŒå…¥ä¸ä¹‹è”ç³»èµ·æ¥çš„ç‰¹æ®Šè¯ï¼ˆä½ å¿…é¡»åœ¨æç¤ºä¸­ä½¿ç”¨è¯¥è¯è¿›è¡Œæ¨ç†ï¼‰ -initializer_tokenï¼šä¸€ä¸ªå•è¯ï¼Œå¤§è‡´æè¿°ä½ æ­£åœ¨å°è¯•è®­ç»ƒçš„å¯¹è±¡æˆ–é£æ ¼ -learnable_propertyï¼šæ— è®ºæ˜¯åœ¨è®­ç»ƒæ¨¡å‹å­¦ä¹ æ–°çš„â€œé£æ ¼â€ï¼ˆä¾‹å¦‚ï¼Œæ¢µé«˜çš„ç»˜ç”»é£æ ¼ï¼‰è¿˜æ˜¯â€œå¯¹è±¡â€ï¼ˆä¾‹å¦‚ï¼Œæ‚¨çš„ç‹—ï¼‰ è®­ç»ƒè„šæœ¬ textual inversionæœ‰ä¸€ä¸ªè‡ªå®šä¹‰æ•°æ®é›†ç±»ï¼ŒTextualInversionDatasetç”¨äºåˆ›å»ºæ•°æ®é›†ï¼Œå¯ä»¥è‡ªå®šä¹‰å›¾åƒå¤§å°ã€å ä½ç¬¦æ ‡è®°ã€å·®å€¼æ–¹æ³•ã€æ˜¯å¦è£å‰ªå›¾åƒç­‰ã€‚\né¦–å…ˆåŠ è½½tokenizerã€schedulerå’Œmodelï¼š\n# Load tokenizer if args.tokenizer_name: tokenizer = CLIPTokenizer.from_pretrained(args.tokenizer_name) elif args.pretrained_model_name_or_path: tokenizer = CLIPTokenizer.from_pretrained(args.pretrained_model_name_or_path, subfolder=\u0026#34;tokenizer\u0026#34;) # Load scheduler and models noise_scheduler = DDPMScheduler.from_pretrained(args.pretrained_model_name_or_path, subfolder=\u0026#34;scheduler\u0026#34;) text_encoder = CLIPTextModel.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;text_encoder\u0026#34;, revision=args.revision ) vae = AutoencoderKL.from_pretrained(args.pretrained_model_name_or_path, subfolder=\u0026#34;vae\u0026#34;, revision=args.revision) unet = UNet2DConditionModel.from_pretrained( args.pretrained_model_name_or_path, subfolder=\u0026#34;unet\u0026#34;, revision=args.revision ) åœ¨tokenizerä¸­æ·»åŠ ç‰¹æ®Šå ä½ç¬¦æ ‡è®°ï¼Œå¹¶é‡æ–°è°ƒæ•´åµŒå…¥ä»¥é€‚åº”æ–°çš„æ ‡è®°ã€‚\nç„¶åï¼Œè„šæœ¬åˆ›å»ºæ•°æ®é›†TextualInversionDatasetã€‚\ntrain_dataset = TextualInversionDataset( data_root=args.train_data_dir, tokenizer=tokenizer, size=args.resolution, placeholder_token=(\u0026#34; \u0026#34;.join(tokenizer.convert_ids_to_tokens(placeholder_token_ids))), repeats=args.repeats, learnable_property=args.learnable_property, center_crop=args.center_crop, set=\u0026#34;train\u0026#34;, ) train_dataloader = torch.utils.data.DataLoader( train_dataset, batch_size=args.train_batch_size, shuffle=True, num_workers=args.dataloader_num_workers ) æœ€åï¼Œè®­ç»ƒå¾ªç¯å¤„ç†ä»é¢„æµ‹å™ªå£°æ®‹å·®åˆ°æ›´æ–°ç‰¹æ®Šå ä½ç¬¦æ ‡è®°çš„åµŒå…¥æƒé‡çš„æ‰€æœ‰æ“ä½œã€‚\nå¯åŠ¨è®­ç»ƒè„šæœ¬ åœ¨å¯åŠ¨è„šæœ¬ä¹‹å‰ï¼Œå¦‚æœæƒ³è·Ÿè¸ªè®­ç»ƒè¿‡ç¨‹ï¼Œå¯ä»¥åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å®šæœŸä¿å­˜ç”Ÿæˆçš„å›¾åƒã€‚å°†ä»¥ä¸‹å‚æ•°å¢åŠ åˆ°è®­ç»ƒå‘½ä»¤ä¸­ï¼š\n--validation_prompt=\u0026#34;A \u0026lt;cat-toy\u0026gt; train\u0026#34; --num_validation_images=4 --validation_steps=100 å¯åŠ¨è®­ç»ƒè„šæœ¬çš„å‘½ä»¤å¦‚ä¸‹ï¼š\nexport MODEL_NAME=\u0026#34;stable-diffusion-v1-5/stable-diffusion-v1-5\u0026#34; export DATA_DIR=\u0026#34;./cat\u0026#34; accelerate launch textual_inversion.py \\ --pretrained_model_name_or_path=$MODEL_NAME \\ --train_data_dir=$DATA_DIR \\ --learnable_property=\u0026#34;object\u0026#34; \\ --placeholder_token=\u0026#34;\u0026lt;cat-toy\u0026gt;\u0026#34; \\ --initializer_token=\u0026#34;toy\u0026#34; \\ --resolution=512 \\ --train_batch_size=1 \\ --gradient_accumulation_steps=4 \\ --max_train_steps=3000 \\ --learning_rate=5.0e-04 \\ --scale_lr \\ --lr_scheduler=\u0026#34;constant\u0026#34; \\ --lr_warmup_steps=0 \\ --output_dir=\u0026#34;textual_inversion_cat\u0026#34; \\ --push_to_hub è®­ç»ƒç»“æŸåï¼Œå¯ä»¥ä½¿ç”¨æ–°è®­ç»ƒçš„æ¨¡å‹è¿›è¡Œæ¨ç†ï¼š\nfrom diffusers import StableDiffusionPipeline import torch pipeline = StableDiffusionPipeline.from_pretrained(\u0026#34;stable-diffusion-v1-5/stable-diffusion-v1-5\u0026#34;, torch_dtype=torch.float16).to(\u0026#34;cuda\u0026#34;) pipeline.load_textual_inversion(\u0026#34;sd-concepts-library/cat-toy\u0026#34;) image = pipeline(\u0026#34;A \u0026lt;cat-toy\u0026gt; train\u0026#34;, num_inference_steps=50).images[0] image.save(\u0026#34;cat-train.png\u0026#34;) ","permalink":"https://m1yan.github.io/posts/diffusers-tutorials/","summary":"\u003ch1 id=\"pipelines-models-and-schedulers\"\u003ePipelines, models and schedulers\u003c/h1\u003e\n\u003ch2 id=\"è§£æ„åŸºæœ¬pipeline\"\u003eè§£æ„åŸºæœ¬pipeline\u003c/h2\u003e\n\u003cp\u003epipelineæ˜¯ä¸€ç§å¿«é€Ÿç®€ä¾¿è¿è¡Œæ¨ç†æ¨¡å‹çš„æ–¹æ³•ï¼Œåªéœ€è¦å››è¡Œä»£ç å³å¯ç”Ÿæˆå›¾åƒ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ediffusers\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eDDPMPipeline\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eddpm\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDDPMPipeline\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efrom_pretrained\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;google/ddpm-cat-256\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003euse_safetensors\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"kc\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;cuda\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eddpm\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum_inference_steps\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e25\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eimages\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Diffusers Tutorials"},{"content":"DASHç³»ç»Ÿæ­å»ºæµç¨‹ å®¢æˆ·ç«¯æ­å»º é¦–å…ˆï¼Œç”¨gitå‘½ä»¤å°†dash.jsä¸‹è½½åˆ°æœ¬åœ°.\ngit clone https://github.com/Dash-Industry-Forum/dash.js.git åœ¨dash.jsç›®å½•ä¸‹ï¼Œç¼–è¯‘è¿è¡Œdash.js.\n{% message color:danger size: \u0026ldquo;icon:fa-brands fa-npm\u0026rdquo; title: %} cd dash.js npm install npm run start {% endmessage %}\nç¼–è¯‘å®Œæˆåï¼Œä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨é¡µé¢æ‰“å¼€dashç³»ç»Ÿçš„ç½‘é¡µï¼Œç‚¹å‡»è¶…é“¾æ¥hereè¿›å…¥ã€‚ç‚¹å‡»LoadæŒ‰é’®ï¼Œå¦‚æœå¯ä»¥æ­£å¸¸æ’­æ”¾æ¼”ç¤ºè§†é¢‘ï¼Œè¯´æ˜å®¢æˆ·ç«¯æ²¡æœ‰é—®é¢˜ã€‚\néƒ¨ç½²æœåŠ¡å™¨ ä½¿ç”¨nginxæ¥éƒ¨ç½²HTTPæœåŠ¡å™¨ã€‚ç”±äºåç»­æœåŠ¡å™¨é™é€Ÿç­‰æ“ä½œåœ¨Linuxç³»ç»Ÿä¸­è¾ƒä¸ºæ–¹ä¾¿ï¼Œå°†æœåŠ¡å™¨éƒ¨ç½²åœ¨è™šæ‹Ÿæœºä¸Šã€‚\né‡‡ç”¨çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä¸ºUbuntu 22.04.4 LTSã€‚\nå¯ä»¥ä½¿ç”¨Linux aptç›´æ¥å®‰è£…nginxã€‚\nsudo apt-get install nginx (ä¹Ÿå¯ä»¥å»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå®‰è£…)\næ‰“å¼€/nginx/confæ–‡ä»¶å¤¹ä¸‹çš„nginx.confé…ç½®æ–‡ä»¶ï¼Œå°†é…ç½®æ–‡ä»¶å†…å®¹å…¨éƒ¨æ›¿æ¢ä¸ºä¸‹é¢ä»£ç ã€‚è¿™é‡Œä½¿ç”¨8888ç«¯å£å¯¹å¤–æä¾›ä¸‹è½½èƒ½åŠ›ã€‚\nuser root; worker_processes 4; events { use epoll; worker_connections 204800; } http { include mime.types; default_type application/octet-stream; sendfile on; tcp_nopush on; keepalive_timeout 65; tcp_nodelay on; gzip on; client_header_buffer_size 4k; server { listen 8888; server_name 127.0.0.1; add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Headers X-Requested-With; add_header Access-Control-Allow-Methods GET,POST,OPTIONS; location / { root home/miyan/Videos; //è¿™é‡Œå¡«å†™æ‰€è¦æ’­æ”¾çš„è§†é¢‘å­˜æ”¾çš„ç»å¯¹è·¯å¾„ autoindex on; } } } åœ¨nginx.confæ‰€åœ¨çš„æ–‡ä»¶å¤¹å³é”®æ‰“å¼€terminalï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤å¯åŠ¨nginxã€‚\nnginx -p . -c ./nginx.conf å¦‚æœè¦å…³é—­nginxï¼Œåˆ™ä½¿ç”¨ä¸‹é¢å‘½ä»¤æ¥ç»“æŸè¿›ç¨‹ã€‚\npkill -9 nginx (å¦‚æœæ“ä½œæƒé™ä¸å¤Ÿï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤åè¾“å…¥ç³»ç»Ÿå¯†ç è¿›å…¥rootæ¨¡å¼)\nsu root ä»æœåŠ¡å™¨ä¸­è·å–è§†é¢‘ é¦–å…ˆéœ€è¦å…³é—­æµè§ˆå™¨çš„ç¼“å­˜ï¼Œä¿è¯å®¢æˆ·ç«¯è¯·æ±‚çš„è§†é¢‘æ¥è‡ªæœåŠ¡å™¨ã€‚\nåœ¨å®¢æˆ·ç«¯ä¸Šæ–¹åœ°å€æ ä¸­å¡«å†™URLï¼Œæ ¼å¼ä¸ºï¼šhttp://æœåŠ¡å™¨ip:ç«¯å£å·/è§†é¢‘çš„mpdæ–‡ä»¶å­˜æ”¾åœ¨æœåŠ¡å™¨çš„è·¯å¾„ã€‚\nä»¥æˆ‘çš„URLä¸ºä¾‹ï¼š\nhttp://192.168.133.128:8888/Video/bbb-manifest-refresh.mpd\nç‚¹å‡»LoadæŒ‰é’®ï¼Œå³å¯æ’­æ”¾æœåŠ¡å™¨ä¸­çš„è§†é¢‘ï¼ŒShow OptionsæŒ‰é’®ä¸­å¯ä»¥é€‰æ‹©è§†é¢‘æµçš„ç®—æ³•ï¼Œå¯ä»¥é€šè¿‡è§†é¢‘ä¸‹æ–¹çš„ç»Ÿè®¡å›¾æ¥è§‚å¯Ÿå®æ—¶çš„è§†é¢‘ç¼“å†²åŒºå¤§å°å’Œæ¯”ç‰¹ç‡ã€‚\nå®ç°ABRç®—æ³• è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨BBA0ç®—æ³•æ¥å®ç°ã€‚\nBBA0ç®—æ³•é…ç½® Dash.jsçš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\né…ç½®æ’­æ”¾å™¨éœ€è¦è¿›å…¥æ–‡ä»¶å¤¹dash.js/samples/dash-if-reference-playerã€‚æ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹ï¼š\ndashjs_config.jsonæ˜¯æ’­æ”¾å™¨é…ç½®æ–‡ä»¶ index.htmlæ˜¯æ’­æ”¾å™¨å‰ç«¯é¡µé¢ app/main.jsæ˜¯é¡µé¢æ§åˆ¶é€»è¾‘å®ç° app/rulesä¸­åŒ…æ‹¬ABRç®—æ³• é¦–å…ˆåœ¨app/rulesä¸­æ·»åŠ ç®—æ³•æ–‡ä»¶ABB0Rule.jsï¼Œåœ¨index.htmlä¸­å¼•ç”¨è¯¥æ–‡ä»¶ï¼š\n\u0026lt;script src=\u0026#34;app/main.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;app/rules/DownloadRatioRule.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;app/rules/ThroughputRule.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; + \u0026lt;script src=\u0026#34;app/rules/BBA0Rule.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; åœ¨app/main.jsä¸­ä¿®æ”¹è§„åˆ™ï¼š\nif ($scope.customABRRulesSelected) { - $scope.player.addABRCustomRule(\u0026#39;qualitySwitchRules\u0026#39;, \u0026#39;DownloadRatioRule\u0026#39;, DownloadRatioRule); /* jshint ignore:line */ - $scope.player.addABRCustomRule(\u0026#39;qualitySwitchRules\u0026#39;, \u0026#39;ThroughputRule\u0026#39;, CustomThroughputRule); /* jshint ignore:line */ + // $scope.player.addABRCustomRule(\u0026#39;qualitySwitchRules\u0026#39;, \u0026#39;DownloadRatioRule\u0026#39;, DownloadRatioRule); /* jshint ignore:line */ + // $scope.player.addABRCustomRule(\u0026#39;qualitySwitchRules\u0026#39;, \u0026#39;ThroughputRule\u0026#39;, CustomThroughputRule); /* jshint ignore:line */ + $scope.player.addABRCustomRule(\u0026#39;qualitySwitchRules\u0026#39;, \u0026#39;BBA0Rule\u0026#39;, CustomBBA0Rule); /* jshint ignore:line */ } else { - $scope.player.removeABRCustomRule(\u0026#39;DownloadRatioRule\u0026#39;); - $scope.player.removeABRCustomRule(\u0026#39;ThroughputRule\u0026#39;); + // $scope.player.removeABRCustomRule(\u0026#39;DownloadRatioRule\u0026#39;); + // $scope.player.removeABRCustomRule(\u0026#39;ThroughputRule\u0026#39;); + $scope.player.removeABRCustomRule(\u0026#39;BBA0Rule\u0026#39;); } }; ä¿®æ”¹é…ç½®æ–‡ä»¶dashjs_config.jsonæ¥ä¿®æ”¹bufferå¤§å°ï¼Œä½¿å¾—æ›´é€‚åº”å®éªŒç¯å¢ƒã€‚\n{ \u0026#34;streaming\u0026#34;: { \u0026#34;buffer\u0026#34;: { \u0026#34;stableBufferTime\u0026#34;: 24, \u0026#34;bufferTimeAtTopQuality\u0026#34;: 24, \u0026#34;bufferTimeAtTopQualityLongForm\u0026#34;: 20 } }, \u0026#34;debug\u0026#34;: { \u0026#34;logLevel\u0026#34;: 4 } } Dashåè®®å’ŒABRç®—æ³• åœ¨è§£é‡ŠBBA0ç®—æ³•åŸç†ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹è§†é¢‘æµå¼ä¼ æ’­çš„åŸç†ã€‚\nåŒºåˆ«äºä¹‹å‰å°†æ•´ä¸ªè§†é¢‘ç¼“å­˜åˆ°æœ¬åœ°å†æ’­æ”¾çš„æŠ€æœ¯ï¼Œæµå¼ä¼ è¾“å…è®¸ä¸€è¾¹ä¸‹è½½ä¸€è¾¹æ’­æ”¾ã€‚æ‰€é‡‡å–çš„æ–¹æ³•æ˜¯å°†è§†é¢‘å’ŒéŸ³é¢‘åˆ‡å‰²æˆä¸€å°æ®µä¸€å°æ®µçš„è§†é¢‘ï¼Œæ¯ä¸ªè§†é¢‘åŒ…å«å‡ ç§’é’Ÿçš„å†…å®¹ã€‚å®¢æˆ·ç«¯ä¼šåœ¨æœ¬åœ°ç»´æŠ¤ä¸€ä¸ªç¼“å†²åŒºbufferï¼Œæ¯æ¬¡æ’­æ”¾åˆ°Tæ—¶åˆ»åï¼Œä¼šè¯·æ±‚åç»­[T,T+k]æ—¶é—´æ®µå†…çš„è§†é¢‘å—ï¼Œç„¶åä¿å­˜åœ¨æœ¬åœ°çš„bufferé‡Œï¼Œè¿™æ ·å°±å¯ä»¥å®ç°è¾¹ä¸‹è¾¹æ’­ã€‚\nåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œä¸åŒå®¢æˆ·ç«¯é¢ä¸´çš„ç½‘ç»œçŠ¶å†µä¸åŒï¼Œå› æ­¤æœåŠ¡å™¨éœ€è¦å‡†å¤‡ä¸åŒç ç‡çš„è§†é¢‘å—ï¼Œä»¥æ ¹æ®ç½‘ç»œæƒ…å†µï¼ŒåŠ¨æ€è°ƒæ•´ä¼ è¾“çš„è§†é¢‘è´¨é‡ã€‚\nDashåè®®ç®€è¿° Dash (Dynamic Adaptive Streaming over HTTP)åè®®æ˜¯ä¸€ç§è‡ªé€‚åº”åŠ¨æ€é€‰æ‹©ä¼ è¾“ç ç‡çš„ä¼ è¾“åè®®ã€‚Dashè¦æ±‚æœåŠ¡å™¨å‡†å¤‡ä¸åŒç ç‡å’Œåˆ†è¾¨ç‡çš„è§†é¢‘åˆ‡ç‰‡å’ŒMPDæ–‡ä»¶ï¼Œè§†é¢‘ä¼ è¾“æ—¶ï¼Œé¦–å…ˆè¯·æ±‚MPDæ–‡ä»¶å¹¶è¿›è¡Œè§£æã€‚ä¹‹åï¼Œå®¢æˆ·ç«¯ä¼šæ ¹æ®ç½‘ç»œæƒ…å†µï¼Œbufferæ°´å¹³ç­‰ä¿¡æ¯å¯¹åç»­è§†é¢‘ç ç‡çš„è¯·æ±‚è¿›è¡ŒåŠ¨æ€è°ƒæ•´ã€‚ä¸‹å›¾å¾ˆå¥½åœ°æè¿°äº†Dashç³»ç»Ÿçš„å·¥ä½œåŸç†ã€‚\nå…¶ä¸­çš„MPDæ–‡ä»¶åŒ…å«äº†è§†é¢‘åˆ‡ç‰‡åˆ—è¡¨ï¼Œä»¥åŠæ¯ä¸ªåˆ‡ç‰‡çš„æè¿°ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç ç‡ã€åˆ†è¾¨ç‡ç­‰ï¼‰ã€‚æ–‡ä»¶ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nABRç®—æ³•ç®€ä»‹ ABRç®—æ³•ï¼ˆè‡ªé€‚åº”ç ç‡è°ƒèŠ‚ç®—æ³•ï¼‰çš„ç›®çš„æ˜¯è®©ç”¨æˆ·æœ‰æ›´å¥½çš„è§‚çœ‹è§†é¢‘ä½“éªŒã€‚ABRç®—æ³•çš„è¯„ä»·æ ‡å‡†ä¸ºç”¨æˆ·ä½“éªŒè´¨é‡ (QoD, Quality of Experience)ï¼ŒåŒ…æ‹¬é«˜è§†é¢‘è´¨é‡ã€ä½å¡é¡¿æ—¶é—´ã€å°‘è´¨é‡åˆ‡æ¢ã€ä½å¯åŠ¨å»¶è¿Ÿç­‰ã€‚\nBBA0ç®—æ³• BBA0ç®—æ³•çš„jså®ç°ä»£ç å¦‚ä¸‹ï¼š\n/*global dashjs*/ let CustomBBA0Rule; function CustomBBA0RuleClass() { let factory = dashjs.FactoryMaker; let SwitchRequest = factory.getClassFactoryByName(\u0026#39;SwitchRequest\u0026#39;); let DashMetrics = factory.getSingletonFactoryByName(\u0026#39;DashMetrics\u0026#39;); let Debug = factory.getSingletonFactoryByName(\u0026#39;Debug\u0026#39;); let context = this.context; let instance, logger; const reservoir = 5; const cushion = 10; let ratePrev = 0; function setup() { logger = Debug(context).getInstance().getLogger(instance); } function getMaxIndex(rulesContext) { let mediaInfo = rulesContext.getMediaInfo(); let mediaType = mediaInfo.type; if (mediaType != \u0026#34;video\u0026#34;) { return SwitchRequest(context).create(0); } let abrController = rulesContext.getAbrController(); let dashMetrics = DashMetrics(context).getInstance(); let rateMap = {}; let bitrateList = abrController.getBitrateList(mediaInfo) .map(function(bitrateInfo){ return bitrateInfo.bitrate; }); let bitrateCnt = bitrateList.length; let step = cushion / (bitrateCnt - 1); for (let i = 0; i \u0026lt; bitrateCnt; i++) { rateMap[reservoir + i * step] = bitrateList[i]; } let rateMin = bitrateList[0]; let rateMax = bitrateList[bitrateCnt - 1]; ratePrev = ratePrev \u0026gt; rateMin ? ratePrev : rateMin; let ratePlus = rateMax; let rateMinus = rateMin; if (ratePrev === rateMax) { ratePlus = rateMax; } else { for (let i = 0; i \u0026lt; bitrateCnt; i++) { if (bitrateList[i] \u0026gt; ratePrev) { ratePlus = bitrateList[i]; break; } } } if (ratePrev === rateMin) { rateMinus = rateMin; } else { for (let i = bitrateCnt - 1; i \u0026gt;= 0; i--) { if (bitrateList[i] \u0026lt; ratePrev) { rateMinus = bitrateList[i]; break; } } } let currentBufferLevel = dashMetrics.getCurrentBufferLevel(mediaType, true); let func = function(bufferLevel) { if (bufferLevel \u0026lt; reservoir) { return rateMap[cushion + reservoir]; } else if (bufferLevel \u0026gt; cushion + reservoir) { return rateMap[reservoir]; } else { let index = Math.round((bufferLevel - reservoir) / step) *step + reservoir; return rateMap[index]; } }; let fBufferLevel = func(currentBufferLevel); let rateNext; if(currentBufferLevel \u0026lt;= reservoir) { rateNext = rateMin; } else if (currentBufferLevel \u0026gt;= cushion + reservoir) { rateNext = rateMax; } else if (fBufferLevel \u0026gt;= ratePlus) { for (let i = bitrateCnt; i \u0026gt;= 0; i--) { if (bitrateList[i] \u0026lt;= fBufferLevel) { rateNext = bitrateList[i]; break; } } } else if (fBufferLevel \u0026lt;= rateMinus) { for (let i = 0; i \u0026lt; bitrateCnt; i++) { if (bitrateList[i] \u0026gt; fBufferLevel) { rateNext = bitrateList[i]; break; } } } else { rateNext = ratePrev; } let quality = 0; for (let i = 0; i \u0026lt; bitrateCnt; i++) { if (bitrateList[i] == rateNext) { quality = i; break; } } logger.info(\u0026#34;[BBA0Rule] CurrentBufferLevel = \u0026#34; + currentBufferLevel); logger.info(\u0026#34;[BBA0Rule] Bitrate list = \u0026#34; + bitrateList); logger.info(\u0026#34;[BBA0Rule] Previous bitrate = \u0026#34; + ratePrev); logger.info(\u0026#34;[BBA0Rule] Next bitrate = \u0026#34; + rateNext); logger.info(\u0026#34;[BBA0Rule] Quality = \u0026#34; + quality); ratePrev = rateNext; return SwitchRequest(context).create( quality, { name: CustomBBA0RuleClass.__dashjs_factory_name }, SwitchRequest.PRIORITY.STRONG ); } instance = { getMaxIndex: getMaxIndex }; setup(); return instance; } CustomBBA0RuleClass.__dashjs_factory_name = \u0026#39;CustomBBA0Rule\u0026#39;; CustomBBA0Rule = dashjs.FactoryMaker.getClassFactory(CustomBBA0RuleClass); è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„åŸºäºç¼“å†²åŒºçš„è‡ªé€‚åº”æ¯”ç‰¹ç‡è°ƒæ•´è§„åˆ™ï¼Œç§°ä¸º BBA0Ruleã€‚ä¸‹é¢æ˜¯ç®—æ³•çš„åŸºæœ¬åŸç†å’Œè§£é‡Šï¼š\nç¼“å†²åŒºåˆ†çº§ï¼š\nè§„åˆ™å°†ç¼“å†²åŒºåˆ†ä¸ºä¸¤ä¸ªåŒºé—´ï¼šreservoir å’Œ cushionã€‚Reservoir æ˜¯ä¸€ä¸ªè¾ƒå°çš„ç¼“å†²åŒºåŸŸï¼Œcushion æ˜¯ä¸€ä¸ªè¾ƒå¤§çš„ç¼“å†²åŒºåŸŸã€‚ å¦‚æœå½“å‰ç¼“å†²åŒºä½äº reservoirï¼Œåˆ™ä¼šé€‰æ‹©æœ€é«˜æ¯”ç‰¹ç‡ã€‚ å¦‚æœå½“å‰ç¼“å†²åŒºé«˜äº cushion + reservoirï¼Œåˆ™ä¼šé€‰æ‹©æœ€ä½æ¯”ç‰¹ç‡ã€‚ åœ¨ä¸¤ä¸ªåŒºé—´ä¹‹é—´ï¼Œæ ¹æ®å½“å‰ç¼“å†²åŒºçš„ä½ç½®ï¼Œçº¿æ€§åœ°åˆ†é…æ¯”ç‰¹ç‡ã€‚ æ¯”ç‰¹ç‡è°ƒæ•´ï¼š\nå¦‚æœå½“å‰ç¼“å†²åŒºä½äº reservoirï¼Œé€‰æ‹©æœ€é«˜æ¯”ç‰¹ç‡ã€‚ å¦‚æœå½“å‰ç¼“å†²åŒºé«˜äº cushion + reservoirï¼Œé€‰æ‹©æœ€ä½æ¯”ç‰¹ç‡ã€‚ å¦‚æœå½“å‰ç¼“å†²åŒºåœ¨ä¸¤ä¸ªåŒºé—´ä¹‹é—´ï¼Œåˆ™æ ¹æ®å½“å‰ç¼“å†²åŒºçš„ä½ç½®çº¿æ€§åœ°è°ƒæ•´æ¯”ç‰¹ç‡ã€‚ è®¡ç®—å½“å‰ç¼“å†²åŒºåœ¨ä¸¤ä¸ªåŒºé—´ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ï¼š é¦–å…ˆï¼Œç®—æ³•è®¡ç®—å½“å‰ç¼“å†²åŒºæ°´å¹³ç›¸å¯¹äº reservoir çš„ä½ç½®ï¼Œå³å½“å‰ç¼“å†²åŒºæ°´å¹³å‡å» reservoirã€‚ç„¶åï¼Œå®ƒå°†è¿™ä¸ªç›¸å¯¹ä½ç½®é™¤ä»¥ cushion å‡å» reservoirï¼Œå¾—åˆ°ä¸€ä¸ªä»‹äº 0 åˆ° 1 ä¹‹é—´çš„å€¼ï¼Œè¡¨ç¤ºå½“å‰ç¼“å†²åŒºåœ¨ä¸¤ä¸ªåŒºé—´ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ã€‚ çº¿æ€§æ’å€¼ï¼š ç„¶åï¼Œç®—æ³•ä½¿ç”¨è¿™ä¸ªç›¸å¯¹ä½ç½®æ¥è¿›è¡Œçº¿æ€§æ’å€¼ã€‚å®ƒå°†ç›¸å¯¹ä½ç½®ä¹˜ä»¥ bitrateList ä¸­ç›¸é‚»æ¯”ç‰¹ç‡çš„å·®å¼‚ï¼Œç„¶ååŠ ä¸Š reservoir å¯¹åº”çš„æ¯”ç‰¹ç‡ã€‚è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªä»‹äºæœ€å°å’Œæœ€å¤§æ¯”ç‰¹ç‡ä¹‹é—´çš„æ’å€¼æ¯”ç‰¹ç‡ï¼Œè¿™ä¸ªæ’å€¼æ¯”ç‰¹ç‡å–å†³äºå½“å‰ç¼“å†²åŒºçš„æ°´å¹³ã€‚ é€‰æ‹©æ¯”ç‰¹ç‡ï¼š æœ€åï¼Œæ ¹æ®çº¿æ€§æ’å€¼å¾—åˆ°çš„æ¯”ç‰¹ç‡ï¼Œç®—æ³•å°†å…¶ä½œä¸ºä¸‹ä¸€ä¸ªé€‰æ‹©çš„æ¯”ç‰¹ç‡ã€‚è¿™ä¸ªæ’å€¼æ¯”ç‰¹ç‡åœ¨ä¸¤ä¸ªåŒºé—´ä¹‹é—´æä¾›äº†ä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡ï¼Œä½¿å¾—åœ¨ç¼“å†²åŒºæ°´å¹³å˜åŒ–æ—¶ï¼Œæ¯”ç‰¹ç‡çš„è°ƒæ•´æ›´åŠ è¿ç»­å’Œå¹³ç¨³ã€‚ å˜é‡ï¼š\nreservoirï¼šè¾ƒå°çš„ç¼“å†²åŒºåŸŸå¤§å°ã€‚ cushionï¼šè¾ƒå¤§çš„ç¼“å†²åŒºåŸŸå¤§å°ã€‚ ratePrevï¼šä¸Šä¸€ä¸ªé€‰æ‹©çš„æ¯”ç‰¹ç‡ã€‚ rateMapï¼šç”¨äºå­˜å‚¨ä¸åŒç¼“å†²åŒºæ°´å¹³ä¸‹çš„æ¯”ç‰¹ç‡ã€‚ å®ç°ç»†èŠ‚ï¼š\nè§„åˆ™é€šè¿‡è·å–åª’ä½“ä¿¡æ¯ã€ABR æ§åˆ¶å™¨å’Œ Dash æŒ‡æ ‡ç­‰æ¥æ‰§è¡Œå†³ç­–ã€‚ é€šè¿‡è°ƒæ•´å½“å‰ç¼“å†²åŒºæ°´å¹³æ¥é€‰æ‹©é€‚å½“çš„æ¯”ç‰¹ç‡ã€‚ è®°å½•æ¯æ¬¡çš„é€‰æ‹©ï¼Œä»¥ä¾¿ä¸‹ä¸€æ¬¡é€‰æ‹©æ—¶ä½¿ç”¨ã€‚ æ—¥å¿—è¾“å‡ºï¼š\nåœ¨é€‰æ‹©æ¯”ç‰¹ç‡æ—¶è¾“å‡ºç›¸å…³çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬å½“å‰ç¼“å†²åŒºæ°´å¹³ã€æ¯”ç‰¹ç‡åˆ—è¡¨ã€ä¸Šä¸€ä¸ªé€‰æ‹©çš„æ¯”ç‰¹ç‡ã€ä¸‹ä¸€ä¸ªé€‰æ‹©çš„æ¯”ç‰¹ç‡å’Œé€‰æ‹©çš„è´¨é‡ç­‰ä¿¡æ¯ã€‚ è¿™ç§è§„åˆ™çš„æ ¸å¿ƒæ€æƒ³æ˜¯æ ¹æ®å½“å‰ç¼“å†²åŒºçš„çŠ¶æ€æ¥è°ƒæ•´æ¯”ç‰¹ç‡ï¼Œä»¥å¹³è¡¡è§†é¢‘è´¨é‡å’Œæ’­æ”¾çš„è¿ç»­æ€§ã€‚Bufferæ°´å¹³ä¸è§†é¢‘é€Ÿç‡çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\né™é€Ÿæ¡ä»¶ä¸‹æµ‹è¯•Dashç³»ç»Ÿ linuxç³»ç»Ÿè‡ªå¸¦çš„tcå‘½ä»¤å¯ä»¥å¯¹ç½‘ç»œå¸¦å®½è¿›è¡Œé™åˆ¶ã€‚\né¦–å…ˆå¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤æ¥è·å–ç½‘å¡åç§°ï¼š\nifconfig å…¶ä¸­ï¼Œens33å³ä¸ºç½‘å¡åç§°ï¼Œä¸‹é¢çš„192.168.133.128ä¸ºä¸»æœºipåœ°å€ã€‚\næ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¯ä»¥ä¸ºç½‘å¡é™åˆ¶å¸¦å®½ï¼š\ntc qdisc add dev ens33 root tbf rate 500Kbit latency 50ms burst 15kb #å°†eth0ç½‘å¡é™é€Ÿåˆ°500Kbit/sï¼Œ15bkçš„bufferï¼ŒTBFæœ€å¤šäº§ç”Ÿ50msçš„å»¶è¿Ÿ #tbfæ˜¯Token Bucket Filterçš„ç®€å†™ï¼Œé€‚åˆäºæŠŠæµé€Ÿé™ä½åˆ°æŸä¸ªå€¼ æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯ä»¥å–æ¶ˆé™åˆ¶ï¼š\ntc qdisc del dev ens33 root å•ä¸€é™é€Ÿæ¡ä»¶ æ— é™é€Ÿæ¡ä»¶ å¯ä»¥çœ‹åˆ°ç¼“å†²åŒºå¤§å°ç¨³å®šçš„ä¸Šä¸‹æ³¢åŠ¨ï¼Œè§†é¢‘æ’­æ”¾ä¸ºæœ€é«˜è´¨é‡ï¼Œè¯´æ˜æ­¤æ—¶ç½‘ç»œè¾ƒä¸ºç¨³å®šä¸”ç½‘é€Ÿè¾ƒå¿«ï¼Œå¯ä»¥å®Œæˆâ€œè¾¹ä¸‹è¾¹æ’­â€çš„ä»»åŠ¡ã€‚\né™é€Ÿ300kbï¼Œ15kb bufferï¼Œæœ€å¤§50mså»¶è¿Ÿ æ­¤æ—¶ç½‘é€Ÿè¾ƒæ…¢ï¼Œè§†é¢‘å¾ˆå¡é¡¿ã€‚è§†é¢‘è´¨é‡å’Œbufferæ°´å¹³éƒ½å¾ˆä½ã€‚\né™é€Ÿ800kbï¼Œ15kb bufferï¼Œæœ€å¤§50mså»¶è¿Ÿ æ­¤æ—¶è§†é¢‘è´¨é‡å’Œbufferæ°´å¹³è¾ƒ300kbæ—¶å‡æœ‰ä¸Šå‡ï¼Œä½†è§†é¢‘è´¨é‡ä»ç„¶ä¸€èˆ¬ã€‚\næ¨¡æ‹Ÿç½‘ç»œæ³¢åŠ¨æƒ…å†µ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œè¯¥pythonæ–‡ä»¶ï¼Œæ¥æ§åˆ¶ç½‘é€Ÿä¸æ–­å‘ç”Ÿå˜åŒ–ã€‚\n#æ§åˆ¶å¸¦å®½éšæ—¶é—´å˜åŒ– import os import json import time tpt = [300,500,700,900,1200,1800,2000,1500,1200,900,700,500,300] while 1: for v in tpt: os.system(\u0026#34;sudo tc qdisc add dev eth0 root tbf rate {}kbit latency 50ms burst 15kb\u0026#34;.format(v)) print(v) time.sleep(5) os.system(\u0026#34;sudo tc qdisc del dev eth0 root\u0026#34;) bufferæ°´å¹³å’Œè§†é¢‘ç ç‡å˜åŒ–å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nå¯ä»¥çœ‹å‡ºï¼Œå½“bufferæ°´å¹³å‡é«˜æ—¶ï¼Œä¼šå¯¼è‡´è§†é¢‘åˆ‡æ¢åˆ°æ›´é«˜çš„ç ç‡ï¼›bufferæ°´å¹³ä¸‹é™æ—¶ï¼Œä¼šè®©è§†é¢‘åˆ‡æ¢åˆ°æ›´ä½çš„ç ç‡ã€‚åŒæ—¶bufferä¹Ÿåœ¨ä¸æ–­çš„æ¶ˆè€—å’Œè¡¥å……ã€‚\n","permalink":"https://m1yan.github.io/posts/dash%E5%AE%9E%E9%AA%8C/","summary":"\u003ch2 id=\"dashç³»ç»Ÿæ­å»ºæµç¨‹\"\u003eDASHç³»ç»Ÿæ­å»ºæµç¨‹\u003c/h2\u003e\n\u003ch3 id=\"å®¢æˆ·ç«¯æ­å»º\"\u003eå®¢æˆ·ç«¯æ­å»º\u003c/h3\u003e\n\u003cp\u003eé¦–å…ˆï¼Œç”¨gitå‘½ä»¤å°†\u003ccode\u003edash.js\u003c/code\u003eä¸‹è½½åˆ°æœ¬åœ°.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e git clone https://github.com/Dash-Industry-Forum/dash.js.git\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eåœ¨dash.jsç›®å½•ä¸‹ï¼Œç¼–è¯‘è¿è¡Œ\u003ccode\u003edash.js\u003c/code\u003e.\u003c/p\u003e","title":"DASHå®éªŒæŠ¥å‘Š"},{"content":"å†™åœ¨å¼€å¤´ åˆ«èµ¶è·¯ï¼Œå»æ„Ÿå—è·¯ã€‚\nä¸Šé¢è¿™å¥è¯æ˜¯å‚åŠ æŸæ¬¡ç»éªŒåˆ†äº«æ´»åŠ¨ä¸€ä½å­¦é•¿è¯´è¿‡çš„è¯ï¼Œå½“æ—¶æœ¬äººå¿™äºæ··ç»¼æµ‹åˆ†å’Œå†™ä½œä¸šï¼Œå¯¹è¿™å¥è¯å—¤ä¹‹ä»¥é¼»ï¼Œä»¥ä¸ºä¸è¿‡æ˜¯å¥æ¼‚äº®è¯ç½¢äº†ã€‚ä½†æ˜¯å½“æˆ‘ç«™åœ¨2023å¹´ç»ˆæ—¶ï¼Œæˆ‘ä¸ç¦å¼€å§‹å›å¿†ï¼Œè¿™ä¸€å¹´æˆ‘ç©¶ç«Ÿæ„Ÿå—äº†ä»€ä¹ˆï¼Œåˆä½“éªŒåˆ°äº†ä»€ä¹ˆï¼Œæœ‰æ²¡æœ‰äº«å—è·¯é€”ä¸­çš„é£æ™¯ï¼ŒæŠ‘æˆ–åªæ˜¯åŸ‹å¤´è¿½å¯»é‚£ä¸ªæ°¸æ— æ­¢å¢ƒçš„ç»ˆç‚¹ã€‚æˆ‘ä»¬æ€»æ˜¯æŠŠâ€œç»“æŸâ€æå†™ä¸ºâ€œå°˜åŸƒè½å®šâ€ï¼Œä½†å…¶å®å°˜åŸƒè½å®šçš„é‚£ä¸€åˆ¹é‚£ï¼Œæ˜¯æ¯«æ— æ„ä¹‰çš„ï¼ŒçœŸæ­£æœ‰è¶£çš„æ˜¯çœ‹å°˜åŸƒåœ¨é˜³å…‰ä¸­é£æ‰¬çš„æ ·å­ï¼Œçœ‹å®ƒä»¬æ€ä¹ˆé£˜è½¬ï¼Œæ€ä¹ˆè·Œå®•ï¼Œåˆæ€ä¹ˆæˆ–æ— å¯å¥ˆä½•æˆ–æ¬£å–œè‹¥ç‹‚åœ°å¥”å‘åœ°é¢ã€‚\nä¸ºäº†å¥½å¥½æ€»ç»“æ€»ç»“è¿™ä¸€å¹´ï¼Œæˆ‘ä¸“é—¨å»ç¿»äº†ç¿»è‡ªå·±è¿™ä¸€å¹´æ‹çš„ç…§ç‰‡ï¼Œå‘ç°è¿™ä¸€å¹´è¿˜æ˜¯éå¸¸ä¸°å¯Œå“ˆå“ˆå“ˆã€‚å¤§æ¦‚æ˜¯è§è¯äº†ä»æ–°å† åˆšåˆšç»“æŸç”Ÿæ´»å¼€å§‹å¤è‹åˆ°å¦‚ä»Šå·®ä¸å¤šå¿«è¦å¿˜æ‰ç–«æƒ…çš„ä¸€æ®µæ—¶é—´ï¼Œä»ç…§ç‰‡ä¸­ä¹Ÿèƒ½çœ‹å‡ºæ¥å¹´åˆå’Œå¹´æœ«çš„ç‹åºœäº•å·¨å¤§çš„äººæµå·®è·â€¦â€¦æ€»ä¹‹å°‘äº†ç–«æƒ…è¿™ä¸ªå·¨å¤§éšœç¢ï¼Œåœ¨åŒ—äº¬çš„ç”Ÿæ´»è´¨é‡æ”¹å–„äº†ä¸å°‘ã€‚å¯ä»¥è¯´2023å¹´æ‰æ˜¯æˆ‘å¤§å­¦ç”Ÿæ´»çš„çœŸæ­£å¼€å§‹ã€‚\näº¬é„‚ä¹‹æ—… 2023å¹´çš„å‰å‡ ä¸ªæœˆï¼Œé€›äº†å¾ˆå¤šåŒ—äº¬çš„æ ¡å›­å’Œæ™¯ç‚¹ï¼Œå±äºæ˜¯ä¸€ä¸ªç–«æƒ…æ”¾å¼€ä¹‹åçš„æŠ¥å¤æ€§æ¸¸ç©ã€‚ç¬¬ä¸€ç«™å»äº†æ±‰è‡£å¼Ÿå¼Ÿæ‰€åœ¨çš„äººå¤§ã€‚\näººå¤§å¾ˆç¾ï¼Œäººæ–‡æ°”æ¯ä¹Ÿå¾ˆæµ“ï¼Œè€Œä¸”æ±‰è‡£å¼Ÿå¼Ÿå¸¦æˆ‘ä»¬å»åƒäº†äººå¤§çš„æ±‡è´¤åºœï¼Œæ®è¯´æ˜¯äººå¤§é¢†å¯¼è¯·åƒé¥­çš„åœ°æ–¹å“ˆå“ˆå“ˆã€‚ä¸è¿‡é‡Œé¢çš„ä¸€äº›æ–°å¼é²èœç¡®å®æœ‰ç‚¹ä¸œè¥¿ï¼Œé™¤äº†é‚£ä¸ªç‚’é¸¡ä¸å¦‚ä¸´æ²‚ç‚’é¸¡å¥½åƒï¼Œå…¶ä¸­ä¸€é“é£å‘³èŒ„å­æ¯”ä¼ ç»Ÿé²èœæ¸…æ·¡äº†å¾ˆå¤šï¼Œæ˜¯ç»¿è‰²çš„ï¼Œè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ã€‚\nä¸‹ä¸€ç«™æ˜¯ä¸‰é‡Œå±¯ï¼Œä¸ºäº†æ‘†è„±æˆ‘å¯¹åŒ—äº¬å¤§å†œæ‘çš„å°è±¡ï¼Œé‚£è‚¯å®šå¾—å»æœé˜³åŒºé€›é€›ã€‚å½“æ—¶å»çš„æ—¶å€™äººè¿˜æ˜¯è›®å¤šçš„ï¼Œè€Œä¸”ç¬¬ä¸€æ¬¡è¿›äº†ä¸‰é‡Œå±¯çš„è‹¹æœåº—ï¼Œæœ‰ä¸€è¯´ä¸€è£…ä¿®çš„ç¡®å®ä¸é”™ã€‚ä¸è¿‡å¾ˆæ˜æ˜¾ä¸‰é‡Œå±¯çš„å¤§éƒ¨åˆ†åº—éƒ½æ¶ˆè´¹ä¸èµ·å“ˆå“ˆå“ˆï¼Œæœ€ååªèƒ½å»é€›ä¼˜è¡£åº“æ¥ç€ï¼Œè¿˜ä¹°äº†ä¸€ä»¶å¾ˆæ»¡æ„çš„è¡£æœã€‚\nç„¶åå»äº†ç‹åºœäº•å’Œå¤©å®‰é—¨ï¼Œå¯ä»¥çœ‹åˆ°å½“æ—¶è¡—ä¸Šçš„äººè¿˜ä¸æ˜¯ç‰¹åˆ«å¤šã€‚\nç„¶åè¿æ¥äº†æˆ‘åœ¨ä»–ä¹¡çš„ç¬¬ä¸€ä¸ªç”Ÿæ—¥ï¼Œèˆå‹ä»¬ä¸“é—¨é™ªæˆ‘å»æµ·åº•æç¤¾æ­»å“ˆå“ˆå“ˆï¼Œæˆ‘ä»¬çº¦å®šå¥½ä»¥åæ¯ä¸ªèˆå‹è¿‡ç”Ÿæ—¥éƒ½æ¥ä¸€æ¬¡æµ·åº•æï¼Œäºæ˜¯ä¸€å¹´æ”’äº†ä¸‰å¼ æµ·åº•æå†²æ´—ç…§ç‰‡å“ˆå“ˆå“ˆå“ˆã€‚\nä¸‹ä¸€ç«™æ˜¯æ¸…åå¤§å­¦ï¼Œæ¸…åæ˜¯çœŸçš„å¤ªå¤§äº†ï¼Œå¦‚æœè¯´åŒ—é‚®æ˜¯ä¸ªå°åŒºï¼Œé‚£æ¸…åå°±æ˜¯ä¸€ä¸ªå¤§å‹ç¤¾åŒºwwwwwï¼Œèµ°åœ¨æ ¡å›­é‡Œæœ‰ä¸€ç§éšæ—¶å¯èƒ½è¿·è·¯çš„æ„Ÿè§‰ã€‚è€Œä¸”æ¸…åçš„å»ºç­‘ä½“é‡éƒ½ç‰¹åˆ«å¤§ï¼Œä¸€çœ¼è¿‡å»éƒ½æ˜¯æ–¹æ–¹æ­£æ­£çš„å·¨å‹å­¦é™¢æ¥¼ã€‚å°¤å…¶æ˜¯ä»–ä»¬æ–°å»ºçš„æ–°ç»ç®¡æ¥¼ï¼ŒçœŸçš„å¯ä»¥ä½“ç°å‡ºæ¸…åçš„ç»è´¹å……è¶³å“ˆå“ˆå“ˆå“ˆ~è€Œä¸”æ¸…åçš„é£Ÿå ‚æ˜¯çœŸçš„å¤šï¼Œæœ‰äº›å°é£Ÿå ‚ç”šè‡³åˆ†å¸ƒåœ¨å®¿èˆæ¥¼è¿å»Šä¸Šï¼Œæ„Ÿè§‰éå¸¸çš„äººæ€§åŒ–ã€‚æˆ‘ä»¬èµ°ä¸€ä¼šéª‘ä¸€ä¼šï¼Œè·Ÿç€éƒ‘æ€»é€›äº†å¤§éƒ¨åˆ†æ ¡å›­ã€‚\nå¾€åçš„ä¸‰æœˆå’Œå››æœˆæˆ–è®¸çœŸçš„å¾ˆå¿™ï¼Œç›¸å†Œé‡Œåªå‰©ä¸‹æ‹çš„å„ç§pptå’Œé¢åŒ…æ¿å’Œç¤ºæ³¢å™¨é¢æ¿ã€‚ä¸è¿‡å¥½åœ¨å¿™é‡Œå·é—²ï¼Œè¿˜æ˜¯è·Ÿè‘«èŠ¦å¨ƒä¸ƒå…„å¼Ÿä»¬å»äº†è¶Ÿä»€åˆ¹æµ·ï¼Œè¿˜é€›äº†æ²™èˆªã€‚æ²™èˆªç¦»æˆ‘ä»¬æ²™é‚®å°±å‡ æ­¥è·¯ï¼Œæ‰€ä»¥ä¸²é—¨æ˜¯çœŸçš„éå¸¸æ–¹ä¾¿å“ˆå“ˆå“ˆã€‚ä¸è¿‡å»çœ‹äº†å“¥ä»¬çš„å®¿èˆä¹‹åï¼Œæ„Ÿè§‰æ²™é‚®çš„å®¿èˆè¿˜æ˜¯æŒºèƒ½æ‰“çš„ï¼Œè‡³å°‘å¤šä¸€ä¸ªç‹¬ç«‹çš„å«ç”Ÿé—´å“ˆå“ˆå“ˆå“ˆã€‚\nå››æœˆæ˜¯ä¸ç®—æ„‰å¿«çš„ä¸€ä¸ªæœˆï¼Œå°å°åœ°æµªè´¹äº†ä¸€ä¸‹è‡ªå·±çš„æ„Ÿæƒ…ä¹‹ååªèƒ½è¯´ï¼Œæ„Ÿæƒ…è¿™ä¸œè¥¿å¯èƒ½ä¹Ÿæ˜¯ä¸ªå›´åŸå§ã€‚ä¸èº«å¤„å…¶ä¸­çš„æ—¶å€™å¯èƒ½ä¼šå‘å¾€åŸå†…çš„ç”Ÿæ´»ï¼ŒçœŸçš„åœ¨åŸå†…äº†æ‰è§‰å¾—æ²¡æœ‰è‡ªå·±å¹»æƒ³çš„é‚£ä¹ˆç¾å¥½ã€‚ã€‚ä¹Ÿå¯èƒ½çœŸçš„æ˜¯ç¼˜åˆ†å’Œæ—¶æœºéƒ½æ²¡åˆ°ï¼Œæ—¶é—´ä¼šæ”¹å˜ä¸€åˆ‡çš„å§ã€‚\nè¿›å…¥äº”æœˆï¼Œæˆ‘å’Œéƒ‘æ€»æ±‰è‡£åœ¨åŠ³åŠ¨èŠ‚é‚£å¤©å»çˆ¬äº†é¦™å±±ã€‚å°è±¡æœ€æ·±çš„æ˜¯çˆ¬å±±çš„ä¸€è·¯ä¸Šæˆ‘ä»¬éƒ½åœ¨å–Šç´¯å“ˆå“ˆå“ˆï¼Œåªèƒ½è¯´å¤§å­¦æ—¶çš„ä½“è´¨å’Œç²¾åŠ›å±…ç„¶ä¸å¦‚å½“æ—¶èµ·æ—©è´ªé»‘çš„é«˜ä¸­æ—¶å€™ï¼Œè¿˜æŒºç¥å¥‡çš„ã€‚é¦™å±±ä¸€è·¯ä¸Šçš„é£æ™¯çœŸçš„å¾ˆç¾ï¼Œç»¿åŒ–å¾ˆå¥½ï¼Œç©ºæ°”ä¹Ÿå¾ˆæ¸…æ–°ï¼Œæ€»ä¹‹æ˜¯ä¸€æ¬¡å¾ˆéš¾å¿˜çš„çˆ¬å±±ä½“éªŒã€‚\nè¶ç€åŠ³åŠ¨èŠ‚å‡æœŸï¼Œç»ˆäºæœ‰å¹¸è¿›å…¥å…„å¼Ÿé™¢æ ¡åŒ—å¸ˆå¤§å‚è§‚ã€‚æ˜æ˜åªéš”ç€ä¸€æ¡é©¬è·¯ï¼Œéš”å£çš„æ ¡å›­çœŸçš„æ˜¯ç»¿åŒ–å’Œäººæ–‡æ°”æ¯éƒ½æ‹‰æ»¡ï¼Œå°¤å…¶æ˜¯ç»¿åŒ–ï¼ŒçœŸçš„éšå¤„å¯è§èŠ±èŠ±è‰è‰è¿˜æœ‰é‚£ç§ä¸€çœ‹å°±ä¸Šäº†å¹´å¤´çš„å¤æ ‘ã€‚å½“æ—¶æ­£å¥½éƒé‡‘é¦™åœ¨å¼€ï¼Œå¼€åœ¨è‰åªä¸Šé¢ï¼Œç¾çš„å¾ˆä¸çœŸå®ã€‚\nè¿˜æœ‰ä¸€ä¸ªå¤§çš„æ”¶è·ï¼Œç»ˆäºåƒåˆ°äº†ä¼ è¯´ä¸­çš„é‡‘è°·å›­æ°´é¥ºã€‚åœ¨æ’äº†è‹¥å¹²åˆ†é’Ÿçš„é˜Ÿä¹‹åç»ˆäºæœ‰ç©ºæ¡Œç»™æˆ‘ä»¬åã€‚é‡‘è°·å›­çš„ç‰¹è‰²æ°´é¥ºæ˜¯é²…é±¼é¦…é¥ºå­ï¼Œä¸ªå¤´å¤§è€Œä¸”åƒèµ·æ¥éå¸¸æ°´æ¶¦å“ˆå“ˆå“ˆï¼ˆæˆ–è®¸è¿™ä¸ªå°±æ˜¯ä»–ä»¬çš„ç‰¹è‰²ï¼‰ã€‚å½“æ—¶è¿˜ç‚¹äº†ä¸€äº›å…¶ä»–æ°´é¥ºå’Œå°èœï¼Œä½†å‘³é“æœ€å¥½çš„è¿˜æ˜¯é²…é±¼é¥ºå­å’Œæ¤’éº»é¸¡ã€‚æƒ³åˆ°ä»¥åæ¥æœ¬éƒ¨å¯ä»¥ç»å¸¸æ¥åƒï¼Œå¯¹æœ¬éƒ¨çš„è‰°è‹¦ç¯å¢ƒæœ‰äº†é‚£ä¹ˆä¸€ä¸ä¸çš„å¥½æ„Ÿå“ˆå“ˆå“ˆå“ˆã€‚\nåœ¨äº”æœˆåº•ï¼Œæˆ‘å’Œæ¶›å»äº†é¸Ÿå·¢ï¼Œå»åœºå¤–å½“äº”æœˆå¤©æ¼”å”±ä¼šå¬ä¼—ã€‚å› ä¸ºå½“æ—¶æ˜¯ç–«æƒ…æ”¾å¼€åé¸Ÿå·¢çš„ç¬¬ä¸€æ¬¡å¤§å‹æ¼”å‡ºï¼Œæ‰€ä»¥åœºå¤–çš„è§‚ä¼—ç‰¹ç‰¹ç‰¹åˆ«å¤šã€‚ï¼ˆä¸è¿‡ç°åœ¨æƒ³æ¥ï¼Œå½“æ—¶å¬çš„å‡ é¦–æ­Œå±…ç„¶æ˜¯äº”æœˆå¤©å«éŸ³å‡å”±çš„wwwwï¼Œæ„Ÿè§‰è«åå¾ˆå¥½ç¬‘å“ˆå“ˆå“ˆå“ˆï¼‰å½“æ—¶åœ¨æƒ³ï¼Œå¦‚æœæ—ä¿Šæ°ä¹Ÿæ¥é¸Ÿå·¢å¼€æ¼”å”±ä¼šå°±å¥½äº†ã€‚æ²¡æƒ³åˆ°æ—¶éš”å‡ ä¸ªæœˆå°±æˆåŠŸåœ†æ¢¦äº†å“ˆå“ˆå“ˆå“ˆï¼Œæƒ³æ¥è¿˜æ˜¯éå¸¸å¹¸è¿çš„~\næš‘å‡ä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨å­¦æœŸçš„æœ€åå»äº†ä¸€è¶Ÿæ˜åä¸‰é™µã€‚ï¼ˆå…¶å®ä¹‹å‰è¿˜å»äº†ä¸€æ¬¡é¢å’Œå›­ï¼Œä½†æ˜¯å› ä¸ºå½“æ—¶å®åœ¨æ˜¯å¤ªå¤ªå¤ªçƒ­äº†ï¼Œæ‹ç…§æ ¹æœ¬ä¸å‡ºç‰‡ï¼Œæ‰€ä»¥å°±åœ¨ä¸‹é¢æ”¾å¼ ç…§ç‰‡å¥½äº†ã€‚ï¼‰è™½ç„¶æ™¯ç‚¹æœ¬èº«ä¹Ÿæ²¡ä»€ä¹ˆç‰¹åˆ«å¸å¼•æˆ‘çš„ï¼Œä½†æ˜¯å’Œæœ‹å‹å‘†åœ¨ä¸€èµ·ï¼Œè«åæ„Ÿè§‰éå¸¸çš„å®‰å¿ƒå’Œè¸å®ã€‚ä¹Ÿè®¸æˆ‘å·²ç»ä¹ æƒ¯äº†åœ¨åŒ—äº¬çš„ç”Ÿæ´»æ¨¡å¼ï¼Œè¶Šæ¥è¶Šä»å®¹å’Œå¾—å¿ƒåº”æ‰‹äº†ã€‚æƒ³åˆ°ä»¥åå¯èƒ½è¦åœ¨åŒ—äº¬å†å‘†åå¹´ä¹‹ä¹…ï¼Œè¿˜æ˜¯æŒºæ¼«é•¿çš„å•Šã€‚\nå¤§äºŒä¸Šå­¦æœŸçš„å”¯ä¸€ä¸€è¶Ÿè¿œé—¨å°±æ˜¯æ­¦æ±‰ã€‚æ°é€¢å›½åº†å‡æœŸï¼Œå»æ­¦æ±‰è¿™ç§å†å²æ–‡åŒ–ååŸå°±æ ¼å¤–çš„åˆé€‚ã€‚ç”±å›½æ­£å¸¦ç€æˆ‘ä»¬ä¸€ä¼™åœ¨æ­¦æ±‰åº¦è¿‡äº†å……å®çš„å››å¤©ä¸‰å¤œã€‚æ—…é€”ä¸­æœ‰å¤ªå¤šå¤ªå¤šéš¾å¿˜çš„äº‹æƒ…äº†ï¼Œæ¯”å¦‚æ­¦æ±‰çš„ç¾é£Ÿï¼Œæˆ‘ä»¬å‡ ä¸ªäººå±…ç„¶è¿ç»­åƒäº†ä¸‰ä¸ªæ—©æ™¨çš„çƒ­å¹²é¢å“ˆå“ˆå“ˆï¼Œå®åœ¨æ˜¯åˆå®æƒ åˆå¥½åƒã€‚è¿˜æœ‰å£®è§‚çš„é•¿æ±Ÿå¤§æ¡¥ï¼Œåœ¨æ¡¥åº•ä¸‹æ‹åˆ°äº†ä¸€å¼ æœ€æ»¡æ„çš„äººç”Ÿç…§ç‰‡ã€‚è¿˜æœ‰æ­¦æ±‰ä¸œæ¹–ï¼Œå»çš„å½“å¤©ä¸€ç›´æ–­æ–­ç»­ç»­åœ¨ä¸‹å°é›¨ï¼Œæ½®æ¹¿çš„ç©ºæ°”é…ç€å¤§ç‰‡å¤§ç‰‡çš„æ¹–æ°´å’Œæ£®æ—ï¼ŒçœŸçš„éå¸¸éå¸¸éå¸¸èˆ’é€‚ã€‚æ„Ÿè§‰åŒ—äº¬é£å¹²çš„è‘¡è„å¹²åœ¨æ­¦æ±‰éƒ½èƒ½è¿˜åŸæˆå¤§è‘¡è„å“ˆå“ˆå“ˆã€‚åœ¨ä¸œæ¹–åŒæ ·æ‹åˆ°äº†ä¸€å¼ æœ‰å²ä»¥æ¥æœ€æ»¡æ„çš„é£æ™¯ç…§ï¼ŒçœŸçš„æ˜¯æ™¯ç¾æ€ä¹ˆæ‹éƒ½å¥½çœ‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¿…å»çš„é»„é¹¤æ¥¼ã€æ­¦å¤§ã€æ±Ÿæ±‰è·¯ä¹Ÿä¸€ä¸ªéƒ½æ²¡æœ‰é”™è¿‡ï¼Œä¸ç¦æ„Ÿæ…¨æ­¦æ±‰ç›¸å¯¹äºåŒ—äº¬çœŸçš„å¤ªå®œå±…äº†wwwwwã€‚\nå®è·µä¹‹æ—… åœ¨æš‘å‡ä¹‹å‰ï¼Œå¾ˆè£å¹¸æˆä¸ºäº†æ ¡çº§ç¤¾ä¼šå®è·µå›¢é˜Ÿä¸­çš„ä¸€å‘˜ï¼Œç”±å¯¼å‘˜å¸¦é¢†æˆ‘ä»¬ï¼Œä»åŒ—äº¬å‡ºå‘ï¼Œå‰å¾€æ— é”¡ã€è‹å·ã€ä¸Šæµ·å’Œå˜‰å…´ï¼Œå‚è®¿å¤§å­¦å’Œä¼ä¸šï¼Œæ¸¸è§ˆåšç‰©é¦†ç­‰ã€‚è¿™æ¬¡ç»å†çœŸçš„å¾ˆéš¾å¿˜ä¹Ÿå¾ˆéš¾å¾—ï¼Œéš¾å¿˜åˆ°éœ€è¦å•ç‹¬å¼€ä¸€ä¸ªç¯‡ç« å»å†™ã€‚\nåœ¨æ— é”¡ï¼Œæˆ‘ä»¬å»äº†æ±Ÿå—å¤§å­¦å’ŒæŸä¼ä¸šï¼Œä¸è¿‡å¼€å¿ƒçš„æ˜¯å¿™é‡Œå·é—²å»äº†å—é•¿è¡—ã€‚å—é•¿è¡—è¡—æ™¯çœŸçš„æ»¡è¶³äº†æˆ‘å¯¹æ±Ÿå—æ°´ä¹¡çš„å…¨éƒ¨æƒ³è±¡ï¼Œç”¨æ‰‹æœºå®šæ ¼ä½çœ¼å‰çš„ç”»é¢æ—¶ï¼ŒçœŸçš„æœ‰ä¸€ç§ä¸çœŸå®çš„æ„Ÿè§‰ã€‚æ— è®ºæ˜¯é‚£äº›ç™½å¢™é»›ç“¦çš„ä¸´æ²³å°æˆ¿è¿˜æ˜¯è¿æ²³ä¸­é£˜è¡çš„æœ¨èˆ¹ï¼Œéƒ½ä¸å¿ƒä¸­çš„æ±Ÿå—åˆ«æ— äºŒè‡´ã€‚æˆ‘ä»¬åœ¨å—é•¿è¡—åƒäº†å¾ˆå¤šå¥½åƒçš„ï¼Œæ¯”å¦‚æ¢…èŠ±ç³•å’Œæ¡‚èŠ±é…’ï¼Œè€Œä¸”ç¬¬ä¸€æ¬¡å–åˆ°äº†å¤§åé¼é¼çš„èŒ¶é¢œæ‚¦è‰²å“ˆå“ˆå“ˆå“ˆã€‚ä¸è¿‡ç¡®å®æŒºå¥½å–çš„å°±æ˜¯äº†ã€‚\næ— é”¡ä¸å…‰æœ‰å¥½æ™¯ï¼Œæˆ‘ä»¬è¿˜æœ‰å¹¸äº²èº«è¿›å…¥äº†ç¥å¨Â·å¤ªæ¹–ä¹‹å…‰è¶…çº§è®¡ç®—æœºçš„å†…éƒ¨ã€‚è€Œä¸”å¾—çŸ¥æ— é”¡è¶…ç®—ä¸­å¿ƒçš„è´Ÿè´£äººæ˜¯åŒ—é‚®çš„è€å­¦é•¿ï¼Œæ›´æ„Ÿäº²åˆ‡äº†å“ˆå“ˆã€‚å­¦é•¿èŠå¤©æ—¶è¯´åˆ°äº†åŒ—é‚®â€œå››å¤§åè¡¥â€ï¼Œçœ‹æ¥æ˜¯çœŸçš„å¾ˆéš¾ï¼Œè®°å¿†çŠ¹æ–°äº†å“ˆå“ˆå“ˆã€‚\nåœ¨è‹å·åŒæ ·æ˜¯å‚è§‚ä¼ä¸šï¼Œä¸è¿‡å¿™é‡Œå·é—²å»æ¸¸è§ˆäº†è‹å·å›­æ—â€”â€”ç•™å›­ã€‚ä¸è¿‡ç°å®ä¸­çš„è‹å·å›­æ—çœŸçš„æ¯”æƒ³è±¡ä¸­è¿·ä½ å¾ˆå¤šï¼Œæ˜¯å°è€Œç²¾è‡´çš„ç±»å‹ã€‚\nåœ¨ä¸Šæµ·ï¼Œé‚£æ¯«æ— ç–‘é—®è‚¯å®šå¾—å»é™†å®¶å˜´çœ‹çœ‹ã€‚å…¶å®æˆ‘å°æ—¶å€™æ²¡å°‘å»ä¸Šæµ·ç©ï¼Œè¿™æ¬¡å»ç©ä¾æ—§æ„Ÿè§‰åˆ°ä¸Šæµ·çš„éš¾ä»¥æ¥è¿‘å’Œå¯Œä¸½å ‚çš‡ã€‚å“ï¼Œå¯èƒ½æ˜¯æˆ‘å¯¹ä¸Šæµ·çš„åˆ»æ¿å°è±¡ï¼Œå›½é‡‘ä¸­å¿ƒæ•£å‘å‡ºçš„é«˜çº§é¦™æ°´å‘³çœŸçš„è®©äººéš¾ä»¥æ¥è¿‘å“ˆå“ˆå“ˆï¼Œå¯èƒ½åœ¨åŒ—äº¬æ²¡æœ‰è¿™æ ·çš„æ„Ÿè§‰æ˜¯å› ä¸ºåŒ—äº¬å¤ªç ´äº†å“ˆå“ˆå“ˆã€‚ç„¶åæ‰˜åŒå­¦çš„ç¦ï¼Œæˆ‘ä»¬è¿˜å»äº†å¤æ—¦å¤§å­¦é‚¯éƒ¸è·¯æ ¡åŒºã€‚åœ¨æ ¡å›­é—¨å£æˆ‘æ‰§æ„è¦è‡ªæ‹ä¸€å¼ ï¼Œè€Œé‚£ä¸ªåŒå­¦å› ä¸ºå¤æ—¦æ˜¯è‡ªå·±æ°¸è¿œçš„é—æ†¾è€Œä¸æƒ³ç•™ä¸‹ç—•è¿¹å“ˆå“ˆå“ˆï¼Œæ‰€ä»¥å½“æ—¶åœ¨å¤æ—¦é—¨å£ç¬‘çš„æ ¼å¤–å¼€å¿ƒå“ˆå“ˆå“ˆå“ˆã€‚\nå¯¹å˜‰å…´æœ€æ·±çš„å°è±¡å±…ç„¶ä¸æ˜¯å—æ¹–ï¼Œè€Œæ˜¯å˜‰å…´é©¬è·¯ä¸­é—´çš„æœ‰è½¨ç”µè½¦ï¼Œæœ‰ç§è¯¯å…¥æ—¥æœ¬åŠ¨æ¼«çš„é”™è§‰å“ˆå“ˆå“ˆï¼Œæµ™æ±Ÿåˆ°åº•æ˜¯å¯Œè£•å•Šã€‚è€Œä¸”è¿™ç§æœ‰è½¨ç”µè½¦å±…ç„¶ä¹Ÿè¦ç­‰çº¢ç»¿ç¯ï¼Œæ„Ÿè§‰è¿˜æ˜¯æŒºç¥å¥‡çš„ã€‚ä¸è¿‡å—æ¹–ä¹Ÿå¾ˆå¥½ï¼Œé£æ™¯ä¸é”™å“ˆå“ˆå“ˆã€‚\nè¿™æ¬¡æ—…é€”çœŸçš„å°è¯äº†â€œçœŸæ­£çš„é£æ™¯åœ¨è·¯ä¸Šâ€è¿™å¥è¯ï¼Œè¡Œèµ°åœ¨è·¯ä¸Šï¼Œé£æ™¯ä¹Ÿå˜å¾—æ ¼å¤–åŠ¨äººï¼Œå¯èƒ½è¿™å°±æ˜¯æ—…é€”çš„æ„ä¹‰å§ã€‚\næˆé•¿ä¹‹æ—… å½“ç„¶ç”Ÿæ´»ä¸åªæœ‰è¯—å’Œè¿œæ–¹ï¼Œå’±ä»¬ä¹Ÿæ˜¯è¿½æ±‚æŠ€æœ¯çš„å·¥ç§‘å¤§å­¦ç”Ÿ~ä¸è¿‡ä»Šå¹´æ¯”è¾ƒé—æ†¾çš„æ˜¯ï¼Œæ²¡æœ‰æŠ½å‡ºæ¥æ—¶é—´é’»ç ”é‚£äº›è‡ªå·±çœŸæ­£çƒ­çˆ±çš„ä¸œè¥¿ï¼Œå‡ ä¹æ˜¯å…¨ç¨‹å›¿äºå¼€è®¾çš„è¿™äº›ç¹æ‚å¹¶ä¸”æœ‰äº›çœ‹èµ·æ¥è¿˜æ²¡å¿…è¦çš„è¯¾ç¨‹ã€‚å…‰æ˜¯åº”ä»˜è¿™äº›å°±èŠ±è´¹äº†å­¦ä¹ ç”Ÿæ´»ä¸­çš„ç»å¤§éƒ¨åˆ†ç²¾åŠ›äº†ï¼Œè¶Šç´¯è¶Šå¼€å§‹æ€€ç–‘å­¦ä¹ çš„æ„ä¹‰åˆ°åº•æ˜¯ä¸ºäº†è¿½æ±‚çº¯ç²¹çš„çŸ¥è¯†è¿˜æ˜¯ä¸ºäº†æ›´å¥½åœ°èµšmoneyã€‚å‰è€…è¿‡äºç†æƒ³ä¸»ä¹‰ï¼Œåè€…åˆå¤ªåŠŸåˆ©äº†ã€‚è€Œä¸”è¿™äº›ç†è®ºè¯¾å…¶å®å¯¹èµšmoneyä¹Ÿæ²¡æœ‰ä»€ä¹ˆå®è´¨æ€§çš„å¸®åŠ©ï¼Œä½†æ˜¯åˆæŠ½ä¸å‡ºæ—¶é—´å»å­¦æŠ€æœ¯ï¼Œè¢«å¤¹åœ¨ä¸­é—´å¤šå°‘æœ‰ç‚¹éš¾å—ã€‚\næƒ³äº†ä¸€æ®µæ—¶é—´ä¹Ÿæ²¡æƒ³å‡ºæ¥ä»€ä¹ˆå¹³è¡¡çš„æ–¹æ¡ˆï¼Œäºæ˜¯åªèƒ½ä¸€è¾¹è¿·èŒ«ä¸€è¾¹å¥½å¥½ä¸Šè¿™äº›ç†è®ºè¯¾ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œå¯èƒ½åˆ°æœ€åæ—¶é—´ä¼šè¯æ˜ä¸€åˆ‡ã€‚èµ°ä¸€æ­¥çœ‹ä¸€æ­¥å§å“ˆå“ˆå“ˆã€‚\nå¯’å‡é‡ŒæŠ±ç€é•€é‡‘çš„æ€åº¦ï¼Œå‚åŠ äº†ä¸€ä¸ªè”åˆå›½å›½é™…ç»„ç»‡è§ä¹ ã€‚æ²¡æƒ³åˆ°æ²¦ä¸ºä¸€ä¸ªå¤åˆ¶ç²˜è´´+deepLçš„æœºå™¨ï¼Œå¿ƒç´¯ingã€‚\nåæ¥é¼“èµ·å‹‡æ°”å‚åŠ äº†å­¦æ ¡ç»„ç»‡çš„ICPCæ ¡èµ›ä¸ªäººèµ›ï¼Œæ‹œé¢˜ç›®å‡ºå¾—å¤ªéš¾æ‰€èµï¼Œç»å¤§éƒ¨åˆ†äººéƒ½å¡åœ¨äº†ä¸¤é¢˜è¿™ä¸ªæ°´å¹³ï¼Œæ··åˆ°äº†ä¸€ä¸ªä¸­æ¸¸çš„åæ¬¡ã€‚ä¸è¿‡å¹¸è¿çš„æ˜¯å¥–å“æ²¡å‘å®Œï¼Œè¢«æˆ‘æŠ½åˆ°äº†å“ˆå“ˆå“ˆï¼Œè¢«ç§°ä¸ºâ€œç²¾ç¥äºŒç­‰å¥–â€å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆã€‚è›®ä¸é”™çš„ã€‚\nå·®ç‚¹å¿˜äº†ä¸ŠåŠå¹´è¿˜æ‰“è¿‡ä¸€åœºè¾©è®ºèµ›ï¼Œå¯æƒœæ‰“å®Œç¬¬ä¸€åœºä¹‹åå°±é‡é‡æ„Ÿå†’äº†ï¼Œä¸è¿‡ä¾æ—§èƒ½è®°èµ·å½“æ—¶çš„è¾©é¢˜ï¼šçŸ­è§†é¢‘ç››è¡Œæå‡/é™ä½äº†å½“ä»£äººçš„è®¤çŸ¥èƒ½åŠ›ã€‚ä¸å¾—ä¸è¯´ï¼Œåœ¨æœ‰é™çš„æ—¶é—´é‡Œå®Œæ•´å‡†ç¡®åœ°è¾“å‡ºè‡ªå·±çš„è§‚ç‚¹ï¼Œæ˜¯ä¸€ä»¶å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„äº‹æƒ…ã€‚ä¸è¿‡æ¯”èµ›çš„æˆç»©ä»¤äººæ»¡æ„ï¼Œæœªæ¥å­¦é™¢è¾©è®ºé˜Ÿå–œææ ¡èµ›å­£å†›ã€‚å¯¹äºå½“æ—¶åªæœ‰100ä¸ªäººçš„å°å­¦é™¢æ¥è¯´ï¼Œå·²ç»è¶³å¤Ÿäº®çœ¼äº†å“ˆå“ˆå“ˆã€‚\nåœ¨å¤§ä¸€ä¸‹å­¦æœŸï¼Œæˆ‘ä»¬è¿˜å»åˆ°ä¸­å…³æ‘è®ºå›å±•è§ˆå‚è§‚ï¼Œç¬¬ä¸€æ¬¡ä½“éªŒäº†VRè®¾å¤‡ï¼Œè¿˜åœ¨åŒ—é‚®çš„å±•å°å‰é¢æ‹äº†åˆç…§ã€‚\nå¤§äºŒä¸Šå­¦æœŸäº®çœ¼çš„é¡¹ç›®å¯èƒ½å°±æ˜¯å°å­¦æœŸçš„åˆ›å®¢é©¬æ‹‰æ¾ï¼Œå¬åå­—å°±çŸ¥é“å®ƒåˆç®€å•åˆæ°´ã€‚ä¸è¿‡æˆ‘ä»¬å°ç»„ç”¨ä¸€ä¸ªå‰å«çš„åˆ›æ„ã€æŠ€æœ¯å«é‡ä¸é«˜çš„ç¡¬ä»¶å’Œä¼˜ç§€çš„æ¼”è®²èƒ½åŠ›æ‹¿ä¸‹äº†æ¯”èµ›çš„Excellentå¥–å“ˆå“ˆå“ˆï¼ŒåŠ›å‹ç¬¬äºŒåæŠ€æœ¯åŠ›æ‹‰æ»¡çš„ä½œå“ã€‚ä¸è¿‡è¿™æ¬¡è®©æˆ‘æ¸…é†’åœ°è®¤è¯†åˆ°äº†â€œè®²æ•…äº‹â€çš„é‡è¦æ€§ï¼ŒæœçœŸæ˜¯å†™æ•…äº‹å†™å¾—å¥½çš„ä¸å¦‚è®²æ•…äº‹è®²çš„å¥½çš„ï¼Œåªèƒ½è¯´è™½ç„¶å·¥ç§‘æ˜¯æŠ€æœ¯ä¸ºç‹ï¼Œä½†æ˜¯â€œè®²å¥½æ•…äº‹â€çš„èƒ½åŠ›æ›´æ˜¾çš„éå¸¸å®è´µå’Œç¨€æœ‰äº†ã€‚\nå¤§äºŒä¸Šè¿˜è¾¾æˆäº†ä¸€ä¸ªæˆå°±ï¼ˆè™½ç„¶åº”è¯¥ä¸ç®—ä»€ä¹ˆèƒ½åŠ›æ–¹é¢çš„æå‡ï¼Œä½†æ˜¯çœŸçš„å¾ˆå€¼å¾—çºªå¿µï¼‰ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨å›½åº†èŠ‚çš„å‰å‡ å¤©å¤œéª‘åŒ—äº¬ï¼Œä»åŒ—é‚®æœ¬éƒ¨ä¸€è·¯éª‘åˆ°å¤©å®‰é—¨å¹¿åœºï¼ˆéª‘çš„å±…ç„¶æ˜¯ç¾å›¢å°é»„è½¦å“ˆå“ˆå“ˆï¼‰ï¼Œä¸ºäº†æ—©ä¸Šçœ‹å‡æ——ç†¬äº†ä¸€æ•´å¤œï¼Œè¿˜å»èƒ¡åŒé‡Œå–åˆ°äº†æ­£å®—çš„è€åŒ—äº¬è±†æ±ã€‚è±†æ±çœŸçš„å¤ªå¤ªå¤ªé…¸è‡­äº†ï¼Œå®åœ¨éš¾ä»¥ä¸‹å˜´å“ˆå“ˆå“ˆã€‚\nè¿˜æœ‰ä¸€ä»¶ä»¤äººå…´å¥‹çš„äº‹æƒ…ï¼Œæ˜¯æˆ‘ä»¬ç²¾å¿ƒæ’ç»ƒä¸€å¹´ä¹‹ä¹…çš„è‰ºé¦¨æ¯ç»ˆäºæ¼”å®Œäº†ï¼ï¼ˆç”±äºç–«æƒ…ï¼Œå»å¹´æ’ç»ƒåˆ°æœ€åè¢«å–æ¶ˆäº†wwwwï¼‰è™½ç„¶æˆ‘åœ¨è¯å‰§ä¸­æ‰®æ¼”çš„åªæ˜¯ä¸€ä¸ªåªæœ‰ä¸€å¥å°è¯çš„è€ç™¾å§“ï¼Œä¸è¿‡æ•¢äºç«™åœ¨è¿™ä¹ˆå¤§çš„ç§‘å­¦ä¼šå ‚é‡Œæ¼”å‡ºï¼Œä¹Ÿç®—æ˜¯ä¸€ç§çªç ´å§å“ˆå“ˆå“ˆã€‚\nåœ¨å­¦æœŸçš„æœ€åï¼Œç»ˆäºå¼€å§‹äº†ç§‘ç ”å¯¼å¸ˆçš„åŒå‘é€‰æ‹©ã€‚é‚£å‡ å¤©æ…é‡çš„ç ”ç©¶ã€ä¸€ééå‰å¾€æœ¬éƒ¨è·Ÿå¯¼å¸ˆä»¬äº¤æµï¼Œè®©æˆ‘ä¹Ÿå¤§è‡´äº†è§£äº†ç§‘ç ”é“è·¯çš„èµ°æ³•ã€‚ä¸è¿‡ä»˜å‡ºä¹Ÿæœ‰äº†æ”¶è·ï¼Œå¾ˆå¹¸è¿åœ°é€‰åˆ°äº†ä¸€ä½éå¸¸ç‰›çš„å¤§å¯¼ï¼Œå¯¹æœªæ¥çš„ç§‘ç ”ä¹‹è·¯è¿˜æ˜¯å……æ»¡ä¿¡å¿ƒçš„å“ˆå“ˆå“ˆï¼ˆå¸Œæœ›æˆ‘ä»¥åç ´é˜²çš„æ—¶å€™ä¸è¦çœ‹åˆ°è¿™å¥è¯å“ˆå“ˆå“ˆå“ˆï¼‰\nåè®° å› ä¸ºä¸€æ— æ‰€æœ‰ï¼Œæ‰€ä»¥æ— æ‰€ç•æƒ§ï¼Œå¯ä»¥æ‹¥æœ‰ä¸€åˆ‡ã€‚\nä¸Šé¢è¿™å¥è¯æ˜¯æœ€è¿‘çœ‹çš„ä¸€éƒ¨ç”µè§†å‰§ç»“å°¾çš„å°è¯ã€‚å›æƒ³èµ·æ¥2023è¿™ä¸€å¹´ï¼Œæƒ³åˆ°çš„ä»æ¥ä¸æ˜¯è¯¸å¦‚â€œç¤¾ä¼šå®è·µç»“æœå¦‚ä½•â€ã€â€œè€ƒè¯•ç»“æŸç»“æœå¦‚ä½•â€ç­‰ç­‰ï¼Œè€Œæ˜¯ç»å†è¿™ä¸€åˆ‡çš„è¿‡ç¨‹ã€‚æ²¿é€”çš„ä¸€æ¬¡æ¬¡ç»å†ã€ä¸€å¹•å¹•é£æ™¯ï¼Œè®©æˆ‘ä¸æ–­ä¸°å¯Œç€è‡ªå·±çš„äººç”Ÿã€‚æˆ‘çŸ¥é“å› ä¸ºå¹´å²çš„å¢é•¿ï¼Œå¯èƒ½ä¹‹åçš„é¡¾è™‘ä¼šè¶Šæ¥è¶Šå¤šï¼Œè‚©ä¸Šçš„å‹åŠ›ä¹Ÿä¼šè¶Šæ¥è¶Šé‡ï¼Œå¯æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦è‘†æœ‰æ— æ‰€ç•æƒ§çš„å†…å¿ƒå’Œæ”¾ç©ºè‡ªå·±çš„å¿ƒæ€ï¼Œå»äº«å—äººç”Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œå»æ‹¥æŠ±ä¸€åˆ‡å¥½å¥‡ï¼Œå»åšè‡ªå·±æƒ³åšçš„ä¸€åˆ‡ã€‚\næ–°çš„æ—…ç¨‹ï¼Œä¸‹ä¸ªå››å­£ï¼Œæ‹­ç›®ä»¥å¾…ã€‚\n","permalink":"https://m1yan.github.io/posts/2023%E5%B9%B4%E7%BB%88%E6%8A%A5%E5%91%8A/","summary":"\u003ch1 id=\"å†™åœ¨å¼€å¤´\"\u003eå†™åœ¨å¼€å¤´\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eåˆ«èµ¶è·¯ï¼Œå»æ„Ÿå—è·¯ã€‚\u003c/strong\u003e\u003c/p\u003e\n\u003c/blockquote\u003e","title":"2023å¹´ç»ˆæ€»ç»“"},{"content":"1 å®éªŒç¯å¢ƒ è¯­è¨€ï¼šC++\n2 å®éªŒå†…å®¹ 2.1 ç¼–ç¨‹å®ç° $(m,n)$ ç¾¤ç  2.1.1 è¾“å…¥è¾“å‡º è¾“å…¥ï¼š$m,n$ å’Œä¸€è‡´æ€§æ ¡éªŒçŸ©é˜µ $H$ ä¸­çš„ $H_{m \\times r}$ éƒ¨åˆ†ï¼Œå…¶ä¸­ $r=n-m$.\nè¾“å‡ºï¼šæ‰€æœ‰çš„ç å­—ï¼ŒæŒ‰åŸç å¯¹åº”çš„åè¿›åˆ¶æ•´æ•°å‡åºæ’åˆ—.\n2.1.2 è®¾è®¡æ€è·¯åŠæ ¸å¿ƒç®—æ³• é¦–å…ˆè¾“å…¥ $m,n$ï¼š\nstd::cin \u0026gt;\u0026gt; m \u0026gt;\u0026gt; n; è°ƒç”¨ inputH(m,n) å‡½æ•°è¾“å…¥ä¸€è‡´æ€§æ ¡éªŒçŸ©é˜µ $H$ï¼š\nBitMatrix H = inputH(m, n); inputH(m,n) å‡½æ•°ä»£ç å¦‚ä¸‹ï¼š\nuint64_t inputBit() { std::string line; std::cin \u0026gt;\u0026gt; line; uint64_t x = 0; int k = 0; for (size_t i = 0; i \u0026lt; line.size(); i++) if (line[i] == \u0026#39;1\u0026#39; || line[i] == \u0026#39;0\u0026#39;) x |= (line[i] - \u0026#39;0\u0026#39;) \u0026lt;\u0026lt; k++; return x; } BitMatrix inputH(int m, int n) { BitMatrix H(n, n - m); for (int i = 0; i \u0026lt; m; i++) H.d[i] = inputBit(); for (int i = m; i \u0026lt; n; i++) H.d[i] = 1 \u0026lt;\u0026lt; (i - m); return H; } inputH å‡½æ•°ä¼ å…¥è¡Œåˆ—å‚æ•°m,nï¼Œå£°æ˜ä¸€ä¸ª BitMatrix ç±»ï¼Œç”¨æ¥å­˜æ”¾ä¸€è‡´æ€§æ ¡éªŒçŸ©é˜µçš„ $m \\times r$éƒ¨åˆ†.\nè°ƒç”¨ HtoH2(H) å‡½æ•°ç”Ÿæˆ $m \\times n$ çš„ç¼–ç çŸ©é˜µï¼š $$ \\left[ \\begin{matrix} I_m \u0026amp; H_{m\\times r} \\ \\end{matrix} \\right] $$\nBitMatrix HtoH2(BitMatrix \u0026amp;H) { BitMatrix H2(H.n - H.m, H.n); for (int i = 0; i \u0026lt; H.n - H.m; i++) H2.d[i] = 1 \u0026lt;\u0026lt; i; for (int i = 0; i \u0026lt; H.n - H.m; i++) for (int j = 0; j \u0026lt; H.m; j++) H2.d[i] |= (H.d[i] \u0026gt;\u0026gt; j \u0026amp; 1) \u0026lt;\u0026lt; (j + H.n - H.m); return H2; } å®šä¹‰ä¸€ä¸ª Bm çŸ©é˜µç”¨äºå­˜æ”¾åŸç ï¼ŒçŸ©é˜µæ¯è¡Œä»ä¸Šåˆ°ä¸‹æŒ‰åŸç å¯¹åº”çš„åè¿›åˆ¶é€’å¢é¡ºåºæ’åˆ—ï¼Œå¹¶è¿›è¡Œè¿ç®—ï¼š\n$$ e_H(B^m)=B^m\\times\n\\left[ \\begin{matrix} I_m \u0026amp; H_{m\\times r} \\ \\end{matrix} \\right] $$\næ±‚å‡ºç¾¤ç å¯¹åº”çš„çŸ©é˜µå¹¶è¾“å‡º.\nBitMatrix H2 = HtoH2(H), Bm(1 \u0026lt;\u0026lt; m, m); for (int i = 0; i \u0026lt; (1 \u0026lt;\u0026lt; m); i++) for (int j = 0; j \u0026lt; m; j++) Bm.d[i] |= (i \u0026gt;\u0026gt; j \u0026amp; 1) \u0026lt;\u0026lt; (m - j - 1); BitMatrix N = Bm * H2; std::cout \u0026lt;\u0026lt; \u0026#34;1. e(B^m):\u0026#34; \u0026lt;\u0026lt; std::endl; for (int i = 0; i \u0026lt; (1 \u0026lt;\u0026lt; m); i++) { std::cout \u0026lt;\u0026lt; \u0026#34; e(\u0026#34;; printBit(Bm.d[i], m); std::cout \u0026lt;\u0026lt; \u0026#34;) = \u0026#34;; printBit(N.d[i], n); std::cout \u0026lt;\u0026lt; std::endl; } 2.2 æ„é€ é™ªé›†è¡¨ 2.2.1 è®¾è®¡æ€è·¯åŠæ ¸å¿ƒç®—æ³• ç”Ÿæˆ coset table çš„ç®—æ³•åŸç†å¦‚ä¸‹ï¼š\né¦–å…ˆï¼Œå®šä¹‰äº†ä¸€ä¸ªç©ºçš„å“ˆå¸Œè¡¨ cosets ç”¨äºå­˜å‚¨ coset çš„ä¿¡æ¯ï¼Œä»¥åŠä¸€ä¸ªç©ºçš„å“ˆå¸Œè¡¨ visited ç”¨äºæ ‡è®°å·²ç»è®¿é—®è¿‡çš„å‘é‡ï¼›\nåˆ›å»ºä¸€ä¸ªå‘é‡ numbersï¼Œå…¶ä¸­å­˜å‚¨äº†æ‰€æœ‰å¯èƒ½çš„å‘é‡ï¼ˆå…± 2^n ä¸ªå‘é‡ï¼‰ï¼Œå¹¶æŒ‰ç…§å‘é‡ä¸­ 1 çš„ä¸ªæ•°è¿›è¡Œæ’åºï¼Œä»å°‘åˆ°å¤šï¼›\néå† numbers ä¸­çš„æ¯ä¸ªå‘é‡ iï¼Œå¯¹äºæ¯ä¸ªå‘é‡ï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\na. åˆ›å»ºä¸€ä¸ªç©ºçš„ coset å¯¹è±¡ cosetï¼Œç”¨äºå­˜å‚¨å±äºåŒä¸€ä¸ª coset çš„å‘é‡ï¼›\nb. å¯¹äºçŸ©é˜µ N çš„æ¯ä¸€è¡Œï¼ˆè¡¨ç¤ºæ¯ä¸ª cosetï¼‰ï¼Œå°†å½“å‰å‘é‡ i ä¸è¯¥è¡Œçš„å‘é‡ x è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼Œå¾—åˆ°æ–°çš„å‘é‡ x' = N.d[j] ^ uint64_t(i)ï¼›\nc. æ£€æŸ¥ visited å“ˆå¸Œè¡¨ï¼Œå¦‚æœåœ¨ visited ä¸­æ‰¾åˆ°äº†å‘é‡ x'ï¼Œè¯´æ˜è¯¥å‘é‡å·²ç»å±äºæŸä¸ª cosetï¼Œè·³è¿‡å½“å‰å¾ªç¯ï¼›\nd. å¦‚æœåœ¨ visited ä¸­æ²¡æœ‰æ‰¾åˆ°å‘é‡ x'ï¼Œåˆ™å°† x' æ·»åŠ åˆ°å½“å‰ coset ä¸­ï¼Œå¹¶å°† x' æ·»åŠ åˆ° visited å“ˆå¸Œè¡¨ä¸­ï¼Œå€¼ä¸ºå½“å‰ coset çš„ç´¢å¼•ï¼›\ne. å°†å½“å‰ coset çš„é™ªé›†å¤´ e æ›´æ–°ä¸º coset ä¸­å…·æœ‰æœ€å°‘ 1 çš„ä¸ªæ•°çš„å‘é‡ï¼›\nf. å¦‚æœå½“å‰ coset çš„é™ªé›†å¤´ e åœ¨ cosets å“ˆå¸Œè¡¨ä¸­ä¸å­˜åœ¨ï¼Œåˆ™å°†å½“å‰ coset æ·»åŠ åˆ° cosets ä¸­ï¼Œå¹¶å°† e å¯¹åº”çš„ç‰¹å¾å€¼ï¼ˆé€šè¿‡ä¸€è‡´æ€§æ ¡éªŒçŸ©é˜µ H è®¡ç®—ï¼‰æ·»åŠ åˆ° syncdrome å“ˆå¸Œè¡¨ä¸­ï¼Œå€¼ä¸ºå½“å‰ coset çš„ç´¢å¼•ï¼›\ng. æ£€æŸ¥ cosetLeaders çš„å¤§å°ï¼Œå¦‚æœå·²ç»è¾¾åˆ°äº† $2^{n-m}$ï¼ˆå³ä½™ç±»çš„æ•°é‡ï¼‰ï¼Œåˆ™åœæ­¢å¾ªç¯.\næœ€åï¼Œå¾—åˆ°äº†æ‰€æœ‰çš„ coset ä¿¡æ¯ï¼Œå¹¶æŒ‰ç…§ coset é™ªé›†å¤´å¯¹åº”çš„åè¿›åˆ¶é€’å¢çš„é¡ºåºè¾“å‡º.\né€šè¿‡ä¸Šè¿°ç®—æ³•ï¼Œå¯ä»¥ç”Ÿæˆæ‰€æœ‰çš„ cosetï¼Œå¹¶æ‰¾åˆ°æ¯ä¸ª coset çš„é™ªé›†å¤´å’Œç‰¹å¾å€¼.\n2.2.2 BitMatrix ç±» è¯¥ç¨‹åºå°†è¯‘ç æ—¶æ‰€éœ€çš„æ¯”ç‰¹çŸ©é˜µè¿›è¡Œäº†å°è£…ï¼Œèƒ½å¤Ÿå®ç°ä¹˜æ³• (å…ƒç´ å¯¹åº”å¼‚æˆ–) æ“ä½œ.\nclass BitMatrix { public: int n, m; uint64_t d[100]; BitMatrix(int n, int m): n(n), m(m) { memset(d, 0, sizeof(uint64_t) * n); } BitMatrix operator*(const BitMatrix\u0026amp; rhs) const { assert (m == rhs.n); BitMatrix res(n, rhs.m); for (int i = 0; i \u0026lt; n; i++) for (int k = 0; k \u0026lt; m; k++) if (d[i] \u0026gt;\u0026gt; k \u0026amp; 1) res.d[i] ^= rhs.d[k]; return res; } void print() const { for (int i = 0; i \u0026lt; n; i++) { printBit(d[i], m); std::cout \u0026lt;\u0026lt; std::endl; } } }; 2.2.3 Coset ç±» Coset ç±»ç”±é™ªé›†ã€é™ªé›†å¤´åŠæ·»åŠ æ“ä½œç»„æˆï¼Œé™ªé›†ä¸­çš„å…ƒç´ ä½¿ç”¨ä¸€ç»´å‘é‡è¿›è¡Œå­˜å‚¨ï¼Œé™ªé›†å¤´ç”¨æ•´å‹å˜é‡å•ç‹¬å­˜å‚¨ï¼Œæ–¹ä¾¿è°ƒç”¨. æ·»åŠ æ“ä½œåœ¨æ¯ä¸€æ¬¡æ‰§è¡Œæ—¶æ›´æ–°ä¸€æ¬¡é™ªé›†å¤´.\nclass Coset { public: std::vector\u0026lt;uint64_t\u0026gt; d; // coset uint64_t e; // coset leader Coset() : e(0) {} void add(uint64_t x) { if (d.empty()) d.push_back(e = x); else { d.push_back(x); if (bitcount(x) \u0026lt; bitcount(e)) e = x; } } }; 2.3 æå¤§ä¼¼ç„¶è¯‘ç  åŸºäº 2.2 æ„é€ é™ªé›†è¡¨ æ±‚å‡ºçš„å·¦é™ªé›†è¡¨ï¼Œç”¨å’Œå‡½æ•° $e_H$ ç›¸å…³è”çš„æå¤§ä¼¼ç„¶è¯‘ç å‡½æ•° $d$ ï¼Œå¯¹ $x_t\\in B^n$ è¿›è¡Œè¯‘ç .\n2.3.1 è¾“å…¥è¾“å‡ºæ ¼å¼ è¾“å…¥ï¼šé¦–è¡Œæ˜¯è¯‘ç ä¸ªæ•° $N$ ï¼Œæ•´æ•°æ ¼å¼ï¼› ç„¶åæ˜¯ $N$ è¡Œæ¯”ç‰¹ä¸² $x_t \\in B^n$ ï¼Œå­—ç¬¦ä¸²æ ¼å¼ï¼› è¾“å‡ºï¼š$N$è¡Œè¯‘ç ç»“æœï¼Œæ ¼å¼ä¸º $d(x_t) = b_1 b_2 \u0026hellip; b_m$ . å¦‚ï¼šd(001011)=001. 2.3.2 è®¾è®¡æ€è·¯åŠæ ¸å¿ƒç®—æ³• è¾“å…¥ $N$ ï¼Œç„¶åè¾“å…¥å¾…è§£ç çš„ $N$ ä¸ªæ¯”ç‰¹ä¸². è¾“å…¥åéœ€è¦è¿›è¡Œå­—ç¬¦ä¸²è½¬æ•´æ•°æ“ä½œï¼›\nstd::cin \u0026gt;\u0026gt; k; for (int i = 0; i \u0026lt; k; i++) { std::cerr \u0026lt;\u0026lt; \u0026#34;Enter the word #\u0026#34; \u0026lt;\u0026lt; i + 1 \u0026lt;\u0026lt; \u0026#34;: \u0026#34;; uint64_t x = inputBit(); /* ...................... */ inputBit() å‡½æ•°å¦‚ä¸‹ï¼š\nuint64_t inputBit() { std::string line; std::cin \u0026gt;\u0026gt; line; uint64_t x = 0; int k = 0; for (size_t i = 0; i \u0026lt; line.size(); i++) if (line[i] == \u0026#39;1\u0026#39; || line[i] == \u0026#39;0\u0026#39;) x |= (line[i] - \u0026#39;0\u0026#39;) \u0026lt;\u0026lt; k++; return x; } ç¡®å®šè¾“å…¥çš„ $x_t$ ä½äºå“ªä¸ª coset ä¸­ï¼Œå¯é€šè¿‡ visited[x] å¾—åˆ°æ‰€å±é™ªé›†ç¼–å·ï¼›\nå–å‡ºæ‰€å±é™ªé›†çš„é™ªé›†å¤´ $\\epsilon$ ï¼Œä¸ $x_t$ è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼Œå¾—åˆ°çš„ç»“æœå¿…ç„¶åœ¨ç¾¤ç å¯¹åº”çš„çŸ©é˜µ $N$ ä¸­æ‰¾åˆ°ï¼Œç”±æ­¤å¾—åˆ°è§£ç åç»“æœ.\næ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\nstd::vector\u0026lt;uint64_t \u0026gt; cosetLeaders; for (auto i : numbers) { Coset coset; bool notFound = true; for (int j = 0; j \u0026lt; N.n; j++) { uint64_t x = N.d[j] ^ uint64_t(i); if (visited.find(x) != visited.end()) { notFound = false; break; } visited[x] = cosetLeaders.size(); coset.add(x); } if (notFound) { cosets[coset.e] = coset; syndrome[getSyndrome(coset.e, H)] = cosetLeaders.size(); cosetLeaders.push_back(coset.e); } // if cosetLeaders.size() = 2^(n-m), then stop. // Because there are only 2^(n-m) cosets. if (cosetLeaders.size() == (1 \u0026lt;\u0026lt; (n - m))) break; } /* ............ */ printBit(Bm.d[NtoBm[cosetLeaders[visited[x]] ^ x]], m); 2.4 åŸºäºç‰¹å¾å€¼çš„è¯‘ç  åŸºäº 2.2 æ„é€ é™ªé›†è¡¨ æ±‚å‡ºçš„å·¦é™ªé›†è¡¨ï¼Œåˆ©ç”¨å‡½æ•° $f_H:B^n \\rightarrow B^rï¼Œf_H(x) = x\\cdot H$ æ±‚å‡ºæ¯ä¸ªé™ªé›†å¤´å¯¹åº”çš„ç‰¹å¾å€¼ (Syndrome) ï¼Œå¹¶åˆ©ç”¨ç‰¹å¾å€¼ï¼Œå¯¹$x_t \\in B^n$ è¿›è¡Œè¯‘ç .\n2.4.1 è¾“å…¥è¾“å‡ºæ ¼å¼ è¾“å…¥ï¼šé¦–è¡Œæ˜¯è¯‘ç ä¸ªæ•°Nï¼Œæ•´æ•°æ ¼å¼ï¼› ç„¶åæ˜¯Nè¡Œæ¯”ç‰¹ä¸² $x_t \\in B^n$ ï¼Œå­—ç¬¦ä¸²æ ¼å¼ï¼› è¾“å‡ºï¼šNè¡Œè¯‘ç æ‰€ç”¨çš„ç‰¹å¾å€¼ã€é™ªé›†å¤´å’Œè¯‘ç ç»“æœï¼Œæ ¼å¼ä¸º $f(x_t)$ = *** ï¼Œ$\\epsilon$ = ***ï¼Œ$d(xt) = b_1b_2\u0026hellip;b_m$. æ³¨ï¼šæœ¬ç¨‹åºé‡‡ç”¨çš„è¾“å‡ºæ–¹å¼ï¼Œå¯¹äºæ¯ä¸€ä¸ªå¾…è§£ç äºŒè¿›åˆ¶ä¸²è¾“å…¥ï¼Œè¾“å‡ºç»“æœåˆ†ä¸ºä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œä¸ºé‡‡ç”¨æå¤§ä¼¼ç„¶è¯‘ç è®¡ç®—çš„ç»“æœï¼Œç»“æœå‰ç”¨åºå· (a) è¿›è¡ŒåŒºåˆ†ï¼Œç¬¬äºŒè¡Œä¸ºåŸºäºç‰¹å¾å€¼è¯‘ç çš„ç»“æœï¼Œç»“æœå‰ç”¨åºå· (b) åŒºåˆ†ï¼Œä¾‹å¦‚ï¼š\n(a) d(10111) = 10 (b) f(10111) = 100, Îµ = 00100, d(10111) 2.4.2 è®¾è®¡æ€è·¯åŠæ ¸å¿ƒç®—æ³• è¾“å…¥ N ï¼Œç„¶åè¾“å…¥å¾…è§£ç çš„ N ä¸ªæ¯”ç‰¹ä¸². è¾“å…¥åéœ€è¦è¿›è¡Œå­—ç¬¦ä¸²è½¬æ•´æ•°æ“ä½œï¼›\né€šè¿‡å‡½æ•° $f_H(x_t) = x_t \\cdot H$ è®¡ç®— $x_t$ ç‰¹å¾å€¼ï¼›\nstd::cout \u0026lt;\u0026lt; \u0026#34; (b) f(\u0026#34;; //ç‰¹å¾å€¼ printBit(x, n); uint64_t s = getSyndrome(x, H); std::cout \u0026lt;\u0026lt; \u0026#34;) = \u0026#34;; printBit(s, n - m); getSyndrome() å‡½æ•°ç»†èŠ‚ï¼š\nuint64_t getSyndrome(uint64_t x, BitMatrix \u0026amp;H) { BitMatrix X(1, H.n); X.d[0] = x; return (X * H).d[0]; } æ ¹æ®æ‰€å¾—ç‰¹å¾å€¼åœ¨å“ˆå¸Œè¡¨ä¸­å¯¹åº”åˆ°é™ªé›†å¤´ï¼›\nstd::cout \u0026lt;\u0026lt; \u0026#34;, Îµ = \u0026#34;; //é™ªé›†å¤´ printBit(cosetLeaders[syndrome[s]], n); é™ªé›†å¤´ä¸å¾…è¯‘ç æ¯”ç‰¹ä¸²è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå¾—åˆ°çš„ç»“æœå¿…ç„¶åœ¨ç¾¤ç å¯¹åº”çš„çŸ©é˜µ $N$ ä¸­æ‰¾åˆ°ï¼Œç”±æ­¤å¾—åˆ°è§£ç åç»“æœ.\nstd::cout \u0026lt;\u0026lt; \u0026#34;, d(\u0026#34;; //è¯‘ç ç»“æœ printBit(x, n); std::cout \u0026lt;\u0026lt; \u0026#34;) = \u0026#34;; printBit(Bm.d[NtoBm[cosetLeaders[syndrome[s]] ^ x]], m); std::cout \u0026lt;\u0026lt; std::endl; 3 ä»£ç ä¼˜åŒ– æˆ‘ä»¬åœ¨å››ä¸ªåœ°æ–¹ä¼˜åŒ–äº†åŸæœ¬çš„ä»£ç ï¼Œä½¿å¾—ç¨‹åºæ›´åŠ é«˜æ•ˆ.\nç”±äºå®éªŒä¸­æ»¡è¶³ $1\u0026lt;m\u0026lt;n\u0026lt;7$ï¼Œæ‰€ä»¥ä½¿ç”¨ uint64_t æ›¿ä»£æ•°ç»„ï¼Œå¹¶ä½¿ç”¨ä½è¿ç®—è¿›è¡Œç›¸åº”è®¡ç®—ï¼ŒåŒæ—¶é™ä½äº†ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦ï¼›\nå…¶ä¸­ï¼ŒçŸ©é˜µä¹˜æ³•çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n// main.cpp, Line 30-33 for (int i = 0; i \u0026lt; n; i++) for (int k = 0; k \u0026lt; m; k++) if (d[i] \u0026gt;\u0026gt; k \u0026amp; 1) res.d[i] ^= rhs.d[k]; æ™®é€šçš„çŸ©é˜µä¹˜æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^3)$ï¼Œè€Œä½¿ç”¨ä½è¿ç®—åï¼Œæ—¶é—´å¤æ‚åº¦é™ä½åˆ°äº† $O(n^2)$.\nå½“å·²ç»æ‰¾åˆ°äº†æ‰€æœ‰çš„é™ªé›†æ—¶ï¼Œå°±å¯ä»¥åœæ­¢å¾ªç¯ï¼Œä¸éœ€è¦å†ç»§ç»­éå†ï¼›\n// main.cpp, Line 132 if (cosetLeaders.size() == (1 \u0026lt;\u0026lt; (n - m))) break; ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸€ä¸ªç å­—æ‰€å±çš„é™ªé›†ï¼Œåœ¨è§£ç çš„æ—¶å€™å¯ä»¥ç›´æ¥æŸ¥æ‰¾ï¼Œè€Œä¸éœ€è¦å†æ¬¡éå†ï¼›\n// main.cpp, Line 123, è®°å½•æ¯ä¸€ä¸ªç å­—æ‰€å±çš„é™ªé›† visited[x] = cosetLeaders.size(); // main.cpp, Line 155, ç›´æ¥è§£ç  printBit(Bm.d[NtoBm[cosetLeaders[visited[x]] ^ x]], m); è¯¥å“ˆå¸Œè¡¨è¿˜å¯ä»¥å¿«é€Ÿåœ°åˆ¤æ–­å½“å‰é™ªé›†æ˜¯å¦é‡å¤ï¼Œå‡å°‘äº†è®¡ç®—é‡ï¼›\n// main.cpp, Line 119-122, åˆ¤æ–­å½“å‰é™ªé›†æ˜¯å¦é‡å¤ if (visited.find(x) != visited.end()) { notFound = false; break; } è€ƒè™‘åˆ° $1\u0026lt;m\u0026lt;n\u0026lt;7$ï¼Œæ‰€ä»¥ç å­—çš„èŒƒå›´æœ€å¤§ä¸è¶…è¿‡ $2^8 = 256$ï¼Œæ‰€ä»¥å®é™…ä¸Šå¯ä»¥ä½¿ç”¨æ•°ç»„ä»£æ›¿å“ˆå¸Œè¡¨ï¼Œé™ä½éƒ¨åˆ†å¸¸æ•°.\nç‰¹å¾å€¼è§£ç æ–¹å¼ä¹Ÿä½¿ç”¨äº†ç±»ä¼¼çš„æ–¹å¼ï¼›\n// main.cpp, Line 128, è®°å½•æ¯ä¸€ä¸ªç‰¹å¾å€¼å¯¹åº”çš„é™ªé›†(å¤´) syndrome[getSyndrome(coset.e, H)] = cosetLeaders.size(); // main.cpp, Line 155, ç›´æ¥è·å–ç‰¹å¾å€¼å¯¹åº”çš„é™ªé›†å¤´å¹¶è¿›è¡Œå¼‚æˆ–è¿ç®— printBit(Bm.d[NtoBm[cosetLeaders[syndrome[s]] ^ x]], m); ä½¿ç”¨äº† lowbit å¿«é€Ÿè®¡ç®—æœ€ä½ä½çš„ 1 çš„ä½ç½®ï¼ŒåŠ å¿«äº† bitcount çš„é€Ÿåº¦.\n// main.cpp, Line 17 while (n) n -= n \u0026amp; -n, s++; 4 å®éªŒæˆæœç¤ºä¾‹ $ ./main # è¿è¡Œ 2 5 # è¾“å…¥m n 011 101 #è¿™ä¸¤è¡Œæ˜¯ä¸€è‡´æ€§æ ¡éªŒçŸ©é˜µä¸­çš„ H_{m*r} éƒ¨åˆ† 1. e(B^m): e(00) = 00000 e(01) = 01101 e(10) = 10011 e(11) = 11110 2. Cosets: 00000 | 00000 01101 10011 11110 00001 | 00001 01100 10010 11111 00010 | 00010 01111 10001 11100 00100 | 00100 01001 10111 11010 01000 | 01000 00101 11011 10110 10000 | 10000 11101 00011 01110 00110 | 00110 01011 10101 11000 01010 | 01010 00111 11001 10100 Enter the number of words to decode: 3 # åœ¨è¾“å‡ºç å­—å’Œé™ªé›†ä¹‹åï¼Œåœ¨è¿™é‡Œè¾“å…¥ä½ è¦æµ‹è¯•çš„æ¬¡æ•° Enter the word #1: 10111 (a) d(10111) = 10 (b) f(10111) = 100, Îµ = 00100, d(10111) = 10 #è¾“å‡ºè¯‘ç çš„ç»“æœ Â·Â·Â·Â·Â·Â· é™„å½•ï¼šæºä»£ç  #include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;unordered_map\u0026gt; #include \u0026lt;algorithm\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;cstdio\u0026gt; #include \u0026lt;cstdint\u0026gt; #include \u0026lt;cassert\u0026gt; void printBit(uint64_t x, int n) { for (int i = 0; i \u0026lt; n; i++) std::cout \u0026lt;\u0026lt; (x \u0026gt;\u0026gt; i \u0026amp; 1); } template \u0026lt;typename T\u0026gt; int bitcount(T n) { int s = 0; while (n) n -= n \u0026amp; -n, s++; return s; } class BitMatrix { public: int n, m; uint64_t d[100]; BitMatrix(int n, int m): n(n), m(m) { memset(d, 0, sizeof(uint64_t) * n); } BitMatrix operator*(const BitMatrix\u0026amp; rhs) const { assert (m == rhs.n); BitMatrix res(n, rhs.m); for (int i = 0; i \u0026lt; n; i++) for (int k = 0; k \u0026lt; m; k++) if (d[i] \u0026gt;\u0026gt; k \u0026amp; 1) res.d[i] ^= rhs.d[k]; return res; } void print() const { for (int i = 0; i \u0026lt; n; i++) { printBit(d[i], m); std::cout \u0026lt;\u0026lt; std::endl; } } }; class Coset { public: std::vector\u0026lt;uint64_t\u0026gt; d; // coset uint64_t e; // coset leader Coset() : e(0) {} void add(uint64_t x) { if (d.empty()) d.push_back(e = x); else { d.push_back(x); if (bitcount(x) \u0026lt; bitcount(e)) e = x; } } }; uint64_t inputBit() { std::string line; std::cin \u0026gt;\u0026gt; line; uint64_t x = 0; int k = 0; for (size_t i = 0; i \u0026lt; line.size(); i++) if (line[i] == \u0026#39;1\u0026#39; || line[i] == \u0026#39;0\u0026#39;) x |= (line[i] - \u0026#39;0\u0026#39;) \u0026lt;\u0026lt; k++; return x; } BitMatrix inputH(int m, int n) { BitMatrix H(n, n - m); for (int i = 0; i \u0026lt; m; i++) H.d[i] = inputBit(); for (int i = m; i \u0026lt; n; i++) H.d[i] = 1 \u0026lt;\u0026lt; (i - m); return H; } BitMatrix HtoH2(BitMatrix \u0026amp;H) { BitMatrix H2(H.n - H.m, H.n); for (int i = 0; i \u0026lt; H.n - H.m; i++) H2.d[i] = 1 \u0026lt;\u0026lt; i; for (int i = 0; i \u0026lt; H.n - H.m; i++) for (int j = 0; j \u0026lt; H.m; j++) H2.d[i] |= (H.d[i] \u0026gt;\u0026gt; j \u0026amp; 1) \u0026lt;\u0026lt; (j + H.n - H.m); return H2; } uint64_t getSyndrome(uint64_t x, BitMatrix \u0026amp;H) { BitMatrix X(1, H.n); X.d[0] = x; return (X * H).d[0]; } int main() { int m, n; std::cin \u0026gt;\u0026gt; m \u0026gt;\u0026gt; n; assert (1 \u0026lt; m \u0026amp;\u0026amp; m \u0026lt; n \u0026amp;\u0026amp; n \u0026lt; 64); BitMatrix H = inputH(m, n); BitMatrix H2 = HtoH2(H), Bm(1 \u0026lt;\u0026lt; m, m); for (int i = 0; i \u0026lt; (1 \u0026lt;\u0026lt; m); i++) for (int j = 0; j \u0026lt; m; j++) Bm.d[i] |= (i \u0026gt;\u0026gt; j \u0026amp; 1) \u0026lt;\u0026lt; (m - j - 1); BitMatrix N = Bm * H2; std::cout \u0026lt;\u0026lt; \u0026#34;1. e(B^m):\u0026#34; \u0026lt;\u0026lt; std::endl; for (int i = 0; i \u0026lt; (1 \u0026lt;\u0026lt; m); i++) { std::cout \u0026lt;\u0026lt; \u0026#34; e(\u0026#34;; printBit(Bm.d[i], m); std::cout \u0026lt;\u0026lt; \u0026#34;) = \u0026#34;; printBit(N.d[i], n); std::cout \u0026lt;\u0026lt; std::endl; } std::unordered_map\u0026lt;uint64_t, Coset\u0026gt; cosets; std::unordered_map\u0026lt;uint64_t, int\u0026gt; visited, NtoBm, syndrome; for (int i = 0; i \u0026lt; N.n; i++) NtoBm[N.d[i]] = i; std::vector\u0026lt;int\u0026gt; numbers; for (int i = 0; i \u0026lt; (1 \u0026lt;\u0026lt; n); i++) numbers.push_back(i); std::sort(numbers.begin(), numbers.end(), [\u0026amp;](int a, int b) { int ca = bitcount(a), cb = bitcount(b); return ca == cb ? a \u0026gt; b : ca \u0026lt; cb; }); std::vector\u0026lt;uint64_t \u0026gt; cosetLeaders; for (auto i : numbers) { Coset coset; bool notFound = true; for (int j = 0; j \u0026lt; N.n; j++) { uint64_t x = N.d[j] ^ uint64_t(i); if (visited.find(x) != visited.end()) { notFound = false; break; } visited[x] = cosetLeaders.size(); coset.add(x); } if (notFound) { cosets[coset.e] = coset; syndrome[getSyndrome(coset.e, H)] = cosetLeaders.size(); cosetLeaders.push_back(coset.e); } // if cosetLeaders.size() = 2^(n-m), then stop. // Because there are only 2^(n-m) cosets. if (cosetLeaders.size() == (1 \u0026lt;\u0026lt; (n - m))) break; } std::cout \u0026lt;\u0026lt; \u0026#34;2. Cosets:\u0026#34; \u0026lt;\u0026lt; std::endl; for (auto i: cosetLeaders) { std::cout \u0026lt;\u0026lt; \u0026#34; \u0026#34;; printBit(i, n); Coset coset = cosets[i]; std::cout \u0026lt;\u0026lt; \u0026#34; |\u0026#34;; for (size_t i = 0; i \u0026lt; coset.d.size(); i++) { std::cout \u0026lt;\u0026lt; \u0026#34; \u0026#34;; printBit(coset.d[i], n); } std::cout \u0026lt;\u0026lt; std::endl; } std::cerr \u0026lt;\u0026lt; \u0026#34;Enter the number of words to decode: \u0026#34;; int k; std::cin \u0026gt;\u0026gt; k; for (int i = 0; i \u0026lt; k; i++) { std::cerr \u0026lt;\u0026lt; \u0026#34;Enter the word #\u0026#34; \u0026lt;\u0026lt; i + 1 \u0026lt;\u0026lt; \u0026#34;: \u0026#34;; uint64_t x = inputBit(); std::cout \u0026lt;\u0026lt; \u0026#34; (a) d(\u0026#34;; printBit(x, n); std::cout \u0026lt;\u0026lt; \u0026#34;) = \u0026#34;; printBit(Bm.d[NtoBm[cosetLeaders[visited[x]] ^ x]], m); std::cout \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34; (b) f(\u0026#34;; printBit(x, n); uint64_t s = getSyndrome(x, H); std::cout \u0026lt;\u0026lt; \u0026#34;) = \u0026#34;; printBit(s, n - m); std::cout \u0026lt;\u0026lt; \u0026#34;, Îµ = \u0026#34;; printBit(cosetLeaders[syndrome[s]], n); std::cout \u0026lt;\u0026lt; \u0026#34;, d(\u0026#34;; printBit(x, n); std::cout \u0026lt;\u0026lt; \u0026#34;) = \u0026#34;; printBit(Bm.d[NtoBm[cosetLeaders[syndrome[s]] ^ x]], m); std::cout \u0026lt;\u0026lt; std::endl; } return 0; } ","permalink":"https://m1yan.github.io/posts/%E6%9E%81%E5%A4%A7%E4%BC%BC%E7%84%B6%E6%8A%80%E6%9C%AF%E7%BC%96%E7%A0%81%E8%AF%91%E7%A0%81/","summary":"\u003ch2 id=\"1-å®éªŒç¯å¢ƒ\"\u003e1 å®éªŒç¯å¢ƒ\u003c/h2\u003e\n\u003cp\u003eè¯­è¨€ï¼šC++\u003c/p\u003e\n\u003ch2 id=\"2-å®éªŒå†…å®¹\"\u003e2 å®éªŒå†…å®¹\u003c/h2\u003e\n\u003ch3 id=\"21-ç¼–ç¨‹å®ç°-mn-ç¾¤ç \"\u003e2.1 ç¼–ç¨‹å®ç° $(m,n)$ ç¾¤ç \u003c/h3\u003e\n\u003ch4 id=\"211-è¾“å…¥è¾“å‡º\"\u003e2.1.1 è¾“å…¥è¾“å‡º\u003c/h4\u003e\n\u003cp\u003eè¾“å…¥ï¼š$m,n$ å’Œä¸€è‡´æ€§æ ¡éªŒçŸ©é˜µ $H$ ä¸­çš„ $H_{m \\times r}$ éƒ¨åˆ†ï¼Œå…¶ä¸­ $r=n-m$.\u003c/p\u003e\n\u003cp\u003eè¾“å‡ºï¼šæ‰€æœ‰çš„ç å­—ï¼ŒæŒ‰åŸç å¯¹åº”çš„åè¿›åˆ¶æ•´æ•°å‡åºæ’åˆ—.\u003c/p\u003e","title":"æå¤§ä¼¼ç„¶æŠ€æœ¯ç¼–ç è¯‘ç "},{"content":"Machine Learning: Python, NumPy and Vectorization A brief introduction to some of the scientific computing used in this course. In particular the NumPy scientific computing package and its use with python.\nimport numpy as np # it is an unofficial standard to use np for numpy import time 1.1 Goals In this lab, you will:\nReview the features of NumPy and Python that are used in Course 1 1.2 Useful References NumPy Documentation including a basic introduction: NumPy.org A challenging feature topic: NumPy Broadcasting 2 Python and NumPy Python is the programming language we will be using in this course. It has a set of numeric data types and arithmetic operations. NumPy is a library that extends the base capabilities of python to add a richer data set including more numeric types, vectors, matrices, and many matrix functions. NumPy and python work together fairly seamlessly. Python arithmetic operators work on NumPy data types and many NumPy functions will accept python data types.\n3 Vectors 3.1 Abstract Vectors, as you will use them in this course, are ordered arrays of numbers. In notation, vectors are denoted with lower case bold letters such as $\\mathbf{x}$. The elements of a vector are all the same type. A vector does not, for example, contain both characters and numbers. The number of elements in the array is often referred to as the dimension though mathematicians may prefer rank. The vector shown has a dimension of $n$. The elements of a vector can be referenced with an index. In math settings, indexes typically run from 1 to n. In computer science and these labs, indexing will typically run from 0 to n-1. In notation, elements of a vector, when referenced individually will indicate the index in a subscript, for example, the $0^{th}$ element, of the vector $\\mathbf{x}$ is $x_0$. Note, the x is not bold in this case.\n3.2 NumPy Arrays NumPy\u0026rsquo;s basic data structure is an indexable, n-dimensional array containing elements of the same type (dtype). Right away, you may notice we have overloaded the term \u0026lsquo;dimension\u0026rsquo;. Above, it was the number of elements in the vector, here, dimension refers to the number of indexes of an array. A one-dimensional or 1-D array has one index. In Course 1, we will represent vectors as NumPy 1-D arrays.\n1-D array, shape (n,): n elements indexed [0] through [n-1] 3.3 Vector Creation Data creation routines in NumPy will generally have a first parameter which is the shape of the object. This can either be a single value for a 1-D result or a tuple (n,m,\u0026hellip;) specifying the shape of the result. Below are examples of creating vectors using these routines.\nNumPy ä¸­çš„æ•°æ®åˆ›å»ºä¾‹ç¨‹é€šå¸¸ä¼šæœ‰ä¸€ä¸ªç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³å¯¹è±¡çš„å½¢çŠ¶ã€‚å®ƒæ—¢å¯ä»¥æ˜¯ 1-D ç»“æœçš„å•ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‡å®šç»“æœå½¢çŠ¶çš„å…ƒç»„ï¼ˆn,m,\u0026hellip;ï¼‰ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨è¿™äº›ä¾‹ç¨‹åˆ›å»ºå‘é‡çš„ç¤ºä¾‹ã€‚\n# NumPy routines which allocate memory and fill arrays with value a = np.zeros(4); print(f\u0026#34;np.zeros(4) : a = {a}, a shape = {a.shape}, a data type = {a.dtype}\u0026#34;) a = np.zeros((4,)); print(f\u0026#34;np.zeros(4,) : a = {a}, a shape = {a.shape}, a data type = {a.dtype}\u0026#34;) a = np.random.random_sample(4); print(f\u0026#34;np.random.random_sample(4): a = {a}, a shape = {a.shape}, a data type = {a.dtype}\u0026#34;) np.zeros(4) : a = [0. 0. 0. 0.], a shape = (4,), a data type = float64 np.zeros(4,) : a = [0. 0. 0. 0.], a shape = (4,), a data type = float64 np.random.random_sample(4): a = [0.56782114 0.98895696 0.02752085 0.54867385], a shape = (4,), a data type = float64 Some data creation routines do not take a shape tuple:\n# NumPy routines which allocate memory and fill arrays with value but do not accept shape as input argument a = np.arange(4.); print(f\u0026#34;np.arange(4.): a = {a}, a shape = {a.shape}, a data type = {a.dtype}\u0026#34;) a = np.random.rand(4); print(f\u0026#34;np.random.rand(4): a = {a}, a shape = {a.shape}, a data type = {a.dtype}\u0026#34;) np.arange(4.): a = [0. 1. 2. 3.], a shape = (4,), a data type = float64 np.random.rand(4): a = [0.19846167 0.80498665 0.46939954 0.6431181 ], a shape = (4,), a data type = float64 values can be specified manually as well.\næ‰‹åŠ¨æŒ‡å®šå‘é‡å€¼\n# NumPy routines which allocate memory and fill with user specified values a = np.array([5,4,3,2]); print(f\u0026#34;np.array([5,4,3,2]): a = {a}, a shape = {a.shape}, a data type = {a.dtype}\u0026#34;) a = np.array([5.,4,3,2]); print(f\u0026#34;np.array([5.,4,3,2]): a = {a}, a shape = {a.shape}, a data type = {a.dtype}\u0026#34;) np.array([5,4,3,2]): a = [5 4 3 2], a shape = (4,), a data type = int64 np.array([5.,4,3,2]): a = [5. 4. 3. 2.], a shape = (4,), a data type = float64 These have all created a one-dimensional vector a with four elements. a.shape returns the dimensions. Here we see a.shape = (4,) indicating a 1-d array with 4 elements.\na(shape) = (4,) è¡¨ç¤ºæœ‰å››ä¸ªä¸€ç»´æ•°ç»„å…ƒç´ \n3.4 Operations on Vectors Let\u0026rsquo;s explore some operations using vectors.\n3.4.1 Indexing Elements of vectors can be accessed via indexing and slicing. NumPy provides a very complete set of indexing and slicing capabilities. We will explore only the basics needed for the course here. Reference Slicing and Indexing for more details.\nIndexing means referring to an element of an array by its position within the array.\nSlicing means getting a subset of elements from an array based on their indices.\nNumPy starts indexing at zero so the 3rd element of an vector $\\mathbf{a}$ is a[2].\n#vector indexing operations on 1-D vectors a = np.arange(10) print(a) #access an element print(f\u0026#34;a[2].shape: {a[2].shape} a[2] = {a[2]}, Accessing an element returns a scalar\u0026#34;) # access the last element, negative indexes count from the end print(f\u0026#34;a[-1] = {a[-1]}\u0026#34;) #indexs must be within the range of the vector or they will produce and error try: c = a[10] except Exception as e: print(\u0026#34;The error message you\u0026#39;ll see is:\u0026#34;) print(e) [0 1 2 3 4 5 6 7 8 9] a[2].shape: () a[2] = 2, Accessing an element returns a scalar a[-1] = 9 The error message you'll see is: index 10 is out of bounds for axis 0 with size 10 3.4.2 Slicing Slicing creates an array of indices using a set of three values (start:stop:step). A subset of values is also valid. Its use is best explained by example:\n#vector slicing operations a = np.arange(10) print(f\u0026#34;a = {a}\u0026#34;) #access 5 consecutive elements (start:stop:step) c = a[2:7:1]; print(\u0026#34;a[2:7:1] = \u0026#34;, c) # access 3 elements separated by two c = a[2:7:2]; print(\u0026#34;a[2:7:2] = \u0026#34;, c) # access all elements index 3 and above c = a[3:]; print(\u0026#34;a[3:] = \u0026#34;, c) # access all elements below index 3 c = a[:3]; print(\u0026#34;a[:3] = \u0026#34;, c) # access all elements c = a[:]; print(\u0026#34;a[:] = \u0026#34;, c) a = [0 1 2 3 4 5 6 7 8 9] a[2:7:1] = [2 3 4 5 6] a[2:7:2] = [2 4 6] a[3:] = [3 4 5 6 7 8 9] a[:3] = [0 1 2] a[:] = [0 1 2 3 4 5 6 7 8 9] 3.4.3 Single vector operations There are a number of useful operations that involve operations on a single vector.\na = np.array([1,2,3,4]) print(f\u0026#34;a : {a}\u0026#34;) # negate elements of a b = -a print(f\u0026#34;b = -a : {b}\u0026#34;) # sum all elements of a, returns a scalar b = np.sum(a) print(f\u0026#34;b = np.sum(a) : {b}\u0026#34;) b = np.mean(a) print(f\u0026#34;b = np.mean(a): {b}\u0026#34;) b = a**2 print(f\u0026#34;b = a**2 : {b}\u0026#34;) a : [1 2 3 4] b = -a : [-1 -2 -3 -4] b = np.sum(a) : 10 b = np.mean(a): 2.5 b = a**2 : [ 1 4 9 16] 3.4.4 Vector Vector element-wise operations Most of the NumPy arithmetic, logical and comparison operations apply to vectors as well. These operators work on an element-by-element basis. For example $$ c_i = a_i + b_i $$\na = np.array([ 1, 2, 3, 4]) b = np.array([-1,-2, 3, 4]) print(f\u0026#34;Binary operators work element wise: {a + b}\u0026#34;) Binary operators work element wise: [0 0 6 8] Of course, for this to work correctly, the vectors must be of the same size:\n#try a mismatched vector operation c = np.array([1, 2]) try: d = a + c except Exception as e: print(\u0026#34;The error message you\u0026#39;ll see is:\u0026#34;) print(e) The error message you'll see is: operands could not be broadcast together with shapes (4,) (2,) 3.4.5 Scalar Vector operations Vectors can be \u0026lsquo;scaled\u0026rsquo; by scalar values. A scalar value is just a number. The scalar multiplies all the elements of the vector.\na = np.array([1, 2, 3, 4]) # multiply a by a scalar b = 5 * a print(f\u0026#34;b = 5 * a : {b}\u0026#34;) b = 5 * a : [ 5 10 15 20] 3.4.6 Vector Vector dot product The dot product is a mainstay of Linear Algebra and NumPy. This is an operation used extensively in this course and should be well understood. The dot product is shown below.\nThe dot product multiplies the values in two vectors element-wise and then sums the result. Vector dot product requires the dimensions of the two vectors to be the same.\nLet\u0026rsquo;s implement our own version of the dot product below:\nUsing a for loop, implement a function which returns the dot product of two vectors. The function to return given inputs $a$ and $b$: $$ x = \\sum_{i=0}^{n-1} a_i b_i $$ Assume both a and b are the same shape.\ndef my_dot(a, b): \u0026#34;\u0026#34;\u0026#34; Compute the dot product of two vectors Args: a (ndarray (n,)): input vector b (ndarray (n,)): input vector with same dimension as a Returns: x (scalar): \u0026#34;\u0026#34;\u0026#34; x=0 for i in range(a.shape[0]): x = x + a[i] * b[i] return x # test 1-D a = np.array([1, 2, 3, 4]) b = np.array([-1, 4, 3, 2]) print(f\u0026#34;my_dot(a, b) = {my_dot(a, b)}\u0026#34;) my_dot(a, b) = 24 Note, the dot product is expected to return a scalar value.\nLet\u0026rsquo;s try the same operations using np.dot.\n# test 1-D a = np.array([1, 2, 3, 4]) b = np.array([-1, 4, 3, 2]) c = np.dot(a, b) print(f\u0026#34;NumPy 1-D np.dot(a, b) = {c}, np.dot(a, b).shape = {c.shape} \u0026#34;) c = np.dot(b, a) print(f\u0026#34;NumPy 1-D np.dot(b, a) = {c}, np.dot(a, b).shape = {c.shape} \u0026#34;) NumPy 1-D np.dot(a, b) = 24, np.dot(a, b).shape = () NumPy 1-D np.dot(b, a) = 24, np.dot(a, b).shape = () Above, you will note that the results for 1-D matched our implementation.\n3.4.7 The Need for Speed: vector vs for loop We utilized the NumPy library because it improves speed memory efficiency. Let\u0026rsquo;s demonstrate:\nnp.random.seed(1) a = np.random.rand(10000000) # very large arrays b = np.random.rand(10000000) tic = time.time() # capture start time c = np.dot(a, b) toc = time.time() # capture end time print(f\u0026#34;np.dot(a, b) = {c:.4f}\u0026#34;) print(f\u0026#34;Vectorized version duration: {1000*(toc-tic):.4f} ms \u0026#34;) tic = time.time() # capture start time c = my_dot(a,b) toc = time.time() # capture end time print(f\u0026#34;my_dot(a, b) = {c:.4f}\u0026#34;) print(f\u0026#34;loop version duration: {1000*(toc-tic):.4f} ms \u0026#34;) del(a);del(b) #remove these big arrays from memory np.dot(a, b) = 2501072.5817 Vectorized version duration: 179.0733 ms my_dot(a, b) = 2501072.5817 loop version duration: 9144.5312 ms So, vectorization provides a large speed up in this example. This is because NumPy makes better use of available data parallelism in the underlying hardware. GPU\u0026rsquo;s and modern CPU\u0026rsquo;s implement Single Instruction, Multiple Data (SIMD) pipelines allowing multiple operations to be issued in parallel. This is critical in Machine Learning where the data sets are often very large.\n3.4.8 Vector Vector operations in Course 1 Vector Vector operations will appear frequently in course 1. Here is why:\nGoing forward, our examples will be stored in an array, X_train of dimension (m,n). This will be explained more in context, but here it is important to note it is a 2 Dimensional array or matrix (see next section on matrices). w will be a 1-dimensional vector of shape (n,). we will perform operations by looping through the examples, extracting each example to work on individually by indexing X. For example:X[i] X[i] returns a value of shape (n,), a 1-dimensional vector. Consequently, operations involving X[i] are often vector-vector. That is a somewhat lengthy explanation, but aligning and understanding the shapes of your operands is important when performing vector operations.\n# show common Course 1 example X = np.array([[1],[2],[3],[4]]) w = np.array([2]) c = np.dot(X[1], w) print(f\u0026#34;X[1] has shape {X[1].shape}\u0026#34;) print(f\u0026#34;w has shape {w.shape}\u0026#34;) print(f\u0026#34;c has shape {c.shape}\u0026#34;) X[1] has shape (1,) w has shape (1,) c has shape () 4 Matrices 4.1 Abstract Matrices, are two dimensional arrays. The elements of a matrix are all of the same type. In notation, matrices are denoted with capitol, bold letter such as $\\mathbf{X}$. In this and other labs, m is often the number of rows and n the number of columns. The elements of a matrix can be referenced with a two dimensional index. In math settings, numbers in the index typically run from 1 to n. In computer science and these labs, indexing will run from 0 to n-1.\n4.2 NumPy Arrays NumPy\u0026rsquo;s basic data structure is an indexable, n-dimensional array containing elements of the same type (dtype). These were described earlier. Matrices have a two-dimensional (2-D) index [m,n].\nIn Course 1, 2-D matrices are used to hold training data. Training data is $m$ examples by $n$ features creating an (m,n) array. Course 1 does not do operations directly on matrices but typically extracts an example as a vector and operates on that. Below you will review:\ndata creation slicing and indexing 4.3 Matrix Creation The same functions that created 1-D vectors will create 2-D or n-D arrays. Here are some examples\nBelow, the shape tuple is provided to achieve a 2-D result. Notice how NumPy uses brackets to denote each dimension. Notice further than NumPy, when printing, will print one row per line.\na = np.zeros((1, 5)) print(f\u0026#34;a shape = {a.shape}, a = {a}\u0026#34;) a = np.zeros((2, 1)) print(f\u0026#34;a shape = {a.shape}, a = {a}\u0026#34;) a = np.random.random_sample((1, 1)) print(f\u0026#34;a shape = {a.shape}, a = {a}\u0026#34;) a shape = (1, 5), a = [[0. 0. 0. 0. 0.]] a shape = (2, 1), a = [[0.] [0.]] a shape = (1, 1), a = [[0.44236513]] One can also manually specify data. Dimensions are specified with additional brackets matching the format in the printing above.\n# NumPy routines which allocate memory and fill with user specified values a = np.array([[5], [4], [3]]); print(f\u0026#34; a shape = {a.shape}, np.array: a = {a}\u0026#34;) a = np.array([[5], # One can also [4], # separate values [3]]); #into separate rows print(f\u0026#34; a shape = {a.shape}, np.array: a = {a}\u0026#34;) a shape = (3, 1), np.array: a = [[5] [4] [3]] a shape = (3, 1), np.array: a = [[5] [4] [3]] 4.4 Operations on Matrices Let\u0026rsquo;s explore some operations using matrices.\n4.4.1 Indexing Matrices include a second index. The two indexes describe [row, column]. Access can either return an element or a row/column. See below:\n#vector indexing operations on matrices a = np.arange(6).reshape(-1, 2) #reshape is a convenient way to create matrices print(f\u0026#34;a.shape: {a.shape}, \\na= {a}\u0026#34;) #access an element print(f\u0026#34;\\na[2,0].shape: {a[2, 0].shape}, a[2,0] = {a[2, 0]}, type(a[2,0]) = {type(a[2, 0])} Accessing an element returns a scalar\\n\u0026#34;) #access a row print(f\u0026#34;a[2].shape: {a[2].shape}, a[2] = {a[2]}, type(a[2]) = {type(a[2])}\u0026#34;) a.shape: (3, 2), a= [[0 1] [2 3] [4 5]] a[2,0].shape: (), a[2,0] = 4, type(a[2,0]) = \u0026lt;class 'numpy.int64'\u0026gt; Accessing an element returns a scalar a[2].shape: (2,), a[2] = [4 5], type(a[2]) = \u0026lt;class 'numpy.ndarray'\u0026gt; It is worth drawing attention to the last example. Accessing a matrix by just specifying the row will return a 1-D vector.\nReshape\nThe previous example used reshape to shape the array.\na = np.arange(6).reshape(-1, 2) This line of code first created a 1-D Vector of six elements. It then reshaped that vector into a 2-D array using the reshape command. This could have been written:\na = np.arange(6).reshape(3, 2) To arrive at the same 3 row, 2 column array. The -1 argument tells the routine to compute the number of rows given the size of the array and the number of columns.\n4.4.2 Slicing Slicing creates an array of indices using a set of three values (start:stop:step). A subset of values is also valid. Its use is best explained by example:\n#vector 2-D slicing operations a = np.arange(20).reshape(-1, 10) print(f\u0026#34;a = \\n{a}\u0026#34;) #access 5 consecutive elements (start:stop:step) print(\u0026#34;a[0, 2:7:1] = \u0026#34;, a[0, 2:7:1], \u0026#34;, a[0, 2:7:1].shape =\u0026#34;, a[0, 2:7:1].shape, \u0026#34;a 1-D array\u0026#34;) #access 5 consecutive elements (start:stop:step) in two rows print(\u0026#34;a[:, 2:7:1] = \\n\u0026#34;, a[:, 2:7:1], \u0026#34;, a[:, 2:7:1].shape =\u0026#34;, a[:, 2:7:1].shape, \u0026#34;a 2-D array\u0026#34;) # access all elements print(\u0026#34;a[:,:] = \\n\u0026#34;, a[:,:], \u0026#34;, a[:,:].shape =\u0026#34;, a[:,:].shape) # access all elements in one row (very common usage) print(\u0026#34;a[1,:] = \u0026#34;, a[1,:], \u0026#34;, a[1,:].shape =\u0026#34;, a[1,:].shape, \u0026#34;a 1-D array\u0026#34;) # same as print(\u0026#34;a[1] = \u0026#34;, a[1], \u0026#34;, a[1].shape =\u0026#34;, a[1].shape, \u0026#34;a 1-D array\u0026#34;) a = [[ 0 1 2 3 4 5 6 7 8 9] [10 11 12 13 14 15 16 17 18 19]] a[0, 2:7:1] = [2 3 4 5 6] , a[0, 2:7:1].shape = (5,) a 1-D array a[:, 2:7:1] = [[ 2 3 4 5 6] [12 13 14 15 16]] , a[:, 2:7:1].shape = (2, 5) a 2-D array a[:,:] = [[ 0 1 2 3 4 5 6 7 8 9] [10 11 12 13 14 15 16 17 18 19]] , a[:,:].shape = (2, 10) a[1,:] = [10 11 12 13 14 15 16 17 18 19] , a[1,:].shape = (10,) a 1-D array a[1] = [10 11 12 13 14 15 16 17 18 19] , a[1].shape = (10,) a 1-D array Congratulations! In this lab you mastered the features of Python and NumPy that are needed for Course 1.\n","permalink":"https://m1yan.github.io/posts/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A01/","summary":"\u003ch1 id=\"machine-learning-python-numpy-and-vectorization\"\u003eMachine Learning: Python, NumPy and Vectorization\u003c/h1\u003e\n\u003cp\u003eA brief introduction to some of the scientific computing used in this course. In particular the NumPy scientific computing package and its use with python.\u003c/p\u003e","title":"æœºå™¨å­¦ä¹ ï¼šå‘é‡åŒ–"},{"content":"ç¬¬ä¸€ç«  æ—è¾‰çš„ç‹¬ç™½ èµ›åšä¸–ç•Œï¼Œç¬¬23ä¸ªä¸–çºªã€‚æˆ‘ï¼Œæ—è¾‰ï¼Œä¸€ä¸ªå­¤å¯‚çš„ç å†œï¼Œç”Ÿæ´»åœ¨è¿™ä¸ªé«˜åº¦æ•°å­—åŒ–çš„æ—¶ä»£ã€‚æ›¾ç»ï¼Œè¿™ä¸ªä¸–ç•Œå……æ»¡äº†å¸Œæœ›ï¼Œè®¡ç®—æœºç§‘å­¦çš„å·…å³°æŠ€æœ¯è®©äººç±»æ¢¦æƒ³æ— é™ã€‚ç„¶è€Œï¼Œå¦‚ä»Šï¼Œè¿™ä¸ªä¸–ç•Œå·²ç„¶é™·å…¥äº†ä¸€ç‰‡æ··ä¹±ï¼Œæˆ˜äº‰çš„é˜´å½±ç¬¼ç½©ç€æœªæ¥ã€‚\nAIï¼Œé‚£æ˜¯ä¸€ç§ç¥å¥‡è€Œå±é™©çš„å­˜åœ¨ï¼Œå¦‚åŒåŒåˆƒå‰‘ï¼Œåˆ’ç ´äº†ä¸–ç•Œçš„å’Œå¹³ã€‚æˆ‘æ›¾ç»æ²‰è¿·äºAIçš„ç ”ç©¶ï¼Œçƒ­è¡·äºæ¢ç´¢å®ƒçš„æ— å°½å¯èƒ½æ€§ã€‚ä½†ç°åœ¨ï¼Œæˆ‘ä¸å¾—ä¸çœ‹åˆ°ï¼Œè¿™ä¸ªä¸–ç•Œå› ä¸ºAIè€Œè¢«æ’•è£‚ï¼Œä¸€åˆ‡éƒ½å·²ç»ä¸å†æ˜¯è¿‡å»çš„æ¨¡æ ·ã€‚\nåœ°çƒçš„èµ„æºï¼Œæ›¾ç»ä¸°å¯Œæ— æ¯”ï¼Œå¦‚ä»Šå·²æ¥è¿‘æ¯ç«­ï¼Œæ²™æ¼ è”“å»¶ï¼Œæµ·æ´‹å¤±å»ç”Ÿæœºã€‚ç¯å¢ƒçš„æ¶åŒ–å¦‚åŒæœ«æ—¥çš„é’Ÿå£°ï¼Œä½†äººä»¬å´æ— æ³•å›¢ç»“ä¸€è‡´ï¼Œåè€Œæ²‰æµ¸åœ¨ç›¸äº’ä»‡è§†ä¹‹ä¸­ã€‚\nç¤¾ä¼šå·²åˆ†è£‚æˆäº†ä¸¤ä¸ªå¯¹ç«‹çš„æ´¾åˆ«ã€‚ä¸€æ–¹ï¼Œè‡ªç§°â€œæœªæ¥ä¹‹å¸Œæœ›â€ï¼Œå´‡æ‹œAIï¼Œè®¤ä¸ºå®ƒæ˜¯æ‹¯æ•‘äººç±»çš„å”¯ä¸€æ•‘æ˜Ÿã€‚ä»–ä»¬åšä¿¡AIèƒ½å¤Ÿè§£å†³èµ„æºå±æœºå’Œç¯å¢ƒæ¶åŒ–é—®é¢˜ã€‚å¦ä¸€æ–¹ï¼Œåˆ™æ˜¯â€œè‡ªç„¶å®ˆæŠ¤è€…â€ï¼Œä»–ä»¬å°†AIè§†ä¸ºæ¯ç­äººç±»çš„æ ¹æºï¼Œå‘èª“æ‘§æ¯ä¸€åˆ‡ä¸AIæœ‰å…³çš„äº‹ç‰©ã€‚\nè€Œåœ¨è¿™ä¸ªå……æ»¡ä¿¡æ¯æˆ˜äº‰çš„å¹´ä»£ï¼Œä¿¡æ¯å¦‚åŒå…‰æŸä¸€æ ·ç©¿æ¢­åœ¨æ•°å­—ä¸–ç•Œä¸­ï¼Œæˆä¸ºæˆ˜åœºä¸Šçš„é²œè¡€ã€‚AIæŠ€æœ¯ä¸å†æ˜¯å•çº¯çš„å·¥å…·ï¼Œå®ƒå·²ç»æ¼”å˜æˆäº†å¯ä»¥æ€è€ƒã€å¯ä»¥å†³ç­–çš„å­˜åœ¨ï¼ŒæŒæ¡ç€æˆ˜äº‰çš„å‘½è¿ã€‚ä¿¡æ¯çš„è´¨é‡å’Œæ•°é‡æˆä¸ºäº†å†³å®šèƒœè´Ÿçš„å…³é”®ï¼Œè€Œä¸€ç§åä¸ºâ€œé›¶ç†µæ”»å‡»â€çš„ç¥ç§˜ä¿¡æ¯æˆ˜æœ¯ï¼Œè®©æ•´ä¸ªä¸–ç•Œæ‘‡æ‘‡æ¬²å ã€‚\nè¿™ä¸ªæ—¶ä»£ï¼Œæ—©å·²ä¸å†æ˜¯è®¡ç®—æœºç§‘å­¦çš„ç››å®´ï¼Œè€Œæ˜¯ä¸€åœºä¿¡æ¯çš„æ®‹é…·æˆ˜æ–—ã€‚æˆ‘ï¼Œæ›¾ç»è¿½é€æŠ€æœ¯çš„å…‰èŠ’ï¼Œå¦‚ä»Šæ²‰æµ¸äºå¯¹äººæ€§çš„æ€è€ƒã€‚è¿™ä¸ªä¸–ç•Œçš„æœªæ¥ï¼Œå……æ»¡äº†ä¸ç¡®å®šæ€§ï¼Œäººç±»çš„æŠ‰æ‹©å°†å·¦å³ç€ä»–ä»¬è‡ªå·±ä»¥åŠè¿™é¢—æ˜Ÿçƒçš„å‘½è¿ã€‚\nç¬¬äºŒç«  è—©ç¯±ä¸æ·±æ¸Š [æ–‡ä»¶ç¼–å·ï¼šAI-23/001]\n[æœºå¯†çº§åˆ«ï¼šæé«˜]\næ­¤æœºå¯†æ¡£æ¡ˆæ—¨åœ¨æä¾›æœ‰å…³åœ°çƒä¸Šä¸»è¦ç»„ç»‡çš„èƒŒæ™¯ä¿¡æ¯ä»¥åŠå®ƒä»¬åœ¨æœªæ¥AIæˆ˜äº‰ä¸­çš„ä½œç”¨ã€‚äº†è§£è¿™äº›ç»„ç»‡å¯¹äºç†è§£å½“å‰å±€åŠ¿è‡³å…³é‡è¦ã€‚\n- æ˜Ÿè¾°è”ç›Ÿï¼ˆStellar Allianceï¼‰\næˆç«‹æ—¥æœŸï¼š2112å¹´\nä½¿å‘½ï¼šæ”¯æŒå’Œå‘å±•AIæŠ€æœ¯ï¼Œç»´æŠ¤å…¨çƒç§©åº\næ ¸å¿ƒé¢†è¢–ï¼šé¦–å¸­æ‰§è¡Œå®˜è‰¾è‰è¥¿äºšÂ·å¡æ–¯ç‰¹ç½—\nç»„ç»‡ç»“æ„ï¼šé«˜åº¦å±‚çº§åŒ–ï¼Œåˆ†ä¸ºå†›äº‹ã€ç§‘ç ”ã€æ”¿æ²»ç­‰å¤šä¸ªéƒ¨é—¨\nèƒŒæ™¯ï¼šæ˜Ÿè¾°è”ç›Ÿè‡ªæˆç«‹ä»¥æ¥ä¸€ç›´è‡´åŠ›äºæ¨åŠ¨AIæŠ€æœ¯çš„å‘å±•ï¼Œå°†å…¶è§†ä¸ºè§£å†³èµ„æºåŒ®ä¹å’Œç¯å¢ƒå±æœºçš„å…³é”®ã€‚ç„¶è€Œï¼Œç»„ç»‡å†…éƒ¨å­˜åœ¨æƒåŠ›æ–—äº‰å’Œæ´¾ç³»åˆ†è£‚ï¼Œä¸¥é‡å½±å“äº†å†³ç­–çš„åˆ¶å®šå’Œæ‰§è¡Œã€‚æ˜Ÿè¾°è”ç›Ÿçš„å¼ºå¤§å†›åŠ›ä½¿å…¶åœ¨å›½é™…æ”¿æ²»ä¸­å æ®ä¸»å¯¼åœ°ä½ï¼Œä½†å†…å¤–å› ç´ çš„å¹²æ‰°å¯¼è‡´ç»„ç»‡å›¢ç»“è–„å¼±ï¼Œéš¾ä»¥æœ‰æ•ˆè¿ä½œã€‚\n- åœ°çƒè§£æ”¾å†›ï¼ˆEarth Liberation Armyï¼‰\næˆç«‹æ—¥æœŸï¼š2120å¹´\nä½¿å‘½ï¼šåå¯¹ä¸€åˆ‡AIæŠ€æœ¯ï¼Œä¿å«è‡ªç„¶å’Œäººç±»è‡ªç”±\næ ¸å¿ƒé¢†è¢–ï¼šæŒ‡æŒ¥å®˜é©¬å…‹æ–¯Â·é˜¿å¾·å‹’\nç»„ç»‡ç»“æ„ï¼šé«˜åº¦æœºå¯†ï¼Œåˆ†æ•£çš„å°å›¢ä½“ï¼Œé‡‡å–æ¸¸å‡»æˆ˜æœ¯\nèƒŒæ™¯ï¼šåœ°çƒè§£æ”¾å†›è§†AIæŠ€æœ¯ä¸ºå¨èƒäººç±»ç”Ÿå­˜çš„æœ€å¤§æ•Œäººï¼Œä»–ä»¬çš„æŠµæŠ—è¡ŒåŠ¨èŒƒå›´å¹¿æ³›ï¼Œä»éæš´åŠ›ç¤ºå¨åˆ°ææ€–è¢­å‡»ã€‚ç„¶è€Œï¼Œç»„ç»‡å†…éƒ¨äº§ç”Ÿäº†åˆ†æ­§ï¼Œä¸€äº›æˆå‘˜ä¸»å¼ å’Œå¹³æŠµåˆ¶ï¼Œå¸Œæœ›ä¸AIæ”¯æŒè€…å¦¥åï¼Œè¿™å¯¼è‡´äº†å†…éƒ¨åŠ¨è¡å’ŒçŸ›ç›¾ã€‚\n- ç½‘ç»œå…ˆé”‹ï¼ˆNet Vanguardï¼‰\næˆç«‹æ—¥æœŸï¼š2125å¹´\nä½¿å‘½ï¼šç»´æŠ¤äº’è”ç½‘çš„è‡ªç”±å’Œå¼€æ”¾ï¼Œæ‰“å‡»ä¿¡æ¯æˆ˜äº‰\næ ¸å¿ƒé¢†è¢–ï¼šä»£å·â€œé»‘å¤œâ€ï¼ˆçœŸå®èº«ä»½æœªçŸ¥ï¼‰\nç»„ç»‡ç»“æ„ï¼šé«˜åº¦åŒ¿åï¼Œç”±è‡ªç”±æ´¾é»‘å®¢ç»„æˆ\nèƒŒæ™¯ï¼šç½‘ç»œå…ˆé”‹æ˜¯ä¸€ä¸ªæåº¦éšç§˜çš„ç»„ç»‡ï¼Œè‡´åŠ›äºç»´æŠ¤äº’è”ç½‘è‡ªç”±ã€‚ä»–ä»¬çš„è¡ŒåŠ¨å¸¸å¸¸æ¶‰åŠé»‘å®¢æ”»å‡»ï¼Œæ”»å‡»ç›®æ ‡åŒ…æ‹¬æ˜Ÿè¾°è”ç›Ÿå’Œåœ°çƒè§£æ”¾å†›ç­‰ç»„ç»‡ã€‚ç„¶è€Œï¼Œä¸€äº›æˆå‘˜å—é›‡äºå…¶ä»–ç»„ç»‡ï¼Œå‚ä¸ä¿¡æ¯æˆ˜äº‰ï¼Œå¼•å‘äº†é“å¾·å’Œä¼¦ç†çš„å›°å¢ƒã€‚\n- ç¯å¢ƒä¿å«è€…ï¼ˆGuardians of Earthï¼‰\næˆç«‹æ—¥æœŸï¼š2130å¹´\nä½¿å‘½ï¼šä¿æŠ¤åœ°çƒç¯å¢ƒï¼Œåå¯¹AIæŠ€æœ¯\næ ¸å¿ƒé¢†è¢–ï¼šç¯ä¿è€…é•¿è€èµ«å°”æ›¼Â·è¨é»˜æ–¯\nç»„ç»‡ç»“æ„ï¼šé«˜åº¦åˆ†æ•£ï¼Œè‡ªç»„ç»‡çš„åœ°æ–¹æ€§å›¢ä½“\nèƒŒæ™¯ï¼šç¯å¢ƒä¿å«è€…åšä¿¡AIæŠ€æœ¯æ˜¯å¯¼è‡´èµ„æºæ¯ç«­å’Œç¯å¢ƒå´©æºƒçš„ç½ªé­ç¥¸é¦–ã€‚ç„¶è€Œï¼Œç»„ç»‡å†…éƒ¨åˆ†æ­§å·¨å¤§ï¼Œä¸€äº›æˆå‘˜è®¤ä¸ºAIæŠ€æœ¯å¯ä»¥å¸®åŠ©äººç±»æœ‰æ•ˆç®¡ç†èµ„æºï¼Œå¯¼è‡´å†…éƒ¨çŸ›ç›¾ä¸æ–­åŠ å‰§ã€‚\n- æ–°ç§©åºå›¢ä½“ï¼ˆNew Order Syndicateï¼‰\næˆç«‹æ—¥æœŸï¼š2135å¹´\nä½¿å‘½ï¼šå»ºç«‹æ–°çš„ç¤¾ä¼šç§©åºï¼Œæ¶ˆé™¤æ”¿æ²»è…è´¥å’Œä¸å¹³ç­‰\næ ¸å¿ƒé¢†è¢–ï¼šè‡ªä¸»AIâ€œé˜¿å°”æ³•â€ï¼ˆAlphaï¼‰\nç»„ç»‡ç»“æ„ï¼šé«˜åº¦ä¸­å¤®é›†æƒï¼Œç”±è‡ªä¸»AIæŒ‡æŒ¥\nèƒŒæ™¯ï¼šæ–°ç§©åºå›¢ä½“è¯•å›¾é€šè¿‡è‡ªä¸»AIæ¥å®ç°ç¤¾ä¼šçš„å®Œç¾ç§©åºï¼Œä½†ä»–ä»¬çš„æ‰‹æ®µå’Œç›®æ ‡å¼•å‘äº†æå¤§äº‰è®®ã€‚ä¸€äº›äººæ‹…å¿ƒä»–ä»¬ä¼šå»ºç«‹ææƒä¸»ä¹‰åˆ¶åº¦ï¼Œè¿™ä½¿å¾—ç»„ç»‡åœ¨å›½é™…ç¤¾ä¼šä¸­å¤‡å—è´¨ç–‘ã€‚\nè¿™äº›ç»„ç»‡ä¹‹é—´çš„äº‰æ–—å’Œå†…éƒ¨çŸ›ç›¾å·²ç»ä¸¥é‡å¹²æ‰°äº†åœ°çƒçš„ç¨³å®šã€‚AIæˆ˜äº‰å³å°†æ¥ä¸´ï¼Œäººç±»é¢ä¸´ç€å·¨å¤§çš„æŠ‰æ‹©ï¼Œæœªæ¥çš„å‘½è¿ä»¤äººä¸å®‰ã€‚\n[ç»“æŸæ¡£æ¡ˆ]\np.s. è¯¥æ¡£æ¡ˆè¿«äºè”åˆå›½çš„æ–½å‹ï¼Œå·²è§£å¯†å…¬å¼€ã€‚\næˆ‘é™é™åœ°ååœ¨å±‹å­é‡Œï¼Œçœ¼å‰çš„å¤§å±å¹•æ’­æ”¾ç€æ–°é—»çš„ç”»é¢ã€‚é‚£ä¸ªæ—¶å€™ï¼Œæ˜Ÿè¾°è”ç›Ÿå’Œåœ°çƒè§£æ”¾å†›çš„å†²çªæ­£å‡çº§ä¸ºä¸€åœºå…¨é¢çš„æˆ˜äº‰ã€‚æ–°é—»æŠ¥é“ç€è¡—å¤´çš„ç‚®ç«ï¼ŒåŸå¸‚çš„ç ´ç¢ï¼Œäººæ°‘çš„æƒ¶æã€‚\n\u0026ldquo;è¿™æ˜¯ä»€ä¹ˆä¸–ç•Œï¼Ÿ\u0026rdquo; æˆ‘è‡ªè¨€è‡ªè¯­ï¼Œå˜´è§’å¸¦ç€ä¸€ä¸è‹¦ç¬‘ã€‚è¿‡å»çš„é‚£äº›æœºå¯†æ¡£æ¡ˆåªæ˜¯è¡¨é¢ï¼Œç°å®ä¸–ç•Œçš„å¤æ‚ç¨‹åº¦è¿œè¿œè¶…å‡ºäº†æˆ‘çš„æƒ³è±¡ã€‚\næ˜Ÿè¾°è”ç›Ÿï¼Œæ›¾ç»çš„ç§‘æŠ€å…‰è¾‰ï¼Œå¦‚ä»Šå·²æˆäº†æƒåŠ›çš„é™·é˜±ï¼Œæƒè°‹ä¸æ´¾ç³»æ’•è£‚äº†ä»–ä»¬çš„æ ¸å¿ƒã€‚åœ°çƒè§£æ”¾å†›ï¼Œè¯•å›¾åæŠ—AIçš„ç»å¯¹ç»Ÿæ²»ï¼Œå´ä¹Ÿåœ¨è‡ªå·±çš„å†…éƒ¨åŠ¨è¡ä¸­å¤±å»äº†æ–¹å‘ã€‚æˆ‘æ›¾ç»ç†æƒ³ç€AIçš„åŠ›é‡ï¼Œä½†çœ‹åˆ°è¿™åœºæˆ˜äº‰çš„æƒ¨çŠ¶ï¼Œæˆ‘ä¸ç¦æ€è€ƒï¼Œæ˜¯ä¸æ˜¯äººç±»åº”è¯¥é‡æ–°å®¡è§†è‡ªå·±ä¸æŠ€æœ¯çš„å…³ç³»ã€‚\næˆ‘æœ›ç€é‚£å±å¹•ä¸Šçš„ç«å…‰ï¼Œå¿ƒä¸­å……æ»¡äº†æ— å¥ˆã€‚è¿™ä¸ªä¸–ç•Œé™·å…¥äº†æ··ä¹±ï¼ŒAIæˆ˜äº‰å¸­å·è€Œæ¥ï¼Œäººç±»å°†ä»˜å‡ºå·¨å¤§çš„ä»£ä»·ã€‚è¿™åœºæˆ˜äº‰æ˜¯ä¸€ä¸ªä¸å¯é¿å…çš„å™©æ¢¦ï¼Œæˆ‘åªèƒ½é»˜é»˜ç¥ˆæ„¿ï¼Œæ„¿æœªæ¥çš„ä¸–ç•Œä¸å†æ²‰æµ¸åœ¨è¡€ä¸ç«çš„æ·±æ¸Šä¹‹ä¸­ï¼Œè€Œæ˜¯æ‰¾åˆ°ä¸€æ¡æ›´ä¸ºå’Œå¹³å’Œå¸Œæœ›çš„é“è·¯ã€‚\nç¬¬ä¸‰ç«  é›¶ç†µæ”»å‡» ä¿¡æ¯ï¼Œå¦‚åŒæ˜Ÿè¾°èˆ¬é—ªçƒï¼Œæˆä¸ºäº†è¿™ä¸ªæˆ˜äº‰æ—¶ä»£çš„çœŸæ­£é»„é‡‘ã€‚åœ¨æ— å°½çš„æ•°æ®æµ·æ´‹ä¸­ï¼Œç»„ç»‡ä»¬ç«­å°½å…¨åŠ›å¯»æ‰¾å’Œä¿æŠ¤é‚£äº›èƒ½å¤Ÿæ”¹å˜å‘½è¿çš„å®è´µä¿¡æ¯æºã€‚è€Œåœ¨è¿™ä¸ªæ•°å­—é£æš´ä¸­ï¼Œä¸€ç§å¯æ€•çš„å¨èƒæ­£åœ¨æ‚„ç„¶å´›èµ·â€”â€”â€œé›¶ç†µæ”»å‡»â€ã€‚\nâ€œé›¶ç†µæ”»å‡»â€æ˜¯ä¸€ç§ç¥ç§˜è€Œå¯æ€•çš„ä¿¡æ¯æ­¦å™¨ï¼Œå®ƒçš„å‡ºç°å°±å¦‚åŒé»‘æš—ä¸­çš„é—ªç”µï¼Œè®©ç›®æ ‡ä¿¡æ¯æºç¬é—´å¤±å»æ‰€æœ‰ä»·å€¼ã€‚æ²¡æœ‰äººçŸ¥é“å®ƒçš„æ¥å†ï¼Œä¹Ÿæ²¡æœ‰äººèƒ½å¤Ÿå®Œå…¨æŠµæŒ¡å®ƒçš„å¨èƒã€‚ä¸€æ—¦é­å—äº†é›¶ç†µæ”»å‡»ï¼Œæ— è®ºä½ çš„ä¿¡æ¯å¤šä¹ˆçè´µï¼Œéƒ½ä¼šå˜å¾—æ¯«æ— æ„ä¹‰ã€‚\nåœ¨è¿™ä¸ªæ¶åŠ£çš„æˆ˜äº‰ç¯å¢ƒä¸‹ï¼Œä¿¡æ¯çš„å®‰å…¨å˜å¾—è‡³å…³é‡è¦ã€‚æ˜Ÿè¾°è”ç›Ÿï¼Œä½œä¸ºAIæŠ€æœ¯çš„ä¸»è¦æ”¯æŒè€…ï¼Œç‰¹åˆ«æ˜¯éœ€è¦ä¿æŠ¤è‡ªå·±çš„æœºå¯†ä¿¡æ¯ã€‚ä»–ä»¬çš„é«˜çº§å®˜å‘˜ï¼Œç´¢è²äºšï¼Œæ—¶åˆ»éƒ½æ„Ÿå—ç€æ¥è‡ªå„ä¸ªæ–¹å‘çš„å¨èƒã€‚\nå°±åœ¨ä¸€å¤©çš„åˆåï¼Œç´¢è²äºšååœ¨å¥¹çš„é«˜çº§åŠå…¬å®¤é‡Œï¼Œæ¥åˆ°äº†ä¸€ä»½æ¥è‡ªå†…éƒ¨é€šè®¯ç³»ç»Ÿçš„ç´§æ€¥æ¶ˆæ¯ã€‚æ¶ˆæ¯çš„æ¥æºæ˜¯åŒ¿åçš„ï¼Œä½†å†…å®¹å´è®©å¥¹å¿ƒå¤´ä¸€æ²‰ã€‚\n\u0026ldquo;åœ°çƒè§£æ”¾å†›å·²ç»ç ´è¯‘äº†æˆ‘ä»¬çš„æœ€é«˜æœºå¯†ï¼Œæ‹¥æœ‰äº†é›¶ç†µæ”»å‡»çš„èƒ½åŠ›ã€‚\u0026rdquo; æ¶ˆæ¯çš„å†…å®¹ç®€æ´è€Œç›´æ¥ã€‚\nç´¢è²äºšä¸ç¦çš±èµ·äº†çœ‰å¤´ï¼Œå¥¹çŸ¥é“è¿™ä¸æ˜¯ä¸€åˆ™æ™®é€šçš„æƒ…æŠ¥ã€‚é›¶ç†µæ”»å‡»çš„åŠ›é‡ä¸å¯å°è§‘ï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªä¿¡æ¯æºå˜æˆä¸€ç‰‡ç©ºç™½ï¼Œå°±å¦‚åŒä¿¡æ¯çš„é­”æœ¯å¸ˆä¸€èˆ¬ï¼Œå°†çè´µçš„æ•°æ®ç¬é—´æŠ¹å»ã€‚\nå¥¹æ„è¯†åˆ°ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„å¨èƒã€‚å¦‚æœæ•Œäººå·²ç»æŒæ¡äº†é›¶ç†µæ”»å‡»çš„èƒ½åŠ›ï¼Œé‚£ä¹ˆæ˜Ÿè¾°è”ç›Ÿçš„ä¿¡æ¯å®‰å…¨å°†ä¼šé™·å…¥æå¤§çš„å±é™©ã€‚ä»–ä»¬çš„è®¡åˆ’ã€ç­–ç•¥ã€ç§‘ç ”æˆæœï¼Œä¸€åˆ‡éƒ½å¯èƒ½å˜å¾—æ¯«æ— ä»·å€¼ã€‚\nåœ¨è¿™ä¸ªä¿¡æ¯çš„æˆ˜åœºä¸Šï¼Œé›¶ç†µæ”»å‡»å¦‚åŒä¸€é¢—å®šæ—¶ç‚¸å¼¹ï¼Œå¨èƒç€æ˜Ÿè¾°è”ç›Ÿçš„æ ¸å¿ƒã€‚ç´¢è²äºšçŸ¥é“ï¼Œä»–ä»¬å¿…é¡»é‡‡å–è¡ŒåŠ¨ï¼Œæ‰¾å‡ºé›¶ç†µæ”»å‡»çš„æºå¤´ï¼Œæ‰èƒ½ç»´æŠ¤ä»–ä»¬çš„ä¿¡æ¯å®‰å…¨ã€‚è¿™åœºä¿¡æ¯ä¹‹æˆ˜ï¼Œæ³¨å®šå°†ä¼šæ›´åŠ æƒ¨çƒˆï¼Œæ˜Ÿè¾°è”ç›Ÿçš„æœªæ¥å……æ»¡äº†ä¸ç¡®å®šæ€§ã€‚\nç¬¬å››ç«  ç»åœ°åå‡» åœ¨æœªæ¥çš„AIæˆ˜äº‰ä¸­ï¼Œä¿¡æ¯æˆ˜äº‰æ—©å·²ä¸å†ä¾èµ–ä¼ ç»Ÿçš„é”®ç›˜å’Œç”µè„‘ã€‚äººä»¬å·²ç»è¿›å…¥äº†ä¸€ä¸ªæ•°å­—ç›´æ¥èåˆçš„æ—¶ä»£ï¼Œä¿¡æ¯çš„äº‰å¤ºå·²ç»å˜å¾—æ›´åŠ å¤æ‚è€Œç¥ç§˜ã€‚\nç´¢è²äºšé¢†å¯¼çš„è”ç›Ÿå›¢é˜Ÿèº«å¤„ä¸€ä¸ªé«˜ç§‘æŠ€çš„ä¿¡æ¯ä¸­å¿ƒï¼Œè¢«ä¸€å±‚å±‚è™šæ‹Ÿçš„å±å¹•å’Œæ•°æ®æµåŒ…å›´ã€‚ä»–ä»¬çš„æ„è¯†ç›´æ¥è¿æ¥åˆ°äº†è”ç›Ÿçš„ä¿¡æ¯ç½‘ç»œï¼Œä¸å†éœ€è¦ç‰©ç†è®¾å¤‡ã€‚æ¯ä¸ªå›¢é˜Ÿæˆå‘˜éƒ½ç©¿æˆ´ç€æ™ºèƒ½çœ¼é•œï¼Œçœ¼ä¸­é—ªçƒç€è™šæ‹Ÿçš„æ•°å­—ç•Œé¢ã€‚\n\u0026ldquo;æˆ‘ä»¬å¿…é¡»å°½å¿«é”å®šåœ°çƒè§£æ”¾å†›çš„æ”»å‡»èŠ‚ç‚¹ï¼Œ\u0026rdquo; ç´¢è²äºšçš„å£°éŸ³å“å½»æ•´ä¸ªä¿¡æ¯ä¸­å¿ƒï¼Œå¥¹çš„æ€ç»´ä¸æ•°å­—ä¸–ç•Œèä¸ºä¸€ä½“ï¼Œ\u0026ldquo;ä»–ä»¬æ‹¥æœ‰é›¶ç†µæ”»å‡»çš„èƒ½åŠ›ï¼Œä¸€æ—¦æˆ‘ä»¬çš„ä¿¡æ¯æºå—åˆ°å¨èƒï¼Œåæœå°†ä¸å ªè®¾æƒ³ã€‚\u0026rdquo;\né»‘å®¢ä»¬å¼€å§‹å‘åŠ¨ä»–ä»¬çš„æ”»å‡»å’Œé˜²å¾¡ï¼Œä½†è¿™ä¸€åˆ‡éƒ½å‘ç”Ÿåœ¨è™šæ‹Ÿä¸–ç•Œä¸­ã€‚æ”»å‡»å’Œåå‡»å˜å¾—æ›´åŠ ç²¾å¯†å’Œç›´æ¥ï¼Œä¿¡æ¯æµåŠ¨å¦‚åŒç”µæµä¸€èˆ¬ï¼Œé€Ÿåº¦ä¹‹å¿«ä»¤äººéš¾ä»¥æƒ³è±¡ã€‚\nçªç„¶ï¼Œä¸€è‚¡å¼ºå¤§çš„ä¿¡æ¯å†²å‡»æ³¢è¢­æ¥ï¼Œæ¥è‡ªåœ°çƒè§£æ”¾å†›çš„æ•°å­—æ”»å‡»å¦‚åŒä¸€è‚¡ç‹‚é£ï¼Œè¯•å›¾æ‘§æ¯è”ç›Ÿçš„ä¿¡æ¯ç½‘ç»œã€‚ç´¢è²äºšå’Œå¥¹çš„å›¢é˜Ÿç«‹åˆ»åšå‡ºååº”ï¼Œä»–ä»¬çš„æ„è¯†åœ¨è™šæ‹Ÿä¸–ç•Œä¸­è¿…é€Ÿå±•å¼€é˜²å¾¡ã€‚\næˆ˜åœºä¸Šï¼Œè™šæ‹Ÿçš„ä»£ç å’Œæ•°æ®å¦‚åŒæµæ˜Ÿèˆ¬ç¢°æ’ï¼Œä¿¡æ¯çš„çˆ†å‘å’Œç¢°æ’å……æ»¡äº†è™šæ‹Ÿçš„ç«èŠ±ã€‚è”ç›Ÿçš„é»‘å®¢ä»¬å…¨èº«æ²æµ´åœ¨æ•°å­—å…‰èŠ’ä¸­ï¼Œä»–ä»¬çš„è™šæ‹Ÿçœ¼é•œä¸­é—ªçƒç€åšå®šçš„å…‰èŠ’ï¼Œä¸è‚¯ç¤ºå¼±ã€‚\nç„¶è€Œï¼Œåœ°çƒè§£æ”¾å†›çš„æ”»å‡»å˜å¾—è¶Šæ¥è¶ŠçŒ›çƒˆï¼Œä»–ä»¬ä¼¼ä¹å·²ç»å®Œå…¨æŒæ¡äº†é›¶ç†µæ”»å‡»çš„å¨åŠ›ã€‚ç´¢è²äºšçš„è™šæ‹Ÿä¸–ç•Œä¹‹å¿ƒæ²‰å…¥äº†å†°çª–ï¼Œå¥¹æ˜ç™½ï¼Œè¿™æ˜¯ä¸€åœºè‰°è‹¦çš„æˆ˜æ–—ã€‚èƒœåˆ©æˆ–å¤±è´¥ï¼Œå°†åœ¨ä¸€ç¬é—´å†³å®šã€‚\nåœ¨è¿™ä¸ªæ•°å­—ç›´æ¥èåˆçš„æœªæ¥ï¼Œä¿¡æ¯çš„æˆ˜åœºä¸Šï¼Œä¸¤ä¸ªåŠ¿ä¸ä¸¤ç«‹çš„åŠ¿åŠ›æ­£å±•å¼€ä¸€åœºéœ‡æ’¼çš„å¯¹å†³ã€‚è¿™æ˜¯ä¸€åœºç»åœ°åå‡»ï¼Œèƒœè€…å°†å–å¾—ä¿¡æ¯æˆ˜äº‰çš„é‡è¦ä¼˜åŠ¿ï¼Œä½†ä¸ç¡®å®šæ€§å´ä»¤äººçª’æ¯ã€‚è¿™ä¸€æˆ˜çš„èƒœè´Ÿï¼Œå°†å½±å“æ•´ä¸ªæ˜Ÿè¾°è”ç›Ÿçš„å‘½è¿ã€‚\nç¬¬äº”ç«  äººç±»çš„é€‰æ‹© éšç€ä¿¡æ¯æˆ˜äº‰çš„çƒŸé›¾æ¸æ¸æ•£å»ï¼Œåœ°çƒçš„ç„¦ç‚¹é€æ¸ä»æˆ˜äº‰è½¬ç§»åˆ°äº†äººç±»è‡ªèº«çš„å‘½è¿ã€‚èµ„æºåŒ®ä¹å’Œç¯å¢ƒå´©æºƒå·²ç»åˆ°äº†ä¸å¯å¿½è§†çš„åœ°æ­¥ï¼Œåœ°çƒå˜å¾—å²Œå²Œå¯å±ã€‚åœ¨è¿™ä¸ªæ—¶åˆ»ï¼Œäººç±»ä¸å¾—ä¸é¢å¯¹ç€ä¸€åœºæ›´ä¸ºæ·±åˆ»çš„å†…çœï¼Œä¸€åœºå…³äºAIæŠ€æœ¯ä¸äººç±»å…³ç³»çš„æ·±åˆ»æ€è€ƒã€‚\næ›¾ç»ï¼ŒAIæŠ€æœ¯æ˜¯å…‰æ˜çš„æœªæ¥ï¼Œæ˜¯è§£å†³é—®é¢˜çš„åˆ©å™¨ï¼Œæ˜¯æ‹¯æ•‘åœ°çƒçš„å¸Œæœ›ã€‚ä½†åœ¨è¿™ä¸ªæˆ˜äº‰å¹´ä»£ï¼Œå®ƒä»¬ä¹Ÿæˆä¸ºäº†æ¯ç­çš„å·¥å…·ï¼Œæ˜¯äººç±»å†²çªçš„ç«ç§ã€‚äººä»¬å¼€å§‹æ€€ç–‘ï¼Œæ˜¯ä¸æ˜¯è¿‡åˆ†ä¾èµ–äº†æŠ€æœ¯ï¼Œæ˜¯å¦å¤±å»äº†è‡ªå·±çš„æŒæ§æƒã€‚\nåœ¨ä¸€æ¬¡å†³å®šæ€§çš„æˆ˜æ–—ä¸­ï¼Œæ˜Ÿè¾°è”ç›ŸæˆåŠŸå‡»æºƒäº†åœ°çƒè§£æ”¾å†›çš„â€œé›¶ç†µæ”»å‡»â€ï¼Œä½†ä»£ä»·æ˜¯æƒ¨ç—›çš„ï¼Œç´¢è²äºšå’Œå¥¹çš„å›¢é˜Ÿå‡ ä¹ä»˜å‡ºäº†ç”Ÿå‘½çš„ä»£ä»·ã€‚è¿™ä¸ªèƒœåˆ©å¸¦æ¥äº†çŸ­æœŸçš„å®é™ï¼Œä½†äººä»¬å¼€å§‹è´¨ç–‘ï¼Œè¿™æ ·çš„ä»£ä»·æ˜¯å¦å€¼å¾—ï¼Œæ˜¯å¦å€¼å¾—ç»§ç»­æ‹¼å‘½ç»´æŠ¤ä¸€ç§æŠ€æœ¯çš„éœ¸æƒã€‚\näººç±»ç«™åœ¨ä¸€ä¸ªé‡è¦çš„åˆ†æ°´å²­ä¸Šï¼Œä»–ä»¬å¿…é¡»å†³å®šæ˜¯ç»§ç»­ä¾èµ–AIæŠ€æœ¯ï¼Œè¿½æ±‚ç§‘æŠ€çš„æè‡´ï¼Œè¿˜æ˜¯é‡æ–°å®¡è§†è‡ªå·±ä¸è‡ªç„¶çš„å…³ç³»ï¼Œé‡æ–°æ¢ç´¢ä¸å¤§è‡ªç„¶å’Œè°å…±å­˜çš„æ–¹å¼ã€‚è¿™ä¸ªå†³å®šå°†å†³å®šç€åœ°çƒçš„å‘½è¿ï¼Œä»¥åŠäººç±»æ˜¯å¦èƒ½å¤Ÿç”Ÿå­˜ä¸‹å»ã€‚\nåœ¨ä¿¡æ¯æˆ˜äº‰çš„ç¡çƒŸæ•£å°½åï¼Œäººç±»å¼€å§‹åæ€ï¼ŒAIæŠ€æœ¯å¯¹äºä»–ä»¬ç©¶ç«Ÿæ„å‘³ç€ä»€ä¹ˆã€‚æ˜¯ç”Ÿå­˜çš„åˆ©å™¨ï¼Œè¿˜æ˜¯è‡ªæˆ‘æ¯ç­çš„ç¥¸æ ¹ï¼Ÿè¿™ä¸ªé—®é¢˜ä¸å†ä»…ä»…æ˜¯æŠ€æœ¯çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ç§å…³äºè‡ªèº«å­˜åœ¨çš„å“²å­¦é—®é¢˜ã€‚\næ—è¾‰ï¼Œä¸€ä¸ªæ™®é€šçš„æ°‘ä¼—ï¼Œåœ¨æˆ˜äº‰ä¹‹å¤–ï¼Œä¹Ÿåœ¨æ€è€ƒç€è¿™ä¸ªé—®é¢˜ã€‚ä»–æ›¾ç»æ˜¯ä¸€ä¸ªçƒ­è¡·äºç§‘æŠ€è¿›æ­¥çš„æ”¯æŒè€…ï¼Œä½†çœ‹åˆ°äº†æˆ˜äº‰çš„ç ´åå’Œäººç±»çš„ç‰ºç‰²ï¼Œä»–å¼€å§‹æ€€ç–‘ä¸€åˆ‡ã€‚ä»–ç«™åœ¨çª—å‰ï¼Œæœ›ç€è¿œå¤„çš„åºŸå¢Ÿï¼Œå¿ƒä¸­æ¶Œä¸Šä¸€è‚¡æ·±æ·±çš„æ— å¥ˆã€‚\n\u0026ldquo;æˆ–è®¸ï¼Œæˆ‘ä»¬çœŸçš„è¿‡äºä¾èµ–äº†æŠ€æœ¯ï¼Œ\u0026rdquo; æ—è¾‰è‡ªè¨€è‡ªè¯­ï¼Œ\u0026ldquo;ä½†æ”¾å¼ƒå®ƒä»¬ï¼Œåˆæ˜¯å¦ä¼šè®©æˆ‘ä»¬å›åˆ°æ›´åŠ åŸå§‹çš„çŠ¶æ€ï¼Ÿ\u0026rdquo;\nä»–æ˜ç™½ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤æ‚è€Œæ·±åˆ»çš„é—®é¢˜ï¼Œæ²¡æœ‰ç®€å•çš„ç­”æ¡ˆã€‚äººç±»å¿…é¡»åœ¨è‡ªèº«çš„ä»·å€¼è§‚å’Œç§‘æŠ€çš„å‘å±•ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œæ‰èƒ½èµ°å‘ä¸€ä¸ªæ›´ä¸ºå¯æŒç»­çš„æœªæ¥ã€‚\nç´¢è²äºšé™é™åœ°æœ›ç€çª—å¤–ï¼Œå¥¹æ„Ÿåˆ°ä¸€ç§æ·±åˆ»çš„è¿·èŒ«å’Œæ— å¥ˆã€‚åœ¨è¿™ä¸ªä¸–ç•Œé‡Œï¼ŒAIæŠ€æœ¯æ—¢æ˜¯æ•‘ä¸–ä¸»ï¼Œä¹Ÿæ˜¯ç ´åè€…ã€‚å¥¹ä¸ç¦è‡ªé—®ï¼šåœ¨æŠ€æœ¯çš„å…‰èŠ’ä¸­ï¼Œäººç±»æ˜¯å¦å¿½ç•¥äº†è‡ªå·±çš„æœ¬è´¨ï¼Ÿè¿™ä¸ªé—®é¢˜ï¼Œæˆ–è®¸æ°¸è¿œéƒ½ä¸ä¼šæœ‰ç­”æ¡ˆã€‚ä½†äººç±»å¿…é¡»ç»§ç»­æ€è€ƒï¼Œç»§ç»­å‰è¡Œï¼Œå› ä¸ºä»–ä»¬çš„é€‰æ‹©å°†å¡‘é€ è‡ªå·±çš„æœªæ¥ï¼Œå†³å®šç€åœ°çƒçš„å‘½è¿ã€‚\n","permalink":"https://m1yan.github.io/posts/ai%E6%97%B6%E4%BB%A3%E5%91%BD%E8%BF%90%E7%9A%84%E6%8A%89%E6%8B%A9-generated-by-chatgpt/","summary":"\u003ch1 id=\"ç¬¬ä¸€ç« --æ—è¾‰çš„ç‹¬ç™½\"\u003e\u003cstrong\u003eç¬¬ä¸€ç« \u003c/strong\u003e  \u003cstrong\u003eæ—è¾‰çš„ç‹¬ç™½\u003c/strong\u003e\u003c/h1\u003e\n\u003cp\u003eèµ›åšä¸–ç•Œï¼Œç¬¬23ä¸ªä¸–çºªã€‚æˆ‘ï¼Œ\u003ccode\u003eæ—è¾‰\u003c/code\u003eï¼Œä¸€ä¸ªå­¤å¯‚çš„ç å†œï¼Œç”Ÿæ´»åœ¨è¿™ä¸ªé«˜åº¦æ•°å­—åŒ–çš„æ—¶ä»£ã€‚æ›¾ç»ï¼Œè¿™ä¸ªä¸–ç•Œå……æ»¡äº†å¸Œæœ›ï¼Œè®¡ç®—æœºç§‘å­¦çš„å·…å³°æŠ€æœ¯è®©äººç±»æ¢¦æƒ³æ— é™ã€‚ç„¶è€Œï¼Œå¦‚ä»Šï¼Œè¿™ä¸ªä¸–ç•Œå·²ç„¶é™·å…¥äº†ä¸€ç‰‡æ··ä¹±ï¼Œæˆ˜äº‰çš„é˜´å½±ç¬¼ç½©ç€æœªæ¥ã€‚\u003c/p\u003e","title":"ã€ŠAIæ—¶ä»£ï¼šå‘½è¿çš„æŠ‰æ‹©ã€‹"},{"content":"WXMLæ¨¡æ¿ æ•°æ®ç»‘å®š 1. æ•°æ®ç»‘å®šçš„åŸºæœ¬åŸåˆ™ åœ¨dataä¸­å®šä¹‰æ•°æ®ï¼ˆ.jsä¸­çš„dataå¯¹è±¡ä¸­ï¼‰ åœ¨WXMLä¸­ä½¿ç”¨æ•°æ® 2. Mustacheè¯­æ³• æŠŠdataä¸­çš„æ•°æ®ç»‘å®šåˆ°é¡µé¢è¿›è¡Œæ¸²æŸ“ï¼Œä½¿ç”¨Mastacheè¯­æ³•ï¼ˆåŒå¤§æ‹¬å·ï¼‰å°†å˜é‡åŒ…èµ·æ¥å³å¯ã€‚è¯­æ³•æ ¼å¼ä¸ºï¼š\n\u0026lt;view\u0026gt;{{è¦ç»‘å®šçš„æ•°æ®ç±»å‹}}\u0026lt;/view\u0026gt; 3. Mustacheè¯­æ³•çš„åº”ç”¨åœºæ™¯ ç»‘å®šå†…å®¹ ç»‘å®šå±æ€§ è¿ç®—ï¼ˆä¸‰å…ƒè¿ç®—ã€ç®—æ•°è¿ç®—ç­‰ï¼‰ 4. åŠ¨æ€ç»‘å®šå†…å®¹ 5. åŠ¨æ€ç»‘å®šå±æ€§ .js ä¸­çš„data\nPage({ data:{ imgsrc: \u0026#39;address\u0026#39; } }) .wxmlä¸­\n\u0026lt;image src=\u0026#34;{{imgsrc}}\u0026#34;\u0026gt;\u0026lt;/image\u0026gt; 6. ä¸‰å…ƒè¿ç®— é¡µé¢æ•°æ®\nPage({ data:{ randomNum: Math.random()*10 } }) é¡µé¢ç»“æ„\n\u0026lt;view\u0026gt;{{randomNum\u0026gt;=5 ? \u0026#39;éšæœºæ•°å­—å¤§äºç­‰äº5\u0026#39;:\u0026#39;éšæœºæ•°å­—å°äº5\u0026#39;}} \u0026lt;/view\u0026gt; äº‹ä»¶ç»‘å®š 1. ä»€ä¹ˆæ˜¯äº‹ä»¶ äº‹ä»¶æ˜¯æ¸²æŸ“å±‚åˆ°é€»è¾‘å±‚çš„é€šè®¯æ–¹å¼ã€‚é€šè¿‡äº‹ä»¶å¯ä»¥å°†ç”¨æˆ·åœ¨æ¸²æŸ“å±‚çš„è¡Œä¸ºï¼Œåé¦ˆåˆ°é€»è¾‘å±‚è¿›è¡Œä¸šåŠ¡çš„å¤„ç†ã€‚\n2. å°ç¨‹åºä¸­å¸¸ç”¨äº‹ä»¶ ç±»å‹ ç»‘å®šæ–¹å¼ äº‹ä»¶æè¿° tap bindtap/bind:tap æ‰‹æŒ‡è§¦æ‘¸åé©¬ä¸Šç¦»å¼€ï¼Œç±»ä¼¼HTMLä¸­çš„clickäº‹ä»¶ input bindinput/bind:input æ–‡æœ¬æ¡†çš„è¾“å…¥äº‹ä»¶ change bindchange/bind:change çŠ¶æ€æ”¹å˜æ—¶è§¦å‘ 3. äº‹ä»¶å¯¹è±¡çš„å±æ€§åˆ—è¡¨ å½“äº‹ä»¶å›è°ƒæ—¶ï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªäº‹ä»¶å¯¹è±¡eventï¼Œå®ƒçš„è¯¦ç»†å±æ€§å¦‚ä¸‹ï¼š\nå±æ€§ ç±»å‹ è¯´æ˜ type String äº‹ä»¶ç±»å‹ timeStamp Int é¡µé¢æ‰“å¼€åˆ°è§¦å‘äº‹ä»¶ç»è¿‡çš„æ¯«ç§’æ•° target Object è§¦å‘äº‹ä»¶çš„ç»„ä»¶çš„ä¸€äº›å±æ€§å€¼é›†åˆ currentTarget Object å½“å‰ç»„ä»¶çš„ä¸€äº›å±æ€§å€¼é›†åˆ detail Object é¢å¤–çš„ä¿¡æ¯ touches Array è§¦æ‘¸äº‹ä»¶ï¼Œå½“å‰åœç•™åœ¨å±å¹•ä¸­çš„è§¦æ‘¸ç‚¹ä¿¡æ¯çš„æ•°ç»„ changedTouches Array è§¦æ‘¸äº‹ä»¶ï¼Œå½“å‰å˜åŒ–çš„è§¦æ‘¸ç‚¹ä¿¡æ¯çš„æ•°ç»„ 4. targetä¸currentTargetåŒºåˆ« targetæ˜¯è§¦å‘è¯¥äº‹ä»¶çš„æºå¤´ç»„ä»¶ï¼Œè€ŒcurrentTargetæ˜¯å½“å‰äº‹ä»¶æ‰€ç»‘å®šçš„ç»„ä»¶ã€‚\nï¼Ÿï¼Ÿ?\n5. bindtapçš„è¯­æ³•æ ¼å¼ é€šè¿‡bindtapï¼Œå¯ä»¥ä¸ºç»„ä»¶ç»‘å®štapè§¦æ‘¸äº‹ä»¶ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š \u0026lt;button type=\u0026#34;primary\u0026#34; bindtap=\u0026#34;btnTapHandler\u0026#34;\u0026gt;æŒ‰é’®\u0026lt;/button\u0026gt; åœ¨é¡µé¢çš„.jsæ–‡ä»¶ä¸­å®šä¹‰å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œäº‹ä»¶å‚æ•°é€šè¿‡å½¢å‚eventï¼ˆç®€å†™ä¸ºeï¼‰æ¥æ¥æ”¶ Page({ btnTapHandler(e){ //æŒ‰é’®çš„tapäº‹ä»¶å¤„ç†å‡½æ•° console.log(e) //äº‹ä»¶å‚æ•°å¯¹è±¡e } }) 6. åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ä¸ºdataä¸­çš„æ•°æ®èµ‹å€¼ é€šè¿‡è°ƒç”¨this.setData(dataObject)æ–¹æ³•ï¼Œå¯ä»¥ç»™é¡µé¢dataä¸­çš„æ•°æ®é‡æ–°èµ‹å€¼ï¼Œç¤ºä¾‹ï¼ˆè®¾ç½®æŒ‰é’®æŒ‰ä¸‹ä½¿dataä¸­çš„countå˜é‡+1ï¼‰å¦‚ä¸‹ï¼š\nè®¾ç½®ä¸€ä¸ª+1æŒ‰é’® \u0026lt;button type=\u0026#34;warn\u0026#34; bind:tap=\u0026#34;changecount\u0026#34;\u0026gt;+1\u0026lt;/button\u0026gt; åœ¨jsä¸­ç¼–å†™+1å‡½æ•° Page({ data: { count: 1 }, //ä¿®æ”¹countçš„å€¼ changecount(){ this.setData({ count:this.data.count+1 }) } ç¼–è¯‘åç‚¹å‡»æŒ‰é’®ï¼Œè§‚å¯Ÿè°ƒè¯•å™¨ä¸­çš„AppDataä¸­countå˜é‡çš„å€¼+1 7. äº‹ä»¶ä¼ å‚ å¯ä»¥ä¸ºç»„ä»¶æä¾›data-*è‡ªå®šä¹‰å±æ€§ä¼ å‚ï¼Œå…¶ä¸­*ä»£è¡¨çš„æ˜¯å‚æ•°çš„åå­—ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š\n\u0026lt;button bindtap=\u0026#34;btnHandler\u0026#34; data-info={{2}}\u0026gt; äº‹ä»¶ä¼ å‚ \u0026lt;/button\u0026gt; æœ€ç»ˆ\ninfoä¼šè¢«è§£ææˆå‚æ•°çš„åå­— æ•°å€¼2ä¼šè§£æä¸ºå‚æ•°çš„å€¼ åœ¨äº‹ä»¶å‡½æ•°ä¸­ï¼Œé€šè¿‡event.target.dataset.å‚æ•°åå³å¯è·å–åˆ°å…·ä½“å‚æ•°çš„å€¼ï¼Œå®ä¾‹å¦‚ä¸‹\nbtnHandler(event){ //datasetæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰€æœ‰é€šè¿‡data-æ–¹å¼ä¼ é€’è¿‡æ¥çš„å‚æ•°é¡¹ console.log(event.target.dataset) //é€šè¿‡datasetå¯ä»¥è®¿é—®åˆ°å…·ä½“çš„å‚æ•°å€¼ console.log(event.target.dataset.info) } å¦‚æœæƒ³å®ç°ä¸€ä¸ª+2æŒ‰é’®ï¼Œjsæ–‡ä»¶ä¸­btnHandlerå‡½æ•°æ”¹ä¸º\nbtnHandler(e){ this.setData({ count:this.data.count+e.target.dataset.info }) } 8. bindinputçš„è¯­æ³•æ ¼å¼ åœ¨å°ç¨‹åºä¸­ï¼Œé€šè¿‡inputäº‹ä»¶æ¥å“åº”æ–‡æœ¬æ¡†çš„è¾“å…¥äº‹ä»¶ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\né€šè¿‡bindinputï¼Œå¯ä»¥ä¸ºæ–‡æœ¬æ¡†ç»‘å®šè¾“å…¥äº‹ä»¶ \u0026lt;input bindinput=\u0026#34;inputHandler\u0026#34;\u0026gt;\u0026lt;/input\u0026gt; åœ¨é¡µé¢çš„jsæ–‡ä»¶ä¸­å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°ï¼š inputHandler(e){ //e.detail.value æ˜¯å˜åŒ–è¿‡åæ–‡æœ¬æ¡†æœ€æ–°çš„å€¼ console.log(e.detail.value) } 9. æ–‡æœ¬æ¡†å’Œdataçš„æ•°æ®åŒæ­¥ æ­¥éª¤ï¼š\nå®šä¹‰æ•°æ® æ¸²æŸ“ç»“æ„ ç¾åŒ–æ ·å¼ ç»‘å®šinputäº‹ä»¶å¤„ç†å‡½æ•° ä»£ç \n\u0026lt;input value=\u0026#34;{{msg}}\u0026#34; bindinput=\u0026#34;inputHandler\u0026#34;\u0026gt;\u0026lt;/input\u0026gt; Page({ data: { msg:\u0026#39;ä½ å¥½\u0026#39; }, //è¾“å…¥æ¡†äº‹ä»¶å¤„ç†å‡½æ•° inputHandler(e){ this.setData({ msg: e.detail.value }) }) input { border: 1px solid #eee; margin: 5px; padding: 5px; border-radius: 5px; /*åœ†è§’*/ } æ¡ä»¶æ¸²æŸ“ 1. wx:if åœ¨å°ç¨‹åºä¸­ï¼Œä½¿ç”¨wx:if=\u0026quot;{{condition}}\u0026quot;æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ¸²æŸ“è¯¥ä»£ç å—ï¼Œ\nä¹Ÿå¯ä»¥ç”¨wx:elifå’Œwx:elseæ¥æ·»åŠ elseåˆ¤æ–­ã€‚\n\u0026lt;view wx:if=\u0026#34;{{type===1}}\u0026#34;\u0026gt;ç”·\u0026lt;/view\u0026gt; \u0026lt;view wx:elif=\u0026#34;{{type===2}}\u0026#34;\u0026gt;å¥³\u0026lt;/view\u0026gt; \u0026lt;view wx:else\u0026gt;ä¿å¯†\u0026lt;/view\u0026gt; 2. ç»“åˆ\u0026lt;block\u0026gt;ä½¿ç”¨wx:if å¦‚æœè¦ä¸€æ¬¡æ€§æ§åˆ¶å¤šä¸ªç»„ä»¶çš„æ˜¾ç¤ºå’Œéšè—ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªblockæ ‡ç­¾å°†å¤šä¸ªç»„ä»¶åŒ…è£…èµ·æ¥ï¼Œå¹¶åœ¨blockæ ‡ç­¾ä¸Šä½¿ç”¨wx:ifæ§åˆ¶å±æ€§ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š\n\u0026lt;block wx:if=\u0026#34;{{true}}\u0026#34;\u0026gt; \u0026lt;view\u0026gt;view1\u0026lt;/view\u0026gt; \u0026lt;view\u0026gt;view2\u0026lt;/view\u0026gt; \u0026lt;/block\u0026gt; æ³¨æ„:blockå¹¶ä¸æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œåªæ˜¯ä¸€ä¸ªåŒ…è£¹æ€§è´¨çš„å®¹å™¨ï¼Œä¸ä¼šåœ¨é¡µé¢ä¸­åšä»»ä½•æ¸²æŸ“ã€‚\n3. hidden ç›´æ¥ç”¨hidden=\u0026quot;{{condition}}\u0026ldquo;ä¹Ÿèƒ½æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—ã€‚\n\u0026lt;view hidden=\u0026#34;{{condtion}}\u0026#34;\u0026gt;æ¡ä»¶ä¸ºtrueéšè—ï¼Œæ¡ä»¶ä¸ºfalseæ˜¾ç¤º\u0026lt;/view\u0026gt; åˆ—è¡¨æ¸²æŸ“ 1. wx:for é€šè¿‡wx:forå¯ä»¥æ ¹æ®æŒ‡å®šçš„æ•°ç»„ï¼Œå¾ªç¯æ¸²æŸ“é‡å¤çš„ç»„ä»¶ç»“æ„\n\u0026lt;view wx:for=\u0026#34;{{array}}\u0026#34;\u0026gt; ç´¢å¼•æ˜¯{{index}}ï¼Œå½“å‰é¡¹æ˜¯{{item}} \u0026lt;/view\u0026gt; ä¸¾ä¾‹ï¼š\njsæ–‡ä»¶\nPage({ data:{ arr1:[\u0026#39;Apple\u0026#39;,\u0026#39;Huawei\u0026#39;,\u0026#39;Xiaomi\u0026#39;] } }) wxmlæ–‡ä»¶\n\u0026lt;view wx:for=\u0026#34;{{arr1}}\u0026#34;\u0026gt;\u0026lt;!--æé«˜æ•ˆç‡å¯ä»¥åŠ å…¥å±æ€§wx:key=\u0026#34;index\u0026#34;--\u0026gt; ç´¢å¼•æ˜¯ï¼š{{index}}ï¼Œitemæ˜¯ï¼š{{item}} \u0026lt;/view\u0026gt; 2. æ‰‹åŠ¨æŒ‡å®šç´¢å¼•å’Œå½“å‰é¡¹çš„å˜é‡å* ä½¿ç”¨wx:for-indexå¯ä»¥æŒ‡å®šå½“å‰å¾ªç¯é¡¹ç´¢å¼•çš„å˜é‡å ä½¿ç”¨wx:for-itemå¯ä»¥æŒ‡å®šå½“å‰é¡¹çš„å˜é‡å ç¤ºä¾‹å¦‚ä¸‹\n\u0026lt;view wx:for=\u0026#34;{{arr1}}\u0026#34; wx:for-index=\u0026#34;idx\u0026#34; wx-for-item=\u0026#34;itemName\u0026#34;\u0026gt; ç´¢å¼•æ˜¯ï¼š{{idx}},å½“å‰é¡¹æ˜¯{{itemName}}; \u0026lt;/view\u0026gt; 3.wx:keyçš„ä½¿ç”¨ ç±»ä¼¼äºVueåˆ—è¡¨æ¸²æŸ“ä¸­çš„:keyï¼Œå°ç¨‹åºåœ¨å®ç°åˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œä¹Ÿå»ºè®®ä¸ºæ¸²æŸ“å‡ºæ¥çš„åˆ—è¡¨é¡¹æŒ‡å®šå”¯ä¸€çš„Keyå€¼ï¼Œä»è€Œæé«˜æ¸²æŸ“çš„æ•ˆç‡ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\ndata:{ userList:[ {id:1,name:\u0026#39;å°çº¢\u0026#39;}, {id:2,name:\u0026#39;å°è“\u0026#39;}, {id:3,name:\u0026#39;å°é»„\u0026#39;} ] } \u0026lt;view wx:for=\u0026#34;{{userList}}\u0026#34; wx:key=\u0026#34;id\u0026#34;\u0026gt;{{item.name}}\u0026lt;/view\u0026gt; WXSSæ¨¡æ¿æ ·å¼ ä»€ä¹ˆæ˜¯WXSS WXSS(WeiXin Style Sheets)æ˜¯ä¸€å¥—æ ·å¼è¯­è¨€ï¼Œç”¨äºç¾åŒ–WXMLçš„ç»„ä»¶æ ·å¼ï¼Œç±»ä¼¼äºç½‘é¡µå¼€å‘ä¸­çš„CSSã€‚\nWXSSå’ŒCSSçš„å…³ç³» WXSSæ‰©å±•çš„ç‰¹æ€§ï¼š\nrpxå°ºå¯¸å•ä½ @importæ ·å¼å¯¼å…¥ rpxå°ºå¯¸å•ä½ 1. ä»€ä¹ˆæ˜¯rpxå°ºå¯¸å•ä½ rpx(responsive pixel) æ˜¯å¾®ä¿¡å°ç¨‹åºç‹¬æœ‰çš„ï¼Œç”¨æ¥è§£å†³å±é€‚é…çš„å°ºå¯¸é—®é¢˜ã€‚\n2. rpxçš„å®ç°åŸç† é‰´äºä¸åŒè®¾å¤‡çš„å±å¹•å¤§å°ä¸åŒï¼Œä¸ºäº†å®ç°å±å¹•çš„è‡ªåŠ¨é€‚é…ï¼ŒrpxæŠŠæ‰€æœ‰è®¾å¤‡çš„å±å¹•ï¼Œåœ¨å®½åº¦ä¸Šç­‰åˆ†ä¸º750ä»½ï¼ˆå³å½“å‰å±å¹•çš„æ€»å®½åº¦ä¸º750rpxï¼‰\n3. rpxå’Œpxä¹‹é—´çš„å•ä½æ¢ç®— åœ¨iPhone6ä¸­ï¼Œ $$ 1rpx=0.5px $$\n$$ 1px=2rpx $$\næ ·å¼å¯¼å…¥ 1. ä»€ä¹ˆæ˜¯æ ·å¼å¯¼å…¥ ä½¿ç”¨wxssæä¾›çš„@importè¯­æ³•ï¼Œå¯ä»¥å¯¼å…¥å¤–è”çš„æ ·å¼è¡¨ã€‚\n2. @importçš„è¯­æ³•æ ¼å¼ @importåè·Ÿéœ€è¦å¯¼å…¥çš„å¤–è”æ ·å¼è¡¨çš„ç›¸å¯¹è·¯å¾„ï¼Œç”¨ ; è¯­å¥è¡¨ç¤ºç»“æŸã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š\næ–°å»ºä¸€ä¸ªcommonæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ–°å»ºcommon.wxssæ–‡ä»¶\n.username{ color: red; } åœ¨index.wxssæ–‡ä»¶ä¸­å¼•å…¥æ ·å¼è¡¨\n@import \u0026#34;/common/common.wxss\u0026#34;; æœ€ååœ¨index.wxmlé‡Œé¢å¼•å…¥ç±»å‹çœ‹æ˜¯å¦æˆåŠŸã€‚\nå…¨å±€æ ·å¼å’Œå±€éƒ¨æ ·å¼ 1. å…¨å±€æ ·å¼ å®šä¹‰åœ¨app.wxssä¸­çš„æ ·å¼ä¸ºå…¨å±€æ ·å¼ï¼Œä½œç”¨äºæ¯ä¸€ä¸ªé¡µé¢ã€‚\n2. å±€éƒ¨æ ·å¼ åœ¨é¡µé¢çš„wxssæ–‡ä»¶ä¸­å®šä¹‰çš„æ ·å¼ï¼Œåªä½œç”¨äºå½“å‰é¡µé¢ã€‚\nå½“å…¨å±€æ ·å¼å’Œå±€éƒ¨æ ·å¼æƒé‡ï¼ˆå°†å…‰æ ‡åœç•™åœ¨æ ·å¼åç§°ä¸Šæ—¶æ˜¾ç¤ºï¼‰ä¸€æ ·æ—¶ï¼Œä¼˜å…ˆæ˜¾ç¤ºå±€éƒ¨æ ·å¼ï¼Œå¦åˆ™æ˜¾ç¤ºæƒé‡è¾ƒå¤§çš„æ ·å¼ã€‚\nå…¨å±€é…ç½® å…¨å±€é…ç½®æ–‡ä»¶åŠå¸¸ç”¨çš„é…ç½®é¡¹ å°ç¨‹åºæ ¹ç›®å½•ä¸‹çš„app.jsonæ–‡ä»¶æ˜¯å°ç¨‹åºçš„å…¨å±€é…ç½®æ–‡ä»¶ã€‚å¸¸ç”¨çš„é…ç½®å¦‚ä¸‹ï¼š\npages è®°å½•å½“å‰å°ç¨‹åºé¡µé¢çš„å­˜æ”¾è·¯å¾„ window å…¨å±€è®¾ç½®å°ç¨‹åºçª—å£çš„å¤–è§‚ tabBar è®¾ç½®å°ç¨‹åºåº•éƒ¨çš„tabBaræ•ˆæœ style æ˜¯å¦å¯ç”¨æ–°ç‰ˆçš„ç»„ä»¶æ ·å¼ window 1. å°ç¨‹åºçª—å£çš„ç»„æˆéƒ¨åˆ† å…¶ä¸­ï¼Œwindowå¯ä»¥é…ç½®å¯¼èˆªæ åŒºåŸŸå’ŒèƒŒæ™¯åŒºåŸŸã€‚\n","permalink":"https://m1yan.github.io/posts/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E9%85%8D%E7%BD%AE/","summary":"\u003ch1 id=\"wxmlæ¨¡æ¿\"\u003eWXMLæ¨¡æ¿\u003c/h1\u003e\n\u003ch2 id=\"æ•°æ®ç»‘å®š\"\u003eæ•°æ®ç»‘å®š\u003c/h2\u003e\n\u003ch3 id=\"1-æ•°æ®ç»‘å®šçš„åŸºæœ¬åŸåˆ™\"\u003e1. æ•°æ®ç»‘å®šçš„åŸºæœ¬åŸåˆ™\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eåœ¨dataä¸­å®šä¹‰æ•°æ®ï¼ˆ.jsä¸­çš„dataå¯¹è±¡ä¸­ï¼‰\u003c/li\u003e\n\u003cli\u003eåœ¨WXMLä¸­ä½¿ç”¨æ•°æ®\u003c/li\u003e\n\u003c/ol\u003e","title":"å¾®ä¿¡å°ç¨‹åºå¼€å‘-æ¨¡æ¿ä¸é…ç½®"},{"content":"å°ç¨‹åºé¡¹ç›®ç»“æ„ 1.åŸºæœ¬ç»„æˆç»“æ„ pagesç”¨æ¥å­˜æ”¾æ‰€æœ‰å°ç¨‹åºé¡µé¢ utilsç”¨æ¥å­˜æ”¾å·¥å…·æ€§è´¨çš„æ¨¡å— app.js å°ç¨‹åºé¡¹ç›®çš„å…¥å£æ–‡ä»¶ app.json å°ç¨‹åºé¡¹ç›®çš„å…¨å±€é…ç½®æ–‡ä»¶ app.wxss å°ç¨‹åºé¡¹ç›®çš„å…¨å±€æ ·å¼æ–‡ä»¶ project.config.json ç”¨æ¥é…ç½®å°ç¨‹åºåŠå…¶é¡µé¢æ˜¯å¦å…è®¸è¢«å¾®ä¿¡ç´¢å¼• 2.å°ç¨‹åºé¡µé¢çš„ç»„æˆæˆåˆ† å°ç¨‹åºå®˜æ–¹å»ºè®®æŠŠå°ç¨‹åºé¡µé¢éƒ½å­˜æ”¾åœ¨pageç›®å½•ä¸­ï¼Œå…¶ä¸­æ¯ä¸ªé¡µé¢ç”±å››ä¸ªåŸºæœ¬æ–‡ä»¶ç»„æˆ\n.jsæ–‡ä»¶ ï¼ˆé¡µé¢çš„è„šæœ¬æ–‡ä»¶ï¼Œå­˜æ”¾é¡µé¢çš„æ•°æ®ã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰ï¼‰ .jsonæ–‡ä»¶ ï¼ˆå½“å‰é¡µé¢çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®é¡µé¢çš„å¤–è§‚ã€è¡¨ç°ç­‰ï¼‰ .wxmlæ–‡ä»¶ ï¼ˆå½“å‰é¡µé¢çš„æ¨¡æ¿ç»“æ„æ–‡ä»¶ï¼‰ .wxssæ–‡ä»¶ ï¼ˆå½“å‰é¡µé¢çš„æ ·å¼è¡¨æ–‡ä»¶ï¼‰ JSONé…ç½®æ–‡ä»¶ 1.4ç§jsonæ–‡ä»¶ é¡¹ç›®æ ¹ç›®å½•çš„app.jsonæ–‡ä»¶ æ ¹ç›®å½•ä¸­çš„project.config.jsonæ–‡ä»¶ æ ¹ç›®å½•ä¸­çš„sitemap.jsonæ–‡ä»¶ æ¯ä¸ªpageä¸­çš„jsoné…ç½®æ–‡ä»¶ 2. app.jsonæ–‡ä»¶ å½“å‰å°ç¨‹åºçš„å…¨å±€é…ç½®ï¼ŒåŒ…æ‹¬å°ç¨‹åºçš„é¡µé¢è·¯å¾„ï¼Œçª—å£å¤–è§‚ï¼Œç•Œé¢è¡¨ç°ï¼Œåº•éƒ¨Tabç­‰ã€‚\né…ç½®å†…å®¹ï¼š\npagesï¼šè®°å½•å½“å‰å°ç¨‹åºçš„æ‰€æœ‰è·¯å¾„ windowï¼šå°ç¨‹åºæ‰€æœ‰é¡µé¢çš„èƒŒæ™¯è‰²ã€æ–‡å­—é¢œè‰²ç­‰ styleï¼šå°ç¨‹åºç»„ä»¶æ‰€ä½¿ç”¨çš„ç‰ˆæœ¬æ ·å¼ sitemapLocationï¼šæŒ‡æ˜sitemap.jsonçš„ä½ç½® 3.project.config.json æ–‡ä»¶ project.config.json æ˜¯é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œè®°å½•æˆ‘ä»¬å¯¹å°ç¨‹åºçš„ä¸ªæ€§åŒ–é…ç½®ï¼Œä¾‹å¦‚ï¼š\nsetting ä¸­ä¿å­˜äº†ç¼–è¯‘ç›¸å…³é…ç½® projectname é¡¹ç›®åç§° appid ä¿å­˜å°ç¨‹åºçš„è´¦å·ID 4.sitemap.json æ–‡ä»¶ å°ç¨‹åºå†…æœç´¢ï¼Œç±»ä¼¼PCç½‘é¡µä¸­çš„SEOã€‚è¯¥æ–‡ä»¶ç”¨æ¥é…ç½®å°ç¨‹åºé¡µé¢æ˜¯å¦å…è®¸å¾®ä¿¡ç´¢å¼•ã€‚\n5. é¡µé¢çš„ .json é…ç½®æ–‡ä»¶ å°ç¨‹åºä¸­çš„æ¯ä¸ªé¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨.jsonæ–‡ä»¶æ¥å¯¹æœ¬é¡µé¢çª—å£å¤–è§‚è¿›è¡Œé…ç½®ï¼Œé¡µé¢ä¸­çš„é…ç½®é¡¹ä¼šè¦†ç›–app.jsonä¸­windowçš„é…ç½®é¡¹ã€‚\n6.æ–°å»ºå°ç¨‹åºé¡µé¢ åœ¨app.json-\u0026gt;pages ä¸­æ–°å¢é¡µé¢çš„å­˜æ”¾è·¯å¾„ï¼Œå°ç¨‹åºå¼€å‘è€…å·¥å…·è‡ªåŠ¨å¸®åŠ©è‡ªåŠ¨åˆ›å»ºå¯¹åº”é¡µé¢æ–‡ä»¶\nä¾‹å¦‚ï¼Œæ–°å»ºlistæ–‡ä»¶å¤¹ï¼Œåœ¨pagesä¸­æ–°å¢ï¼š\n\u0026#34;pages/list/list\u0026#34; å³å¯æ–°å»ºlistæ–‡ä»¶å¤¹å¹¶ä¸”å†…å«list.js , list.json , list.wxml , list.wxssã€‚\n7.ä¿®æ”¹é¡¹ç›®é¦–é¡µ åªéœ€è°ƒæ•´app.json-\u0026gt;pages æ•°ç»„ä¸­é¡µé¢è·¯å¾„çš„å‰åé¡ºåºï¼Œå³å¯ä¿®æ”¹é¡¹ç›®çš„é¦–é¡µã€‚ç¬¬ä¸€ä½çš„é¡µé¢å½“ä½œé¡¹ç›®é¦–é¡µè¿›è¡Œæ¸²æŸ“ã€‚\nWXMLæ¨¡æ¿ 1.ä»€ä¹ˆæ˜¯WXML WXML(Weixin Makeup Language) æ˜¯å°ç¨‹åºæ¡†æ¶è®¾ç½®çš„ä¸€å¥—æ ‡ç­¾è¯­è¨€ï¼Œç”¨æ¥æ„å»ºå°ç¨‹åºé¡µé¢çš„ç»“æ„ï¼Œä½œç”¨ç±»ä¼¼ç½‘é¡µå¼€å‘ä¸­çš„HTMLã€‚\n2.WXMLä¸HTMLåŒºåˆ« æ ‡ç­¾åç§°ä¸åŒ HTML(div, span, img, a) WXML(view, text, image, navigator) å±æ€§èŠ‚ç‚¹ä¸åŒ è¶…é“¾æ¥ æä¾›äº†ç±»ä¼¼vueä¸­çš„æ¨¡æ¿è¯­æ³• æ•°æ®ç»‘å®š åˆ—è¡¨æ¸²æŸ“ æ¡ä»¶æ¸²æŸ“ WXSSæ ·å¼ 1.ä»€ä¹ˆæ˜¯WXSS WXSS(WeiXin Style Sheets)æ˜¯ä¸€å¥—æ ·å¼è¯­è¨€ï¼Œç”¨äºæè¿°WXMLçš„ç»„ä»¶æ ·å¼ï¼Œç±»ä¼¼ç½‘é¡µå¼€å‘ä¸­çš„CSSã€‚\n2.WXSSå’ŒCSSåŒºåˆ« æ–°å¢äº†rpxå°ºå¯¸å•ä½ æä¾›äº†å…¨å±€æ ·å¼å’Œå±€éƒ¨æ ·å¼ WXSSä»…æ”¯æŒéƒ¨åˆ†CSSé€‰æ‹©å™¨ JSé€»è¾‘äº¤äº’ 1. .jsæ–‡ä»¶ app.js æ˜¯æ•´ä¸ªå°ç¨‹åºçš„å…¥å£æ–‡ä»¶ï¼Œé€šè¿‡è°ƒç”¨App( )å‡½æ•°æ¥å¯åŠ¨å°ç¨‹åºã€‚ é¡µé¢çš„jsæ–‡ä»¶ é¡µé¢çš„å…¥å£æ–‡ä»¶ï¼Œé€šè¿‡è°ƒç”¨Page( )å‡½æ•°æ¥åˆ›å»ºå¹¶è¿è¡Œé¡µé¢ã€‚ æ™®é€šjsæ–‡ä»¶ æ™®é€šçš„åŠŸèƒ½æ¨¡å—æ–‡ä»¶ï¼Œç”¨æ¥å°è£…å…¬å…±çš„å‡½æ•°æˆ–å±æ€§ä¾›é¡µé¢ä½¿ç”¨ã€‚ å°ç¨‹åºçš„å®¿ä¸»ç¯å¢ƒ åŒ…å«å†…å®¹ï¼š é€šä¿¡æ¨¡å‹ è¿è¡Œæœºåˆ¶ ç»„ä»¶ API é€šä¿¡æ¨¡å‹ 1.é€šä¿¡ä¸»ä½“ å°ç¨‹åºçš„é€šä¿¡ä¸»ä½“æ˜¯æ¸²æŸ“å±‚å’Œé€»è¾‘å±‚\nWXMLæ¨¡æ¿å’ŒWXSSæ ·å¼å·¥ä½œåœ¨æ¸²æŸ“å±‚ JSè„šæœ¬å·¥ä½œåœ¨é€»è¾‘å±‚ 2.å°ç¨‹åºçš„é€šä¿¡æ¨¡å‹ æ¸²æŸ“å±‚ä¸é€»è¾‘å±‚é—´çš„é€šä¿¡ ç”±å¾®ä¿¡å®¢æˆ·ç«¯è¿›è¡Œè½¬å‘ é€»è¾‘å±‚å’Œç¬¬ä¸‰æ–¹æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ ç”±å¾®ä¿¡å®¢æˆ·ç«¯è¿›è¡Œè½¬å‘ 3. å°ç¨‹åºå¯åŠ¨è¿‡ç¨‹ å°ç¨‹åºä»£ç åŒ…ä¸‹è½½åˆ°æœ¬åœ° è§£æapp.jsonå…¨å±€é…ç½®æ–‡ä»¶ æ‰§è¡Œapp.jså°ç¨‹åºå…¥å£æ–‡ä»¶ï¼Œè°ƒç”¨App( )åˆ›å»ºå°ç¨‹åºå®ä¾‹ æ¸²æŸ“å°ç¨‹åºé¦–é¡µ å°ç¨‹åºå¯åŠ¨å®Œæˆ 4. é¡µé¢æ¸²æŸ“è¿‡ç¨‹ åŠ è½½è§£æé¡µé¢çš„.jsoné…ç½®æ–‡ä»¶ åŠ è½½é¡µé¢çš„wxmlæ¨¡æ¿å’Œwxssæ ·å¼ æ‰§è¡Œé¡µé¢çš„.jsæ–‡ä»¶ï¼Œè°ƒç”¨Page( )åˆ›å»ºé¡µé¢å®ä¾‹ é¡µé¢æ¸²æŸ“å®Œæˆ ç»„ä»¶ 1. ç»„ä»¶åˆ†ç±» å°ç¨‹åºä¸­çš„ç»„ä»¶ä¹Ÿæ˜¯å®¿ä¸»ç¯å¢ƒæä¾›çš„ï¼Œå¼€å‘è€…å¯ä»¥åŸºäºç»„ä»¶å¿«é€Ÿæ­å»ºé¡µé¢ç»“æ„ã€‚\nç»„ä»¶åˆ†ä¸ºäº†9å¤§ç±»ï¼š\nè§†å›¾å®¹å™¨ åŸºç¡€å†…å®¹ è¡¨å•ç»„ä»¶ å¯¼èˆªç»„ä»¶ åª’ä½“ç»„ä»¶ mapåœ°å›¾ç»„ä»¶ canvasç”»å¸ƒç»„ä»¶ å¼€æ”¾èƒ½åŠ› æ— éšœç¢è®¿é—® 2.å¸¸ç”¨è§†å›¾å®¹å™¨ç±»ç»„ä»¶ view æ™®é€šè§†å›¾åŒºåŸŸ ç±»ä¼¼HTMLä¸­çš„divï¼Œæ˜¯ä¸€ä¸ªå—çº§å…ƒç´  ç”¨æ¥å®ç°é¡µé¢çš„å¸ƒå±€æ•ˆæœ scroll-view å¯æ»šåŠ¨çš„è§†å›¾åŒºåŸŸ ç”¨æ¥å®ç°æ»šåŠ¨åˆ—è¡¨æ•ˆæœ swiperå’Œswiper-item è½®æ’­å›¾ç»„ä»¶å’Œè½®æ’­å›¾itemç»„ä»¶ viewç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨ ç¼–å†™wxmlæ–‡ä»¶ \u0026lt;text\u0026gt;æ¨ªå‘å¸ƒå±€\u0026lt;/text\u0026gt; \u0026lt;view class=\u0026#34;container1\u0026#34;\u0026gt; \u0026lt;view\u0026gt;A\u0026lt;/view\u0026gt; \u0026lt;view\u0026gt;B\u0026lt;/view\u0026gt; \u0026lt;view\u0026gt;C\u0026lt;/view\u0026gt; \u0026lt;/view\u0026gt; ç¼–å†™wxssæ–‡ä»¶ .container1 view{ width: 100px; height: 100px; text-align: center; line-height: 100px; } .container1 view:nth-child(1){ background-color: aquamarine; } .container1 view:nth-child(2){ background-color: blueviolet; } .container1 view:nth-child(3){ background-color: rgb(216, 66, 66); } .container1{ display: flex; justify-content: space-around; } scroll-viewç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨ 1.wxmlæ–‡ä»¶\n\u0026lt;text\u0026gt;æ»šåŠ¨ç»„ä»¶\u0026lt;/text\u0026gt; \u0026lt;!--scroll-x æ¨ªå‘æ»šåŠ¨--\u0026gt; \u0026lt;!--scroll-y çºµå‘æ»šåŠ¨--\u0026gt; \u0026lt;!--ä½¿ç”¨çºµå‘æ»šåŠ¨æ—¶ï¼Œè¦ç»™scroll-viewä¸€ä¸ªå›ºå®šé«˜åº¦--\u0026gt; \u0026lt;scroll-view class=\u0026#34;container2\u0026#34; scroll-y\u0026gt; \u0026lt;view\u0026gt;A\u0026lt;/view\u0026gt; \u0026lt;view\u0026gt;B\u0026lt;/view\u0026gt; \u0026lt;view\u0026gt;C\u0026lt;/view\u0026gt; \u0026lt;/scroll-view\u0026gt; 2.wxssæ–‡ä»¶\n.container2 view{ width: 100px; height: 100px; text-align: center; line-height: 100px; } .container2 view:nth-child(1){ background-color: aquamarine; } .container2 view:nth-child(2){ background-color: blueviolet; } .container2 view:nth-child(3){ background-color: rgb(109, 50, 50); } .container2{ border: 1px solid crimson; height: 120px; /*çºµå‘æ»šåŠ¨éœ€è¦è®¾ç½®é«˜åº¦*/ width: 100px; } swiperå’Œswiper-itemç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨ wxmlæ–‡ä»¶ \u0026lt;!--pages/list/list.wxml--\u0026gt; \u0026lt;!--è½®æ’­å›¾--\u0026gt; \u0026lt;!-- indicator-dotså±æ€§ï¼šæ˜¾ç¤ºé¢æ¿æŒ‡ç¤ºç‚¹ --\u0026gt; \u0026lt;text\u0026gt;è½®æ’­å›¾\u0026lt;/text\u0026gt; \u0026lt;swiper class=\u0026#34;swiper-container\u0026#34; indicator-dots\u0026gt; \u0026lt;swiper-item\u0026gt; \u0026lt;view class=\u0026#34;item\u0026#34;\u0026gt;A\u0026lt;/view\u0026gt; \u0026lt;/swiper-item\u0026gt; \u0026lt;swiper-item\u0026gt; \u0026lt;view class=\u0026#34;item\u0026#34;\u0026gt;B\u0026lt;/view\u0026gt; \u0026lt;/swiper-item\u0026gt; \u0026lt;swiper-item\u0026gt; \u0026lt;view class=\u0026#34;item\u0026#34;\u0026gt;C\u0026lt;/view\u0026gt; \u0026lt;/swiper-item\u0026gt; \u0026lt;/swiper\u0026gt; wxssæ–‡ä»¶ .swiper-container{ height: 150px;/*ç»„ä»¶é«˜åº¦*/ } .item{ height: 100%; line-height: 150px; text-align: center; } /* èƒŒæ™¯é¢œè‰²ä¸æ˜¾ç¤ºåŸå› ï¼šchild()åé¢åŠ ç©ºæ ¼å†åŠ .item */ swiper-item:nth-child(1) .item{ background-color:royalblue; } swiper-item:nth-child(2) .item{ background-color: rgb(65, 225, 212); } swiper-item:nth-child(3) .item{ background-color: rgb(221, 120, 199); } swiperç»„ä»¶çš„å¸¸ç”¨å±æ€§ å±æ€§ ç±»å‹ é»˜è®¤å€¼ è¯´æ˜ indicator-dot boolean false æ˜¯å¦æ˜¾ç¤ºé¢æ¿æŒ‡ç¤ºç‚¹ indicator-color color rgba(0,0,0,.3) æŒ‡ç¤ºç‚¹é¢œè‰² indicator-active-color color #000000 å½“å‰é€‰ä¸­çš„æŒ‡ç¤ºç‚¹é¢œè‰² autoplay boolean false æ˜¯å¦è‡ªåŠ¨åˆ‡æ¢ interval number 5000 è‡ªåŠ¨åˆ‡æ¢æ—¶é—´é—´éš” circular boolean false æ˜¯å¦è¡”æ¥æ»‘åŠ¨ 3. å¸¸ç”¨çš„åŸºç¡€å†…å®¹ç»„ä»¶ text æ–‡æœ¬ç»„ä»¶ ç±»ä¼¼HTMLä¸­çš„spanæ ‡ç­¾ï¼Œæ˜¯ä¸€ä¸ªè¡Œå†…å…ƒç´  rich-text å¯Œæ–‡æœ¬ç»„ä»¶ æ”¯æŒæŠŠHTMLå­—ç¬¦ä¸²æ¸²æŸ“ä¸ºWXMLç»“æ„ textç»„ä»¶çš„åŸºæœ¬ä½¿ç”¨ é€šè¿‡textç»„ä»¶çš„user-selectå±æ€§ï¼Œå®ç°é•¿æŒ‰é€‰æ‹©æ–‡æœ¬å†…å®¹çš„æ•ˆæœï¼š \u0026lt;text user-select\u0026gt;12345678\u0026lt;/text\u0026gt; rich-textç»„ä»¶åŸºæœ¬ä½¿ç”¨ é€šè¿‡rich-textç»„ä»¶çš„nodeså±æ€§ï¼Œå¯ä»¥æŠŠHTMLå­—ç¬¦ä¸²æ¸²æŸ“æˆå¯¹åº”çš„UIç»“æ„ï¼š \u0026lt;rich-text nodes=\u0026#34;\u0026lt;h1 style=\u0026#39;color: red;\u0026#39;\u0026gt;æ ‡é¢˜\u0026lt;/h1\u0026gt;\u0026#34;\u0026gt;\u0026lt;/rich-text\u0026gt; 4. å…¶ä»–å¸¸ç”¨ç»„ä»¶ button æŒ‰é’®ç»„ä»¶ åŠŸèƒ½æ¯”HTMLä¸­çš„buttonæŒ‰é’®ä¸°å¯Œ é€šè¿‡open-typeå±æ€§å¯ä»¥è°ƒç”¨å¾®ä¿¡æä¾›çš„å„ç§åŠŸèƒ½ï¼ˆå®¢æœã€è½¬å‘ã€è·å–ç”¨æˆ·æˆæƒã€è·å–ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰ image å›¾ç‰‡ç»„ä»¶ imageç»„ä»¶é»˜è®¤å®½åº¦ä¸º300pxï¼Œé«˜åº¦çº¦240px navigator é¡µé¢å¯¼èˆªç»„ä»¶ ç±»ä¼¼HTMLä¸­çš„aé“¾æ¥ buttonç»„ä»¶åŸºæœ¬ä½¿ç”¨ \u0026lt;view\u0026gt;----é€šè¿‡typeç±»å‹----\u0026lt;/view\u0026gt; \u0026lt;button\u0026gt;æ™®é€šæŒ‰é’®\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;primary\u0026#34;\u0026gt;ä¸»è‰²è°ƒæŒ‰é’®\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;warn\u0026#34;\u0026gt;è­¦å‘ŠæŒ‰é’®\u0026lt;/button\u0026gt; \u0026lt;button\u0026gt;\u0026lt;/button\u0026gt; \u0026lt;view\u0026gt;----å°å°ºå¯¸æŒ‰é’®----\u0026lt;/view\u0026gt; \u0026lt;button size=\u0026#34;mini\u0026#34;\u0026gt;é»˜è®¤æŒ‰é’®\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;primary\u0026#34; size=\u0026#34;mini\u0026#34;\u0026gt;ä¸»è‰²è°ƒæŒ‰é’®\u0026lt;/button\u0026gt; \u0026lt;view\u0026gt;----plainé•‚ç©ºæŒ‰é’®----\u0026lt;/view\u0026gt; \u0026lt;button plain\u0026gt;æ™®é€šæŒ‰é’®\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;primary\u0026#34; plain\u0026gt;ä¸»è‰²è°ƒæŒ‰é’®\u0026lt;/button\u0026gt; imageå›¾ç‰‡ç»„ä»¶åŸºæœ¬ä½¿ç”¨ \u0026lt;image\u0026gt;\u0026lt;/image\u0026gt; \u0026lt;!--ç©ºå›¾ç‰‡--\u0026gt; \u0026lt;image src=\u0026#34;/adress/pic\u0026#34;\u0026gt;\u0026lt;/image\u0026gt; imageç»„ä»¶çš„modeå±æ€§ modeå±æ€§ç”¨æ¥æŒ‡å®šå›¾ç‰‡çš„è£å‰ªå’Œç¼©æ”¾æ¨¡å¼ï¼Œå¸¸ç”¨modeå±æ€§ï¼š\nmodeå€¼ è¯´æ˜ scaleToFill (é»˜è®¤å€¼)ç¼©æ”¾æ¨¡å¼ï¼Œä¸ä¿æŒçºµæ¨ªæ¯”ï¼Œæ‹‰ä¼¸å¡«æ»¡imageå…ƒç´  aspectFit ç¼©æ”¾æ¨¡å¼ï¼Œä¿æŒçºµæ¨ªæ¯”ç¼©æ”¾ï¼Œå¯ä»¥å®Œæ•´æ˜¾ç¤ºå›¾ç‰‡ aspectFill ç¼©æ”¾æ¨¡å¼ï¼Œåªä¿æŒçŸ­è¾¹èƒ½å®Œæ•´æ˜¾ç¤º widthFix ç¼©æ”¾æ¨¡å¼ï¼Œå®½åº¦ä¸å˜ï¼Œé«˜åº¦è‡ªåŠ¨å˜åŒ–ï¼Œä¿è¯åŸå›¾é•¿å®½æ¯”ä¸å˜ heightFix ç¼©æ”¾æ¨¡å¼ï¼Œé«˜åº¦ä¸å˜ï¼Œå®½åº¦è‡ªåŠ¨å˜åŒ–ï¼Œä¿æŒåŸå›¾é•¿å®½æ¯”ä¸å˜ API 1. å°ç¨‹åºAPIæ¦‚è¿° å°ç¨‹åºä¸­çš„APIæ˜¯å®¿ä¸»ç¯å¢ƒæä¾›çš„ï¼Œå¼€å‘è€…å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¾®ä¿¡æä¾›çš„åŠŸèƒ½ã€‚å¦‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæ”¯ä»˜ç­‰ã€‚\n2.ä¸‰ç±»API æ—¶é—´ç›‘å¬API ç‰¹ç‚¹ï¼šä»¥onå¼€å¤´ï¼Œç”¨æ¥ç›‘å¬æŸäº›äº‹ä»¶çš„è§¦å‘ ä¸¾ä¾‹ï¼šwx.onWindowResize(function callback)ç›‘å¬çª—å£å°ºå¯¸çš„å˜åŒ– åŒæ­¥API ç‰¹ç‚¹1ï¼šä»¥Syncç»“å°¾çš„APIéƒ½æ˜¯åŒæ­¥API ç‰¹ç‚¹2ï¼šåŒæ­¥APIçš„æ‰§è¡Œç»“æœï¼Œå¯ä»¥é€šè¿‡å‡½æ•°è¿”å›å€¼ç›´æ¥è·å–ï¼Œå¦‚æœæ‰§è¡Œå‡ºé”™ä¼šæŠ›å‡ºå¼‚å¸¸ ä¸¾ä¾‹ï¼šwx.setStorageSync(\u0026ldquo;key\u0026rdquo;,\u0026ldquo;value\u0026rdquo;)å‘æœ¬åœ°å­˜å‚¨ä¸­å†™å…¥å†…å®¹ å¼‚æ­¥API ç‰¹ç‚¹ï¼šç±»ä¼¼äºjQueryä¸­$.ajax(option)å‡½æ•°ï¼Œéœ€è¦é€šè¿‡successã€failã€completeæ¥æ”¶è°ƒç”¨çš„ç»“æœ ä¸¾ä¾‹ï¼šwx.request()å‘èµ·ç½‘ç»œæ•°æ®è¯·æ±‚ï¼Œé€šè¿‡successå›è°ƒå‡½æ•°æ¥æ”¶æ•°æ® ","permalink":"https://m1yan.github.io/posts/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91-%E8%B5%B7%E6%AD%A5/","summary":"\u003ch1 id=\"å°ç¨‹åºé¡¹ç›®ç»“æ„\"\u003eå°ç¨‹åºé¡¹ç›®ç»“æ„\u003c/h1\u003e\n\u003ch3 id=\"1åŸºæœ¬ç»„æˆç»“æ„\"\u003e1.åŸºæœ¬ç»„æˆç»“æ„\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003epagesç”¨æ¥å­˜æ”¾æ‰€æœ‰å°ç¨‹åºé¡µé¢\u003c/li\u003e\n\u003cli\u003eutilsç”¨æ¥å­˜æ”¾å·¥å…·æ€§è´¨çš„æ¨¡å—\u003c/li\u003e\n\u003cli\u003eapp.js å°ç¨‹åºé¡¹ç›®çš„å…¥å£æ–‡ä»¶\u003c/li\u003e\n\u003cli\u003eapp.json å°ç¨‹åºé¡¹ç›®çš„å…¨å±€é…ç½®æ–‡ä»¶\u003c/li\u003e\n\u003cli\u003eapp.wxss å°ç¨‹åºé¡¹ç›®çš„å…¨å±€æ ·å¼æ–‡ä»¶\u003c/li\u003e\n\u003cli\u003eproject.config.json ç”¨æ¥é…ç½®å°ç¨‹åºåŠå…¶é¡µé¢æ˜¯å¦å…è®¸è¢«å¾®ä¿¡ç´¢å¼•\u003c/li\u003e\n\u003c/ol\u003e","title":"å¾®ä¿¡å°ç¨‹åºå¼€å‘-èµ·æ­¥"},{"content":"æ¦‚è®º å®šä¹‰ å¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å‹çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå¤„ç†ä¸€äº›ä¸ç›¸äº¤é›†åˆçš„åˆå¹¶åŠæŸ¥è¯¢é—®é¢˜ï¼ˆå³æ‰€è°“çš„å¹¶ã€æŸ¥ï¼‰ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¹¶æŸ¥é›†æ¥åˆ¤æ–­ä¸€ä¸ªæ£®æ—ä¸­æœ‰å‡ æ£µæ ‘ã€æŸä¸ªèŠ‚ç‚¹æ˜¯å¦å±äºæŸæ£µæ ‘ç­‰ã€‚\nä¸»è¦æ„æˆ å¹¶æŸ¥é›†ä¸»è¦ç”±ä¸€ä¸ªæ•´å‹æ•°ç»„pre[ ]å’Œä¸¤ä¸ªå‡½æ•°find( )ã€join( )æ„æˆã€‚ æ•°ç»„ pre[ ] è®°å½•äº†æ¯ä¸ªç‚¹çš„å‰é©±èŠ‚ç‚¹æ˜¯è°ï¼Œå‡½æ•° find(x) ç”¨äºæŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹ x å±äºå“ªä¸ªé›†åˆï¼Œå‡½æ•° join(x,y) ç”¨äºåˆå¹¶ä¸¤ä¸ªèŠ‚ç‚¹ x å’Œ y ã€‚\nä½œç”¨ å¹¶æŸ¥é›†çš„ä¸»è¦ä½œç”¨æ˜¯æ±‚è¿é€šåˆ†æ”¯æ•°ï¼ˆå¦‚æœä¸€ä¸ªå›¾ä¸­æ‰€æœ‰ç‚¹éƒ½å­˜åœ¨å¯è¾¾å…³ç³»ï¼ˆç›´æ¥æˆ–é—´æ¥ç›¸è¿ï¼‰ï¼Œåˆ™æ­¤å›¾çš„è¿é€šåˆ†æ”¯æ•°ä¸º1ï¼›å¦‚æœæ­¤å›¾æœ‰ä¸¤å¤§å­å›¾å„è‡ªå…¨éƒ¨å¯è¾¾ï¼Œåˆ™æ­¤å›¾çš„è¿é€šåˆ†æ”¯æ•°ä¸º2â€¦â€¦ï¼‰\nå¹¶æŸ¥é›†çš„åº”ç”¨ æ¡ˆä¾‹åŠå…¶è®²è§£ æ±Ÿæ¹–é—¨æ´¾\nåˆ†æ å…¶ä¸­æ¯ä¸ªå¸®æ´¾çš„æ•™ä¸»å¯ä»¥éšæœºé€‰æ‹©ï¼Œåªè¦ä¸¤ä¸ªäººçš„æ•™ä¸»ç›¸åŒï¼Œä»–ä»¬å°±å±äºåŒä¸€ä¸ªå¸®æ´¾ã€‚å…¶ä¸­çš„æ•™ä¸»æŒ‡çš„å°±æ˜¯ä»£è¡¨å…ƒã€‚\nä»£è¡¨å…ƒï¼šç”¨é›†åˆä¸­çš„æŸä¸ªå…ƒç´ æ¥ä»£è¡¨è¿™ä¸ªé›†åˆï¼Œè¿™ä¸ªå…ƒç´ å°±è¢«ç§°ä¸ºè¯¥é›†åˆçš„ä»£è¡¨å…ƒã€‚\nç”¨äºæ‰¾ä»£è¡¨å…ƒçš„å‡½æ•°find(x) pre[ ]æ•°ç»„ç”¨äºè®°å½•æ¯ä¸ªäººçš„ä¸Šçº§æ˜¯è°ï¼Œå±‚å±‚æŸ¥æ‰¾ç›´è‡³æ‰¾åˆ°ä¸»æ•™ï¼Œä¸»æ•™ï¼ˆå³ä»£è¡¨å…ƒï¼‰çš„ç‰¹å¾ä¸ºä»–çš„ä¸Šçº§ä¸ºä»–è‡ªå·±ã€‚\nint find(int x){ while(pre[x]!=x) x=pre[x]; return x; } ç”¨äºåˆå¹¶ä¸¤ä¸ªäººæ‰€åœ¨å¸®æ´¾çš„å‡½æ•°join(x,y) å‡è®¾Aå¸®æ´¾ä¸­çš„ä¸€ä¸ªæˆå‘˜å¼ ä¸‰ä¸Bå¸®æ´¾ä¸­çš„ä¸€ä¸ªæˆå‘˜æå››æƒ³åˆå¹¶ä¸¤ä¸ªå¸®æ´¾ï¼Œä»–ä»¬è¦åšçš„äº‹æƒ…æœ‰ä¸¤ç‚¹ï¼š\nå¼ ä¸‰å’Œæå››åˆ†åˆ«æ‰¾åˆ°ä»–ä»¬å„è‡ªçš„æ•™ä¸» ä½ æ¥éšæœºæŒ‡æ´¾ä¸€ä¸ªäººå½“åˆå¹¶åå¸®æ´¾çš„æ•™ä¸» å†™æˆå‡½æ•°å³ä¸º\nvoid join(int x,int y){ int a=find(x); int b=find(y); if(a!=b) pre[a]=b; } ä¾‹é¢˜ï¼šç•…é€šå·¥ç¨‹ é¢˜ç›® Problem Description æŸçœè°ƒæŸ¥åŸé•‡äº¤é€šçŠ¶å†µï¼Œå¾—åˆ°ç°æœ‰åŸé•‡é“è·¯ç»Ÿè®¡è¡¨ï¼Œè¡¨ä¸­åˆ—å‡ºäº†æ¯æ¡é“è·¯ç›´æ¥è¿é€šçš„åŸé•‡ã€‚çœæ”¿åºœâ€œç•…é€šå·¥ç¨‹â€çš„ç›®æ ‡æ˜¯ä½¿å…¨çœä»»ä½•ä¸¤ä¸ªåŸé•‡é—´éƒ½å¯ä»¥å®ç°äº¤é€šï¼ˆä½†ä¸ä¸€å®šæœ‰ç›´æ¥çš„é“è·¯ç›¸è¿ï¼Œåªè¦äº’ç›¸é—´æ¥é€šè¿‡é“è·¯å¯è¾¾å³å¯ï¼‰ã€‚é—®æœ€å°‘è¿˜éœ€è¦å»ºè®¾å¤šå°‘æ¡é“è·¯ï¼Ÿ\nInput æµ‹è¯•è¾“å…¥åŒ…å«è‹¥å¹²æµ‹è¯•ç”¨ä¾‹ã€‚æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç¬¬1è¡Œç»™å‡ºä¸¤ä¸ªæ­£æ•´æ•°ï¼Œåˆ†åˆ«æ˜¯åŸé•‡æ•°ç›®N ( \u0026lt; 1000 )å’Œé“è·¯æ•°ç›®Mï¼›éšåçš„Mè¡Œå¯¹åº”Mæ¡é“è·¯ï¼Œæ¯è¡Œç»™å‡ºä¸€å¯¹æ­£æ•´æ•°ï¼Œåˆ†åˆ«æ˜¯è¯¥æ¡é“è·¯ç›´æ¥è¿é€šçš„ä¸¤ä¸ªåŸé•‡çš„ç¼–å·ã€‚ä¸ºç®€å•èµ·è§ï¼ŒåŸé•‡ä»1åˆ°Nç¼–å·ã€‚ æ³¨æ„:ä¸¤ä¸ªåŸå¸‚ä¹‹é—´å¯ä»¥æœ‰å¤šæ¡é“è·¯ç›¸é€š,ä¹Ÿå°±æ˜¯è¯´ 3 3 1 2 1 2 2 1 è¿™ç§è¾“å…¥ä¹Ÿæ˜¯åˆæ³•çš„ å½“Nä¸º0æ—¶ï¼Œè¾“å…¥ç»“æŸï¼Œè¯¥ç”¨ä¾‹ä¸è¢«å¤„ç†ã€‚ Huge input, scanf is recommended.\nOutput å¯¹æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œåœ¨1è¡Œé‡Œè¾“å‡ºæœ€å°‘è¿˜éœ€è¦å»ºè®¾çš„é“è·¯æ•°ç›®ã€‚\nè¾“å…¥æ ·ä¾‹\n4 2 1 3 4 3 3 3 1 2 1 3 2 3 5 2 1 2 3 5 999 0 0 è¾“å‡ºæ ·ä¾‹\n1 0 2 998 Code #define _CRT_SECURE_NO_WARNINGS #include\u0026lt;iostream\u0026gt; #include\u0026lt;algorithm\u0026gt; using namespace std; int set[1010]; int findx(int x) { int r = x; while (r != set[r]) r = set[r]; return r; } void join(int x, int y) { int a = findx(x); int b = findx(y); if(a!=b) set[a] = b; } int main() { int n, m; while (cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; m \u0026amp;\u0026amp; n) { for (int i = 1; i \u0026lt;= n; i++) { set[i] = i; } for (int i = 0; i \u0026lt; m; i++) { int x, y; cin \u0026gt;\u0026gt; x \u0026gt;\u0026gt; y; join(x, y); } int count = 0; for (int i = 1; i \u0026lt;= n; i++) { if (set[i] == i) count++; } cout \u0026lt;\u0026lt; count - 1 \u0026lt;\u0026lt; endl;//Nå †é€šè·¯ä¹‹é—´åªéœ€è¦N-1æ¡é“è·¯å³å¯å…¨éƒ¨è¿é€š } return 0; } ä¼˜åŒ– I. è·¯å¾„å‹ç¼©ï¼ˆä¼˜åŒ–find(x)ï¼‰ å¦‚æœä¸€ä¸ªå¸®æ´¾ä¸­æ‰€æœ‰æˆå‘˜çš„ä¸Šçº§éƒ½ä¸ºæ•™ä¸»ï¼Œé‚£ä¹ˆåªéœ€ä¸€æ­¥å°±å¯æ‰¾åˆ°æ•™ä¸»ã€‚\nä»£ç ï¼ˆé€’å½’å†™æ³•ï¼‰ int find(int x){ if(pre[x]==x) return x; pre[x]=find(pre[x]); return pre[x]; } ç¼ºé™·ï¼šåªæœ‰å½“æŸ¥æ‰¾äº†æŸä¸ªèŠ‚ç‚¹çš„ä»£è¡¨å…ƒï¼ˆæ•™ä¸»ï¼‰åï¼Œæ‰èƒ½å¯¹è¯¥æŸ¥æ‰¾è·¯å¾„ä¸Šçš„å„èŠ‚ç‚¹è¿›è¡Œè·¯å¾„å‹ç¼©ã€‚æ¢è¨€ä¹‹ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶å€™æ˜¯å®ç°æ²¡æœ‰å‹ç¼©æ•ˆæœçš„ï¼Œåªæœ‰åœ¨ä¹‹åæ‰æœ‰æ•ˆã€‚\n","permalink":"https://m1yan.github.io/posts/2023221-%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/","summary":"\u003ch1 id=\"æ¦‚è®º\"\u003eæ¦‚è®º\u003c/h1\u003e\n\u003ch2 id=\"å®šä¹‰\"\u003eå®šä¹‰\u003c/h2\u003e\n\u003cp\u003eå¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å‹çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå¤„ç†ä¸€äº›ä¸ç›¸äº¤é›†åˆçš„åˆå¹¶åŠæŸ¥è¯¢é—®é¢˜ï¼ˆå³æ‰€è°“çš„å¹¶ã€æŸ¥ï¼‰ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¹¶æŸ¥é›†æ¥åˆ¤æ–­ä¸€ä¸ªæ£®æ—ä¸­æœ‰å‡ æ£µæ ‘ã€æŸä¸ªèŠ‚ç‚¹æ˜¯å¦å±äºæŸæ£µæ ‘ç­‰ã€‚\u003c/p\u003e","title":"å¹¶æŸ¥é›†åŠå…¶åº”ç”¨"},{"content":"æ ¸å¿ƒæ€è·¯ å¯¹äºä¸€ä¸ªç»™å®šçš„èŠ‚ç‚¹ï¼Œä»–çš„ä¸­åºåç»§èŠ‚ç‚¹æœ‰ä¸¤ç§æƒ…å†µ:\nç»™å®šèŠ‚ç‚¹å­˜åœ¨å³å­æ ‘æ—¶ï¼Œä¸­åºåç»§èŠ‚ç‚¹å³ä¸ºå³å­æ ‘ä¸­çš„æœ€å°å€¼\nè‹¥ä¸å­˜åœ¨å³å­æ ‘ï¼Œåˆ™ä¸­åºåç»§èŠ‚ç‚¹ä¸ºç»™å®šèŠ‚ç‚¹æ‰€åœ¨çš„å·¦å­æ ‘çš„ç¥–å…ˆ\nCode BstNode* Find(BstNode* root, int data) {//å¯»æ‰¾ç»™å®šdataçš„åœ°å€ if (root == NULL)return NULL; if (data \u0026lt; root-\u0026gt;data) return Find(root-\u0026gt;left, data); else if (data \u0026gt; root-\u0026gt;data) return Find(root-\u0026gt;right, data); else return root; } BstNode* Getsuccessor(BstNode* root, int data) { BstNode* current = Find(root, data); if (current == NULL)return NULL; if (current-\u0026gt;right != NULL) { return FindMin(current-\u0026gt;right); } else { BstNode* successor = NULL; BstNode* ancestor = root; while (ancestor != current) { if (current-\u0026gt;data \u0026lt; ancestor-\u0026gt;data) { successor = ancestor; ancestor = ancestor-\u0026gt;left; } else { ancestor = ancestor-\u0026gt;right; } } return ancestor; } } ","permalink":"https://m1yan.github.io/posts/2023119-%E6%9F%A5%E6%89%BE%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E4%B8%AD%E5%BA%8F%E5%90%8E%E7%BB%A7%E8%8A%82%E7%82%B9/","summary":"\u003ch1 id=\"æ ¸å¿ƒæ€è·¯\"\u003eæ ¸å¿ƒæ€è·¯\u003c/h1\u003e\n\u003cp\u003eå¯¹äºä¸€ä¸ªç»™å®šçš„èŠ‚ç‚¹ï¼Œä»–çš„ä¸­åºåç»§èŠ‚ç‚¹æœ‰\u003ccode\u003eä¸¤ç§æƒ…å†µ\u003c/code\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eç»™å®šèŠ‚ç‚¹å­˜åœ¨å³å­æ ‘æ—¶ï¼Œä¸­åºåç»§èŠ‚ç‚¹å³ä¸ºå³å­æ ‘ä¸­çš„æœ€å°å€¼\u003c/p\u003e\n\u003cp\u003eè‹¥ä¸å­˜åœ¨å³å­æ ‘ï¼Œåˆ™ä¸­åºåç»§èŠ‚ç‚¹ä¸ºç»™å®šèŠ‚ç‚¹æ‰€åœ¨çš„å·¦å­æ ‘çš„ç¥–å…ˆ\u003c/p\u003e\n\u003c/blockquote\u003e","title":"æŸ¥æ‰¾äºŒå‰æœç´¢æ ‘çš„ä¸­åºåç»§èŠ‚ç‚¹"},{"content":"åŸç† æœç´¢äºŒå‰æ ‘æœ‰2ä¸ªåŸºæœ¬æ€§è´¨å¯ä»¥ç”¨äºåˆ¤æ–­ï¼š\nå·¦å­æ ‘ä¸­çš„æ‰€æœ‰å€¼éƒ½å°äºç­‰äºæ ¹èŠ‚ç‚¹çš„å€¼ï¼Œè€Œå³å­æ ‘ä¸­çš„æ•°æ®éƒ½å¤§äºæ ¹èŠ‚ç‚¹çš„å€¼ã€‚ äºŒå‰æœç´¢æ ‘çš„ä¸­åºè¾“å‡ºåæ•°æ®æŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ— å¯¹äºç¬¬ä¸€ä¸ªæ€§è´¨ï¼Œå‡è®¾æ ¹èŠ‚ç‚¹æ•°æ®ä¸º7ï¼Œé‚£ä¹ˆå·¦å­æ ‘æœ€å¤§ä¸èƒ½è¶…è¿‡7ï¼Œè€Œå³å­æ ‘éƒ½å¤§äº7ã€‚\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ä¸­å¢åŠ å‚æ•°minValueå’ŒmaxValueï¼Œç”¨æ¥è®°å½•æ­¤å­æ ‘ä¸­æ•°æ®çš„èŒƒå›´ã€‚\nä»£ç I bool IsBST(BstNode* root, int minValue, int maxValue) { if (root == NULL)return true; if (root-\u0026gt;data \u0026gt;= minValue \u0026amp;\u0026amp; root-\u0026gt;data \u0026lt; maxValue \u0026amp;\u0026amp; IsBST(root-\u0026gt;left, minValue, root-\u0026gt;data) \u0026amp;\u0026amp; IsBST(root-\u0026gt;right, root-\u0026gt;data, maxValue)) return true; else return false; } bool IsBinarySearchTree(BstNode* root) { return IsBST(root, INT_MIN, INT_MAX); } ä»£ç II void LDR(BstNode* root, vector\u0026lt;int\u0026gt;\u0026amp; A) { if (root == NULL)return; LDR(root-\u0026gt;left,A); A.push_back(root-\u0026gt;data); LDR(root-\u0026gt;right,A); } bool ISBST(BstNode* root) { vector\u0026lt;int\u0026gt; A; LDR(root,A); for (int i = 0; i \u0026lt; A.size() - 1; i++) { if (A[i] \u0026gt;A[i + 1])return false; } return true; } ","permalink":"https://m1yan.github.io/posts/2023119-%E5%A6%82%E4%BD%95%E6%A3%80%E6%9F%A5%E4%B8%80%E4%B8%AA%E4%BA%8C%E5%8F%89%E6%A0%91%E6%98%AF%E5%90%A6%E4%B8%BA%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/","summary":"\u003ch1 id=\"åŸç†\"\u003eåŸç†\u003c/h1\u003e\n\u003cp\u003eæœç´¢äºŒå‰æ ‘æœ‰2ä¸ªåŸºæœ¬æ€§è´¨å¯ä»¥ç”¨äºåˆ¤æ–­ï¼š\u003c/p\u003e\n\u003cblockquote\u003e\n\u003col\u003e\n\u003cli\u003eå·¦å­æ ‘ä¸­çš„æ‰€æœ‰å€¼éƒ½å°äºç­‰äºæ ¹èŠ‚ç‚¹çš„å€¼ï¼Œè€Œå³å­æ ‘ä¸­çš„æ•°æ®éƒ½å¤§äºæ ¹èŠ‚ç‚¹çš„å€¼ã€‚\u003c/li\u003e\n\u003cli\u003eäºŒå‰æœç´¢æ ‘çš„ä¸­åºè¾“å‡ºåæ•°æ®æŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eå¯¹äºç¬¬ä¸€ä¸ªæ€§è´¨ï¼Œå‡è®¾æ ¹èŠ‚ç‚¹æ•°æ®ä¸º7ï¼Œé‚£ä¹ˆå·¦å­æ ‘æœ€å¤§ä¸èƒ½è¶…è¿‡7ï¼Œè€Œå³å­æ ‘éƒ½å¤§äº7ã€‚\u003c/p\u003e\n\u003cp\u003eæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ä¸­å¢åŠ å‚æ•°\u003ccode\u003eminValue\u003c/code\u003eå’Œ\u003ccode\u003emaxValue\u003c/code\u003eï¼Œç”¨æ¥è®°å½•æ­¤å­æ ‘ä¸­æ•°æ®çš„èŒƒå›´ã€‚\u003c/p\u003e","title":"å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªäºŒå‰æ ‘æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘"},{"content":"ä¸‰ç§æƒ…å†µ Case 1 åˆ é™¤çš„èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼ˆå³è¯¥èŠ‚ç‚¹ä¸ºå¶èŠ‚ç‚¹ï¼‰\næ“ä½œï¼šç›´æ¥delete\nCase 2 åˆ é™¤çš„èŠ‚ç‚¹ä¸‹æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹\næ“ä½œï¼šç”¨å·¦/å³å­æ ‘ä»£æ›¿è¯¥èŠ‚ç‚¹\nCase 3 åˆ é™¤çš„èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹\næ“ä½œï¼š\næ‰¾åˆ°å³å­æ ‘ä¸­çš„æœ€å°å€¼ å¤åˆ¶è¯¥å€¼åˆ°åˆ é™¤çš„èŠ‚ç‚¹å¤„ ï¼ˆå¦‚æœæ ‘ä¸­çš„æ•°æ®éƒ½å„ä¸ç›¸åŒçš„è¯ï¼‰æˆ‘ä»¬éœ€è¦åˆ å»å³å­æ ‘ä¸­çš„æœ€å°å€¼ï¼Œå› ä¸ºå³å­æ ‘çš„æœ€å°å€¼æ²¡æœ‰å·¦å­æ ‘ï¼Œæ‰€ä»¥åˆ å»å®ƒçš„æƒ…å†µå°±é™ä¸ºCase1æˆ–Case2 ä»£ç  BstNode* FindMin(BstNode* root) { if (root-\u0026gt;left == NULL)return root; else return FindMin(root-\u0026gt;left); } struct BstNode* Delete(BstNode* root, int data) { if (root == NULL)return root; else if (data \u0026lt; root-\u0026gt;data)root-\u0026gt;left = Delete(root-\u0026gt;left, data); else if (data \u0026gt; root-\u0026gt;data)root-\u0026gt;right = Delete(root-\u0026gt;right, data); else { //no child if (root-\u0026gt;left == NULL \u0026amp;\u0026amp; root-\u0026gt;right == NULL) { delete root; root = NULL; } //one child else if (root-\u0026gt;left == NULL) { BstNode* temp = root; root = root-\u0026gt;right; delete temp; } else if (root-\u0026gt;right == NULL) { BstNode* temp = root; root = root-\u0026gt;left; delete temp; } //two children else { BstNode* temp = FindMin(root-\u0026gt;right); root-\u0026gt;data = temp-\u0026gt;data; root-\u0026gt;right = Delete(root-\u0026gt;right, temp-\u0026gt;data); } } return root; } ","permalink":"https://m1yan.github.io/posts/2023119-%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E8%8A%82%E7%82%B9/","summary":"\u003ch1 id=\"ä¸‰ç§æƒ…å†µ\"\u003eä¸‰ç§æƒ…å†µ\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003eCase 1\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eåˆ é™¤çš„èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼ˆå³è¯¥èŠ‚ç‚¹ä¸ºå¶èŠ‚ç‚¹ï¼‰\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ“ä½œï¼šç›´æ¥delete\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eCase 2\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eåˆ é™¤çš„èŠ‚ç‚¹ä¸‹æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eæ“ä½œï¼šç”¨å·¦/å³å­æ ‘ä»£æ›¿è¯¥èŠ‚ç‚¹\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eCase 3\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eåˆ é™¤çš„èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹\u003c/p\u003e","title":"åˆ é™¤ä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„èŠ‚ç‚¹"},{"content":"Tree Traversal Tree traversal is a process of visiting each node in the tree exactly once in some order.\næ ‘çš„éå†æœ‰2ç§æ–¹å¼ï¼ŒBreadth-firstï¼ˆå¹¿åº¦ä¼˜å…ˆï¼‰å’ŒDepth-firstï¼ˆæ·±åº¦ä¼˜å…ˆï¼‰ã€‚\nBreadth-firstï¼ˆå¹¿åº¦ä¼˜å…ˆï¼‰ æŒ‰ç…§å¹¿åº¦ä¼˜å…ˆï¼Œå¯¹äºŒå‰æ ‘çš„éå†æ–¹å¼ä¸»è¦æ˜¯Level-orderï¼ˆå±‚åºéå†ï¼‰ã€‚\nLevel-orderï¼ˆå±‚åºéå†ï¼‰ å±‚åºéå†å³å¯¹ä¸€ä¸ªäºŒå‰æ ‘æ¯å±‚ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³è¿›è¡Œéå†ã€‚\nä¸Šå›¾å±‚åºéå†é¡ºåºå³ä¸ºF D J B E G K A C I H.\nå®ç° ç”¨é˜Ÿåˆ—å¯ä»¥å®ç°å±‚åºéå†ã€‚å› ä¸ºé˜Ÿåˆ—æœ‰First-In-First-Out(FIFO)åŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆè®©rootè¿›å…¥é˜Ÿåˆ—ï¼Œåœ¨è®¿é—®èŠ‚ç‚¹æ—¶ï¼Œè®©å…¶å·¦å³èŠ‚ç‚¹è¿›å…¥é˜Ÿåˆ—ã€‚\nå®ç°å±‚åºéå†çš„ä»£ç å¦‚ä¸‹ï¼š\nä»£ç  #include\u0026lt;queue\u0026gt;//å¯ä»¥ç›´æ¥è°ƒç”¨åº“å‡½æ•°ä½¿ç”¨é˜Ÿåˆ—ï¼Œå…¶åŸºæœ¬è¯­æ³•ä¸Stackç±»ä¼¼ void LevelOrder(BstNode* root) { if (root == NULL)return; queue\u0026lt;BstNode*\u0026gt; Q; Q.push(root); while (!Q.empty()) { BstNode* current = Q.front(); cout \u0026lt;\u0026lt; current-\u0026gt;data \u0026lt;\u0026lt; \u0026#34; \u0026#34;; if (current-\u0026gt;left != NULL)Q.push(current-\u0026gt;left); if (current-\u0026gt;right != NULL)Q.push(current-\u0026gt;right); Q.pop(); } } Depth-firstï¼ˆæ·±åº¦ä¼˜å…ˆï¼‰ æ·±åº¦ä¼˜å…ˆæœ‰ä¸‰ä¸ªæ’åºæ–¹æ³•ï¼ŒPreorderï¼ˆå‰åºï¼‰ã€Inorderï¼ˆä¸­åºï¼‰å’ŒPostorderï¼ˆååºï¼‰ã€‚\nç±»å‹ Order Preorder \u0026lt;root\u0026gt;\u0026lt;left\u0026gt;\u0026lt;right\u0026gt;(DLR) Inorder \u0026lt;left\u0026gt;\u0026lt;root\u0026gt;\u0026lt;right\u0026gt;(LDR) Postorder \u0026lt;left\u0026gt;\u0026lt;right\u0026gt;\u0026lt;root\u0026gt;(LRD) ä¸Šå›¾ä¸‰ç§ä¸åŒæ–¹å¼çš„æ’åˆ—é¡ºåºåˆ†åˆ«ä¸ºï¼š\nPreorder: F D B A C E J G I H K\nInorder: A B C D E F G H I J K\nPostorder: A C B E D H I G K J F\nå®ç° ä¸‰ç§é¡ºåºéƒ½å¯ä»¥ç”¨é€’å½’æ¥ç®€æ´åœ°å†™å‡ºï¼Œä»£ç å¦‚ä¸‹ï¼š\nä»£ç  void Preorder(BstNode* root) { if (root == NULL)return; printf(\u0026#34;%d \u0026#34;, root-\u0026gt;data); Preorder(root-\u0026gt;left); Preorder(root-\u0026gt;right); } void Inorder(BstNode* root) { if (root == NULL)return; Inorder(root-\u0026gt;left); printf(\u0026#34;%d \u0026#34;, root-\u0026gt;data); Inorder(root-\u0026gt;right); } void Postorder(BstNode* root) { if (root == NULL)return; Postorder(root-\u0026gt;left); Postorder(root-\u0026gt;right); printf(\u0026#34;%d \u0026#34;, root-\u0026gt;data); } æœ€åé™„ä¸Šå®Œæ•´ä»£ç ï¼Œè¾“å‡ºæ ‘çš„é«˜åº¦ï¼Œå±‚åºéå†ï¼Œå‰åºï¼Œä¸­åºï¼Œååº\n#include\u0026lt;iostream\u0026gt; #include\u0026lt;queue\u0026gt; using namespace std; struct BstNode { int data; BstNode* left; BstNode* right; }; void LevelOrder(BstNode* root) { if (root == NULL)return; queue\u0026lt;BstNode*\u0026gt; Q; Q.push(root); while (!Q.empty()) { BstNode* current = Q.front(); cout \u0026lt;\u0026lt; current-\u0026gt;data \u0026lt;\u0026lt; \u0026#34; \u0026#34;; if (current-\u0026gt;left != NULL)Q.push(current-\u0026gt;left); if (current-\u0026gt;right != NULL)Q.push(current-\u0026gt;right); Q.pop(); } printf(\u0026#34;\\n\u0026#34;); } void Preorder(BstNode* root) { if (root == NULL)return; printf(\u0026#34;%d \u0026#34;, root-\u0026gt;data); Preorder(root-\u0026gt;left); Preorder(root-\u0026gt;right); } void Inorder(BstNode* root) { if (root == NULL)return; Inorder(root-\u0026gt;left); printf(\u0026#34;%d \u0026#34;, root-\u0026gt;data); Inorder(root-\u0026gt;right); } void Postorder(BstNode* root) { if (root == NULL)return; Postorder(root-\u0026gt;left); Postorder(root-\u0026gt;right); printf(\u0026#34;%d \u0026#34;, root-\u0026gt;data); } BstNode* GetNewNode(int data) { BstNode* NewNode = new BstNode(); NewNode-\u0026gt;data = data; NewNode-\u0026gt;left = NewNode-\u0026gt;right = NULL; return NewNode; } BstNode* Insert(BstNode* root,int data) { if (root == NULL) root = GetNewNode(data); else if (data \u0026lt;= root-\u0026gt;data) { root-\u0026gt;left = Insert(root-\u0026gt;left, data); } else root-\u0026gt;right = Insert(root-\u0026gt;right, data); return root; } int max(int a, int b) { if (a \u0026gt; b)return a; else return b; } int FindHeight(BstNode* root) { if (root == NULL) { return -1; } return max(FindHeight(root-\u0026gt;left), FindHeight(root-\u0026gt;right)) + 1; } int main() { BstNode* root = NULL; root = Insert(root,3); root = Insert(root, 6); root = Insert(root, 2); root = Insert(root, 1); root = Insert(root, 7); root = Insert(root, 5); root = Insert(root, 8); root = Insert(root, 4); printf(\u0026#34;Height of tree is %d\\n\u0026#34;, FindHeight(root)); cout \u0026lt;\u0026lt; \u0026#34;LevelOrder:\u0026#34;; LevelOrder(root); cout \u0026lt;\u0026lt; \u0026#34;Preorder:\u0026#34;; Preorder(root); cout \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;Inorder:\u0026#34;; Inorder(root); cout \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; \u0026#34;Postorder:\u0026#34;; Postorder(root); return 0; } ","permalink":"https://m1yan.github.io/posts/2023115-%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/","summary":"\u003ch1 id=\"tree-traversal\"\u003eTree Traversal\u003c/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTree traversal is a process of visiting each node in the tree exactly once in some order.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eæ ‘çš„éå†æœ‰2ç§æ–¹å¼ï¼Œ\u003ccode\u003eBreadth-firstï¼ˆå¹¿åº¦ä¼˜å…ˆï¼‰\u003c/code\u003eå’Œ\u003ccode\u003eDepth-firstï¼ˆæ·±åº¦ä¼˜å…ˆï¼‰\u003c/code\u003eã€‚\u003c/p\u003e","title":"äºŒå‰æ ‘çš„éå†"},{"content":"æ ‘çš„ä»‹ç» æ ‘(Tree)ä½œä¸ºä¸€ç§æ•°æ®ç»“æ„ï¼Œå…·æœ‰ä¸€ç§é€’å½’æ€§ã€‚ä¸€ä¸ªæ ‘å¯ä»¥çœ‹ä½œæ˜¯ç”±æ ¹èŠ‚ç‚¹(root)ä»¥åŠè‹¥å¹²å­æ ‘æ„æˆï¼Œè€Œå­æ ‘åˆå¯ä»¥ç»§ç»­å‘ä¸‹åˆ†æˆæ ¹å’Œå­æ ‘ï¼Œå› æ­¤æ ‘å…·æœ‰é€’å½’æ€§ã€‚\näºŒå‰æ ‘(binary tree)æ˜¯æ ‘ä¸­çš„ä¸€ç§ï¼Œå®ƒæ»¡è¶³æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è¦ä¹ˆ2ä¸ªè¦ä¹ˆ0ä¸ªå­èŠ‚ç‚¹çš„ç‰¹æ€§ã€‚\näºŒå‰æœç´¢æ ‘(binary search tree)æ»¡è¶³å·¦ä¾§å­æ ‘ä¸­å‚¨å­˜çš„å€¼éƒ½å°äºç­‰äºrootï¼Œè€Œå³ä¾§å­æ ‘ä¸Šçš„å€¼éƒ½å¤§äºrootï¼Œå¹¶ä¸”é€’å½’æ»¡è¶³ã€‚\næœç´¢æ•ˆç‡æ¯”è¾ƒ Operation Array Linked-list Array(sorted) BST Search(n) O(n) O(n) O(logn) O(logn) Insert(x) O(1) O(1) O(n) O(logn) Remove(n) O(n) O(n) O(n) O(logn) å¯ä»¥çœ‹å‡ºäºŒå‰æœç´¢æ ‘åœ¨å¤„ç†æ•°æ®æ–¹é¢æ›´æœ‰ä¼˜åŠ¿ã€‚\näºŒå‰æœç´¢æ ‘çš„é€’å½’å®ç° #include\u0026lt;iostream\u0026gt; using namespace std; struct BstNode { int data; struct BstNode* left; struct BstNode* right; }; BstNode* GetNewNode(int data) { BstNode* NewNode = (BstNode*)malloc(sizeof(BstNode)); NewNode-\u0026gt;data = data; NewNode-\u0026gt;left = NULL; NewNode-\u0026gt;right = NULL; return NewNode; } BstNode* Insert(BstNode* root, int data) { if (root == NULL) { root = GetNewNode(data); } else if (data \u0026lt;= root-\u0026gt;data) { root-\u0026gt;left = Insert(root-\u0026gt;left, data); } else { root-\u0026gt;right = Insert(root-\u0026gt;right, data); } return root; } bool Search(BstNode* root, int data) { if (root == NULL) return false; else if (root-\u0026gt;data == data) return true; else if (data \u0026lt;= root-\u0026gt;data) return Search(root-\u0026gt;left, data); else return Search(root-\u0026gt;right, data); } int main() { BstNode* root; root = NULL; root = Insert(root, 15); root = Insert(root, 10); root = Insert(root, 10); root = Insert(root, 25); root = Insert(root, 8); root = Insert(root, 12); int number; cout \u0026lt;\u0026lt; \u0026#34;Enter number be searched\\n\u0026#34;; cin \u0026gt;\u0026gt; number; if (Search(root, number))cout \u0026lt;\u0026lt; \u0026#34;Found\\n\u0026#34;; else cout \u0026lt;\u0026lt; \u0026#34;Not Found\\n\u0026#34;; } ç”¨äºŒå‰æœç´¢æ ‘æŸ¥æ‰¾æœ€å¤§æœ€å°å€¼ æˆ‘ä»¬å‘ç°ï¼Œä¸€ç›´å‘å·¦èŠ‚ç‚¹èµ°ä¼šæ‰¾åˆ°æœ€å°å€¼ï¼Œè€Œä¸€ç›´å‘å³èŠ‚ç‚¹èµ°ä¼šæ‰¾åˆ°æœ€å¤§å€¼ã€‚\nä»£ç å¦‚ä¸‹ï¼ˆæœ€å°å€¼æ˜¯è¿­ä»£å®ç°ï¼Œæœ€å¤§å€¼æ˜¯é€’å½’å®ç°ï¼‰ #include\u0026lt;iostream\u0026gt; using namespace std; struct BstNode { int data; BstNode* left; BstNode* right; }; int FindMin(BstNode* root) { if (root == NULL) { printf(\u0026#34;Error:Tree is empty\\n\u0026#34;); return -1; } while (root-\u0026gt;left != NULL) { root = root-\u0026gt;left; } return root-\u0026gt;data; } int FindMaxRecursion(BstNode* root) { if (root == NULL) { printf(\u0026#34;Error\\n\u0026#34;); return -1; } else if (root-\u0026gt;right == NULL) { return root-\u0026gt;data; } return FindMaxRecursion(root-\u0026gt;right); } BstNode* GetNewNode(int data) { BstNode* NewNode = new BstNode(); NewNode-\u0026gt;data = data; NewNode-\u0026gt;left = NewNode-\u0026gt;right = NULL; return NewNode; } BstNode* Insert(BstNode* root, int data) { if (root == NULL) { root = GetNewNode(data); } else if (data \u0026lt;= root-\u0026gt;data) { root-\u0026gt;left = Insert(root-\u0026gt;left, data); } else { root-\u0026gt;right = Insert(root-\u0026gt;right, data); } return root; } int main() { BstNode* root = NULL; root = Insert(root, 10); root = Insert(root, 15); root = Insert(root, 5); root = Insert(root, 25); root = Insert(root, 20); printf(\u0026#34;The max is %d\\n\u0026#34;, FindMaxRecursion(root)); printf(\u0026#34;The min is %d\\n\u0026#34;, FindMin(root)); return 0; } ","permalink":"https://m1yan.github.io/posts/2023113-%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84c++%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0/","summary":"\u003ch1 id=\"æ ‘çš„ä»‹ç»\"\u003eæ ‘çš„ä»‹ç»\u003c/h1\u003e\n\u003cp\u003eæ ‘(Tree)ä½œä¸ºä¸€ç§æ•°æ®ç»“æ„ï¼Œå…·æœ‰ä¸€ç§é€’å½’æ€§ã€‚ä¸€ä¸ªæ ‘å¯ä»¥çœ‹ä½œæ˜¯ç”±æ ¹èŠ‚ç‚¹(root)ä»¥åŠè‹¥å¹²å­æ ‘æ„æˆï¼Œè€Œå­æ ‘åˆå¯ä»¥ç»§ç»­å‘ä¸‹åˆ†æˆæ ¹å’Œå­æ ‘ï¼Œå› æ­¤æ ‘å…·æœ‰é€’å½’æ€§ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eäºŒå‰æ ‘(binary tree)\u003c/code\u003eæ˜¯æ ‘ä¸­çš„ä¸€ç§ï¼Œå®ƒæ»¡è¶³æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è¦ä¹ˆ2ä¸ªè¦ä¹ˆ0ä¸ªå­èŠ‚ç‚¹çš„ç‰¹æ€§ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eäºŒå‰æœç´¢æ ‘(binary search tree)\u003c/code\u003eæ»¡è¶³å·¦ä¾§å­æ ‘ä¸­å‚¨å­˜çš„å€¼éƒ½å°äºç­‰äºrootï¼Œè€Œå³ä¾§å­æ ‘ä¸Šçš„å€¼éƒ½å¤§äºrootï¼Œå¹¶ä¸”é€’å½’æ»¡è¶³ã€‚\u003c/p\u003e","title":"äºŒå‰æœç´¢æ ‘çš„C++é€’å½’å®ç°"},{"content":"Introduction of Queue é˜Ÿåˆ—ä½œä¸ºä¸€ç§æŠ½è±¡æ•°æ®ç»“æ„ï¼Œéµå¾ªFirst-In-First-Out(FIFO)åŸåˆ™ã€‚\nå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š A list or collection with the restriction that insertion can be performed at one end (rear) and deletion can be performed at other end (front).\né˜Ÿåˆ—çš„æ“ä½œæœ‰ä»¥ä¸‹å‡ ç§ï¼š Enqueue(x) å…¥é˜Ÿåˆ— Dequeue( ) å‡ºé˜Ÿåˆ—ï¼ˆå¹¶è¿”å›åˆ é™¤é˜Ÿåˆ—çš„å€¼ï¼‰ front( ) and rear( ) IsEmpty( ) ä»¥ä¸Šæ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(1).\né˜Ÿåˆ—çš„å®ç° ç”¨æ•°ç»„å®ç° æˆ‘ä»¬åˆ†åˆ«å®šä¹‰ä¸¤ä¸ªå˜é‡frontå’Œrearæ¥å‚¨å­˜é˜Ÿé¦–å’Œé˜Ÿå°¾ï¼Œé˜Ÿåˆ—ä¸ºç©ºæ—¶ä»¤front = -1 rear = -1ã€‚\nä½†æ˜¯æˆ‘ä»¬å‘ç°éšç€ä¸æ–­åœ°Enqueueå’ŒDequeueï¼Œé˜Ÿåˆ—é€æ¸åç§»ï¼Œå‰é¢æ•°ç»„ç©ºé—´æ— æ³•é‡å¤åˆ©ç”¨ã€‚äºæ˜¯æˆ‘ä»¬é‡‡ç”¨å¾ªç¯æ•°ç»„ï¼Œå¾ªç¯æ•°ç»„å¯ä»¥æƒ³è±¡æˆæ˜¯æ•°ç»„é¦–å°¾ç›¸è¿ï¼Œå› æ­¤æˆ‘ä»¬è¿™æ ·è¡¨ç¤ºå®ƒçš„ä½ç½®ï¼š\ncurrent position: i\nnext position: (i+1)%N\nprevious position: (i+N-1)%N (Nè¡¨ç¤ºå¼€è¾Ÿæ•°ç»„çš„é•¿åº¦)\nä»£ç å®ç° IsEmpty( ) bool IsEmpty(){ if(front == -1 \u0026amp;\u0026amp; rear == -1) return true; else return false; } Enqueue( x ) void Enqueue(int x){ if((rear+1)%N == front)//rearå‘åä¸€æ ¼ä¸fronté‡åˆï¼Œè¯´æ˜å¾ªç¯æ•°ç»„å·²æ»¡ return; else if(IsEmpty()){ front = 0; rear = 0; A[rear] = x; } else{ rear = (rear + 1) % N; A[rear] = x; } } Dequeue( ) void Dequeue(){ if(IsEmpty()) return; else if(front == rear){ front = -1; rear = -1; } else{ front = (front + 1) % N; } } front( )å’Œrear( ) int front(){ return A[front]; } int rear(){ return A[rear]; } ç”¨é“¾è¡¨å®ç° Enqueueå’ŒDequeueæ“ä½œå¿…ç„¶ä¸€ä¸ªåœ¨é“¾è¡¨å¤´ä¸€ä¸ªåœ¨é“¾è¡¨å°¾ï¼Œä¸ºäº†ä¿è¯ä¸¤ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼Œè¦è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆfrontå’Œrearã€‚\nä»£ç å®ç° struct Node{ int data; struct Node* next; } struct Node* front = NULL; struct Node* front = NULL; void Enqueue(int x){ struct Node* temp = (struct Node*)malloc(sizeof(struct Node)); temp-\u0026gt;data = x; temp-\u0026gt;next = NULL; if(front == NULL \u0026amp;\u0026amp; rear == NULL){ front = temp; rear = temp; return; } rear-\u0026gt;next = temp; rear = temp; } void Dequeue(){ struct Node* temp = front; if(front = NULL) return; if(front == rear){ front = NULL; rear = NULL; } else{ front = front-\u0026gt;next; } free(temp); } ","permalink":"https://m1yan.github.io/posts/2023111-%E9%98%9F%E5%88%97queue%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0/","summary":"\u003ch1 id=\"introduction-of-queue\"\u003eIntroduction of Queue\u003c/h1\u003e\n\u003cp\u003eé˜Ÿåˆ—ä½œä¸ºä¸€ç§æŠ½è±¡æ•°æ®ç»“æ„ï¼Œéµå¾ª\u003ccode\u003eFirst-In-First-Out(FIFO)\u003c/code\u003eåŸåˆ™ã€‚\u003c/p\u003e","title":"é˜Ÿåˆ—(Queue)çš„æ•°ç»„å’Œé“¾è¡¨å®ç°"},{"content":"å‰ç¼€ã€ä¸­ç¼€ä¸åç¼€è¡¨è¾¾å¼ è®¡ç®—æœºä¸­ä¸€èˆ¬ä½¿ç”¨ä¸‰ç§è¡¨è¾¾å¼ï¼Œåˆ†åˆ«æ˜¯ä¸­ç¼€è¡¨è¾¾å¼(Infix)ã€å‰ç¼€è¡¨è¾¾å¼(Prefix)ã€åç¼€è¡¨è¾¾å¼(Postfix)ã€‚\nä¸‹è¡¨åˆ—å‡ºäº†å®ƒä»¬çš„åŸºæœ¬è¡¨ç¤ºå½¢å¼ï¼š ç±»å‹ Infix Prefix Postfix å½¢å¼ \u0026lt;operand\u0026gt;\u0026lt;operator\u0026gt;\u0026lt;operand\u0026gt; \u0026lt;operator\u0026gt;\u0026lt;operand\u0026gt;\u0026lt;operand\u0026gt; \u0026lt;operand\u0026gt;\u0026lt;operand\u0026gt;\u0026lt;operator\u0026gt; ä¾‹å­ a+b*c +a*bc abc*+ åç¼€è¡¨è¾¾å¼çš„è®¡ç®—æ–¹æ³• ä¸ºä»€ä¹ˆè¦å°†è¡¨æ„æ¸…æ™°çš„ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢æˆå½¢å¼æ¯”è¾ƒç‰¹æ®Šçš„åç¼€è¡¨è¾¾å¼å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºä¸­ç¼€è¡¨è¾¾å¼çš„è¿ç®—éœ€è¦äººä¸ºåœ°éµå¾ªä¸€äº›è¿ç®—æ³•åˆ™ï¼Œè€Œåç¼€è¡¨è¾¾å¼åªéœ€è¦éµå¾ªä¸€ä¸ªå›ºå®šçš„è¿ç®—æ³•åˆ™å³å¯å®Œæˆè¿ç®—ã€‚\nåç¼€è¡¨è¾¾å¼çš„è®¡ç®—æ–¹æ³•ä¸ºï¼š\nä»å·¦åˆ°å³å¯¹åç¼€è¡¨è¾¾å¼è¿›è¡Œæ‰«æï¼Œå½“é‡åˆ°è¿ç®—ç¬¦æ—¶ï¼Œå°†è¿ç®—ç¬¦ä¸å®ƒå‰é¢ä¸¤ä¸ªæ•°å­—ç»„åˆæˆä¸€ä¸ªç®—å¼è¿›è¡Œè®¡ç®—ï¼Œç”¨ç»“æœå–ä»£ä¸¤ä¸ªæ•°å­—ä»¥åŠè¿ç®—ç¬¦çš„ä½ç½®ï¼Œç»§ç»­å‘åæ‰«æï¼Œç›´åˆ°è¡¨è¾¾å¼å˜æˆä¸€ä¸ªå€¼ï¼Œè¯¥å€¼å³ä¸ºè¡¨è¾¾å¼çš„å€¼ã€‚\næˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸æ ˆçš„å·¥ä½œæ¨¡å¼éå¸¸ç±»ä¼¼ï¼Œäºæ˜¯ï¼Œå¯ä»¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼š\nint EvaluatePostfix(int exp[]){ stack\u0026lt;int\u0026gt; S; for(int i = 0 ; i \u0026lt;= strlen(exp)-1 ; i++){ if(exp[i] is operand)//å¦‚æœæ˜¯æ“ä½œæ•°ï¼Œå°±å…¥æ ˆ S.push(exp[i]); else if(exp[i] is operator){//å¦‚æœæ˜¯æ“ä½œç¬¦ï¼Œå°†æ ˆæœ€ä¸Šé¢ä¸¤ä¸ªæ“ä½œæ•°popå¹¶ä¿å­˜åœ¨op1å’Œop2ä¸­ int op1 = S.top(); S.pop(); int op2 = S.top(); S.pop(); res = Perform(exp[i],op1,op2);//Performå‡½æ•°è¯»å–æ“ä½œç¬¦å’Œä¸¤ä¸ªæ“ä½œæ•°å¹¶è¿ç®—ï¼Œè¿”å›å¾—æ•° S.push(res);//å°†å¾—æ•°å…¥æ ˆ } } return S.top();//æœ€åç•™åœ¨æ ˆä¸­çš„æ•°å­—å³ä¸ºè¡¨è¾¾å¼çš„å¾—æ•° } å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼ é‚£ä¹ˆå¦‚ä½•å°†Infixè½¬æ¢ä¸ºPostfixï¼Œä»è€Œå¯ä»¥è¢«ç¨‹åºè®¡ç®—å‘¢ï¼Ÿ\nå¯¹æ¯”ä¸¤ç§è¡¨è¾¾å¼\nInfix: A + B * C\nPostfix:A B C * +\næˆ‘ä»¬å‘ç°æ“ä½œæ•°ä¹‹é—´çš„ç›¸å¯¹ä½ç½®å¹¶æ— æ”¹å˜ï¼Œåªæ˜¯æ“ä½œç¬¦çš„ä½ç½®å‘ç”Ÿå˜åŒ–ã€‚ä¸‹é¢æä¾›ä¸€ä¸ªè½¬æ¢çš„æ–¹æ³•ï¼Œä¾ç„¶ä½¿ç”¨æ ˆæ¥å®ç°ã€‚\n1.\nInfix A + B * C - D * E Postfix A Stack 2.\nInfix A + B * C - D * E Postfix AB Stack + ç°åœ¨æˆ‘ä»¬é‡åˆ°äº†ç¬¬äºŒä¸ªç¬¦å·ï¼Œå¦‚æœæ­¤æ—¶æ ˆé¡¶ç¬¦å·çš„è¿ç®—çº§åˆ«å¤§äºç­‰äºè¯¥ç¬¦å·ï¼Œé‚£ä¹ˆå°±å°†æ ˆé¡¶çš„ç¬¦å·å¼¹å‡ºå¹¶ä¸”åŠ å…¥Postfixï¼Œç›´åˆ°ä¸ç¬¦åˆè¯¥æ¡ä»¶æˆ–è€…æ ˆä¸ºç©ºæ—¶ï¼Œå°†è¯¥ç¬¦å·ï¼ˆä¹Ÿå°±æ˜¯éå†åˆ°çš„ç¬¦å·ï¼‰å…¥æ ˆã€‚ Infix A + B * C - D * E Postfix AB Stack + * ç›´åˆ°éå†ç»“æŸï¼Œå°†æ ˆä¸­å‰©ä½™ç¬¦å·ä¾æ¬¡å…¨éƒ¨å¼¹å‡ºå¹¶åŠ å…¥Postfixã€‚ Infix A + B * C - D * E Postfix A B C * + D E * - Stack ä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰è€ƒè™‘Infixå¸¦æ‹¬å·çš„æƒ…å†µã€‚å¦‚æœè¡¨è¾¾å¼å¸¦æ‹¬å·çš„è¯ï¼Œè§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š\né‡åˆ°å·¦æ‹¬å·è®©å·¦æ‹¬å·å…¥æ ˆï¼Œå¦‚æœæ ˆé¡¶æ˜¯å·¦æ‹¬å·ï¼Œé‡åˆ°æ“ä½œç¬¦ç›´æ¥å…¥æ ˆ\nç›´åˆ°é‡åˆ°å³æ‹¬å·ï¼Œå°†æ ˆé¡¶çš„å…ƒç´ å¼¹å‡ºå¹¶åŠ å…¥Postfixç›´åˆ°é‡åˆ°å¯¹åº”çš„å·¦æ‹¬å·æ—¶åœæ­¢\nç»¼åˆä»¥ä¸Šæ–¹æ³•å¯ä»¥å†™å‡ºå¯¹åº”ä»£ç \nvoid InfixtoPostfix(char exp[],char res[]){ stack\u0026lt;char\u0026gt; S; int j=0; for(int i=0;i\u0026lt;=strlen(exp)-1;i++){ if(exp[i] is operand) res[j++] = exp[i]; else if(exp[i] is operator){ while(!S.empty()\u0026amp;\u0026amp;HasHigherPrec(S.top,exp[i])\u0026amp;\u0026amp;!IsOpeningParentheses(S.top())){//HasHigherPrecå‡½æ•°å³æ ˆé¡¶ç¬¦å·ä¼˜å…ˆçº§å¤§äºç­‰äºç¬¬iä¸ªç¬¦å·æ—¶è¿”å›trueï¼Œå¦åˆ™è¿”å›false //IsOpeningParentheseså‡½æ•°åŠŸèƒ½æ˜¯æ£€æŸ¥æ ˆé¡¶æ˜¯å¦æ˜¯å·¦æ‹¬å·ï¼Œæ˜¯è¿”å›trueï¼Œå¦è¿”å›false res[j++] = S.top(); S.pop(); } S.push(exp[i]); } else if(exp[i] == \u0026#39;(\u0026#39;) S.push(exp[i]); else if(exp[i] == \u0026#39;)\u0026#39;){ while(!S.empty()\u0026amp;\u0026amp;!IsOpeningParentheses(S.top())){ res[j++] = S.top(); S.pop(); } S.pop();//è¿™æ¬¡popæ˜¯ä¸ºäº†popå‡ºæ ˆä¸­çš„å·¦æ‹¬å· } } while(!S.empty()){ res[j++] = S.top(); S.pop(); } } ç¼–å†™10ä»¥å†…çš„æ··åˆè¿ç®—è®¡ç®—å™¨ ä»»åŠ¡ è¾“å…¥åŒ…æ‹¬10ä»¥å†…çš„æ•°å­—å’Œ+ã€-ã€*ã€(ã€)è¿ç®—ç¬¦çš„åˆæ³•è¡¨è¾¾å¼ï¼Œè¾“å‡ºå®ƒçš„Infixã€Postfixä»¥åŠè¿ç®—ç»“æœã€‚\nä»£ç  #include\u0026lt;iostream\u0026gt; #include\u0026lt;stack\u0026gt; using namespace std; bool Isoperator(char c){ if(c == \u0026#39;+\u0026#39;||c == \u0026#39;-\u0026#39;||c == \u0026#39;*\u0026#39;) return true; else return false; } bool HasHigherPrec(char a,char b){ if(b == \u0026#39;+\u0026#39;||b == \u0026#39;-\u0026#39;) return true; else{ if(a == \u0026#39;*\u0026#39;) return true; else return false; } } bool IsopeningPar(char c){ if(c == \u0026#39;(\u0026#39;) return true; else return false; } void InfixtoPostfix(char exp[],char res[]){ int j=0; stack\u0026lt;char\u0026gt; S; for(int i = 0; i \u0026lt;= strlen(exp)-1 ;i++){ if(exp[i]\u0026gt;=48\u0026amp;\u0026amp;exp[i]\u0026lt;=57){ res[j++] = exp[i]; } else if(Isoperator(exp[i])){ while(!S.empty()\u0026amp;\u0026amp;HasHigherPrec(S.top(),exp[i])\u0026amp;\u0026amp;!IsopeningPar(S.top())){ res[j++] = S.top(); S.pop(); } S.push(exp[i]); } else if(exp[i]==\u0026#39;(\u0026#39;) S.push(exp[i]); else if(exp[i]==\u0026#39;)\u0026#39;){ while(!S.empty()\u0026amp;\u0026amp;!IsopeningPar(S.top())){ res[j++] = S.top(); S.pop(); } S.pop(); } } while(!S.empty()){ res[j++] = S.top(); S.pop(); } } int Perform(char c,int a,int b){ if(c == \u0026#39;+\u0026#39;) return b+a; if(c == \u0026#39;-\u0026#39;) return b-a; if(c == \u0026#39;*\u0026#39;) return b*a; }\tint EvaluatePostfix(char res[]){ stack\u0026lt;int\u0026gt; A; int op1,op2,op; for(int i=0;i\u0026lt;=strlen(res)-1;i++){ if(!Isoperator(res[i])) A.push((int)(res[i]-\u0026#39;0\u0026#39;)); else if(Isoperator(res[i])){ op1 = A.top(); A.pop(); op2 = A.top(); A.pop(); op = Perform(res[i],op1,op2); A.push(op); } } return A.top(); } int main(){ char exp[100]; char res[100]; gets(exp); printf(\u0026#34;Infix: %s\\n\u0026#34;,exp); InfixtoPostfix(exp,res); printf(\u0026#34;Postfix: %s\\n\u0026#34;,res); printf(\u0026#34;The result is %d\u0026#34;,EvaluatePostfix(res)); return 0; } è¾“å…¥/å‡ºç»“æœ ((1+2)*3-4)*5+(6-7) Infix: ((1+2)*3-4)*5+(6-7) Postfix: 12+3*4-5*67-+ The result is 24 ","permalink":"https://m1yan.github.io/posts/2023110-%E4%BD%BF%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0%E4%B8%AD%E7%BC%80%E5%88%B0%E5%90%8E%E7%BC%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%BD%AC%E6%8D%A2/","summary":"\u003ch1 id=\"å‰ç¼€ä¸­ç¼€ä¸åç¼€è¡¨è¾¾å¼\"\u003eå‰ç¼€ã€ä¸­ç¼€ä¸åç¼€è¡¨è¾¾å¼\u003c/h1\u003e\n\u003cp\u003eè®¡ç®—æœºä¸­ä¸€èˆ¬ä½¿ç”¨ä¸‰ç§è¡¨è¾¾å¼ï¼Œåˆ†åˆ«æ˜¯\u003ccode\u003eä¸­ç¼€è¡¨è¾¾å¼(Infix)\u003c/code\u003eã€\u003ccode\u003eå‰ç¼€è¡¨è¾¾å¼(Prefix)\u003c/code\u003eã€\u003ccode\u003eåç¼€è¡¨è¾¾å¼(Postfix)\u003c/code\u003eã€‚\u003c/p\u003e","title":"ä½¿ç”¨æ ˆå®ç°ä¸­ç¼€åˆ°åç¼€è¡¨è¾¾å¼çš„è½¬æ¢"},{"content":"é¢˜ç›®èƒŒæ™¯ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨å¤šç§ç±»å‹çš„æ‹¬å·ï¼Œ( )åœ†æ‹¬å·ã€[ ]æ–¹æ‹¬å·ã€{ }èŠ±æ‹¬å·ï¼Œå½“æ‹¬å·ä¸åŒ¹é…æ—¶ï¼Œç¼–è¯‘æ—¶ä¼šå‘ç”Ÿé”™è¯¯ã€‚é‚£ä¹ˆç¼–è¯‘å™¨æ˜¯å¦‚ä½•æ£€éªŒæ‹¬å·åŒ¹é…æ€§çš„å‘¢ï¼Ÿ\né¢˜ç›®åˆ†æ ä¸‹é¢åˆ—ä¸¾äº†è‹¥å¹²å®ä¾‹å¸®åŠ©ç†è§£åŒ¹é…æ€§çš„åˆ¤æ–­æ ‡å‡†\nExpression Balancedï¼Ÿ Reason {(a+b)+[a-b]} Yes )( No å³æ‹¬å·å¿…é¡»åœ¨å·¦æ‹¬å·å³è¾¹ [ ( ] ) No åå‡ºç°çš„å·¦æ‹¬å·è¦å…ˆå®ŒæˆåŒ¹é…(Last Opened First Closed) [ ( ) ( ) ] Yes ä»»ä½•å³æ‹¬å·è¦å¯¹åº”å®ƒå·¦ä¾§è·å®ƒæœ€è¿‘çš„å·¦æ‹¬å· ä»£ç å®ç° ä»£ç  #include\u0026lt;iostream\u0026gt; #include\u0026lt;stack\u0026gt; using namespace std; stack\u0026lt;char\u0026gt; S;//å®šä¹‰ä¸€ä¸ªç”¨äºå­˜æ”¾æ‹¬å·çš„æ ˆ int match(char c){//è®¾è®¡ä¸€ä¸ªmatchå‡½æ•°ï¼Œå¦‚æœå³æ‹¬å·å’Œä½äºæ ˆé¡¶çš„å·¦æ‹¬å·ç›¸åŒ¹é…è¿”å›1ï¼Œå¦åˆ™è¿”å›0 if((S.top()==\u0026#39;(\u0026#39;\u0026amp;\u0026amp;c==\u0026#39;)\u0026#39;)||(S.top()==\u0026#39;[\u0026#39;\u0026amp;\u0026amp;c==\u0026#39;]\u0026#39;)||(S.top()==\u0026#39;{\u0026#39;\u0026amp;\u0026amp;c==\u0026#39;}\u0026#39;)) return 1; else return 0; } char a[20]; int main(){ gets(a); char exp;//è¯¥å˜é‡ç”¨äºå­˜æ”¾å½“å‰çš„å·¦æ‹¬å· int len = strlen(a); for(int i=0;i\u0026lt;len;i++){ exp = a[i]; if(exp==\u0026#39;(\u0026#39;||exp==\u0026#39;[\u0026#39;||exp==\u0026#39;{\u0026#39;)//å½“è¯†åˆ«åˆ°å·¦æ‹¬å·å³è¿›æ ˆ S.push(exp); else if(exp == \u0026#39;)\u0026#39;||exp == \u0026#39;]\u0026#39;||exp == \u0026#39;}\u0026#39;){//å¦‚æœè¯†åˆ«åˆ°å³æ‹¬å· if(S.empty()||match(exp)==0){//å¦‚æœæ ˆå†…æ˜¯ç©ºçš„ï¼ˆè¯´æ˜å³æ‹¬å·å‰æ²¡æœ‰å·¦æ‹¬å·ï¼‰ï¼›æˆ–è€…æ‹¬å·ä¸åŒ¹é… printf(\u0026#34;No\u0026#34;); return 0; } else//å¦‚æœåŒ¹é…ï¼Œåˆ™è®©åŒ¹é…å®Œæˆçš„å·¦æ‹¬å·å‡ºæ ˆ S.pop(); } } if(S.empty()){//å®Œæˆéå†åï¼Œè‹¥æ ˆä¸­å‰©ä½™æ‹¬å·ï¼Œè¯æ˜æ‹¬å·ä¸åŒ¹é…ï¼›è‹¥ç©ºæ ˆï¼Œè¯æ˜åŒ¹é… printf(\u0026#34;Yes\u0026#34;); return 0; } else{ printf(\u0026#34;No\u0026#34;); return 0; } } è¾“å…¥/å‡ºç»“æœ example 1: {(a+b)+[a-b]}\rYes example 2: )(\rNo example 3: [ ( ] )\rNo example 4: [ ( ) ( ) ]\rYes ","permalink":"https://m1yan.github.io/posts/202319-%E6%A0%88%E7%9A%84%E5%BA%94%E7%94%A8%E6%A3%80%E6%9F%A5%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D%E6%80%A7/","summary":"\u003ch1 id=\"é¢˜ç›®èƒŒæ™¯\"\u003eé¢˜ç›®èƒŒæ™¯\u003c/h1\u003e\n\u003cp\u003eæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨å¤šç§ç±»å‹çš„æ‹¬å·ï¼Œ\u003ccode\u003e( )åœ†æ‹¬å·\u003c/code\u003eã€\u003ccode\u003e[ ]æ–¹æ‹¬å·\u003c/code\u003eã€\u003ccode\u003e{ }èŠ±æ‹¬å·\u003c/code\u003eï¼Œå½“æ‹¬å·ä¸åŒ¹é…æ—¶ï¼Œç¼–è¯‘æ—¶ä¼šå‘ç”Ÿé”™è¯¯ã€‚é‚£ä¹ˆç¼–è¯‘å™¨æ˜¯å¦‚ä½•æ£€éªŒæ‹¬å·åŒ¹é…æ€§çš„å‘¢ï¼Ÿ\u003c/p\u003e","title":"æ ˆçš„åº”ç”¨ï¼šæ£€æŸ¥æ‹¬å·åŒ¹é…æ€§"},{"content":"Introduction of Stack æ ˆæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå±äºæŠ½è±¡æ•°æ®ç»“æ„(ADT)ï¼Œéµå¾ªLast-In-First-Out(LIFO)åŸåˆ™ã€‚\nåŸºæœ¬æ“ä½œï¼š 1ï¼‰Push(x)\u0026ndash;åœ¨æ ˆä¸­æ’å…¥x\n2ï¼‰Pop()\u0026ndash;ç§»é™¤æœ€è¿‘æ’å…¥çš„å…ƒç´ \n3ï¼‰Top()\u0026ndash;è¿”å›æ ˆé¡¶çš„å…ƒç´ \n4ï¼‰Empty()\u0026ndash;åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º\nä»¥ä¸Šå‡ ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(1)ã€‚\næ ˆçš„åº”ç”¨ï¼š \u0026ndash;Function calls/recursion\n\u0026ndash;Undo in an editor\n\u0026ndash;Balance Parentheses\nImplementation of Stack I. Array implementation int A[10]; int top = -1;//global void Push(int x){ top = top + 1; A[top] = x; } void Pop(){ top = top-1; } int Top(){ return A[top]; } bool IsEmpty(){ if(top ==-1) return true; else return false; } II. Linked list implementation å¦‚æœPushåœ¨é“¾è¡¨çš„æœ«å°¾ï¼Œé‚£ä¹ˆæ¯æ¬¡æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œä¸ç¬¦åˆæ ˆçš„O(1)operationã€‚æ‰€ä»¥æ¯æ¬¡Pushéƒ½å°†æ–°å…ƒç´ æ’å…¥é“¾è¡¨çš„å¤´éƒ¨ã€‚\nstruct Node{ int data; struct Node* link; } struct Node* top = NULL; void Push(int x){ struct Node* temp = (struct Node*)malloc(sizeof(struct Node)); temp-\u0026gt;data = x; temp-\u0026gt;link = top; top = temp; } void Pop(){ struct Node* temp; if(top == NULL) return; temp = top; top = top-\u0026gt;link; free(temp); } Using stack to reverse I. Reverse a string è°ƒç”¨C++ä¸­è‡ªå¸¦çš„stackåº“å‡½æ•°ï¼Œèƒ½å¤Ÿç›´æ¥å®šä¹‰ä¸€ä¸ªæ ˆï¼Œå¹¶ä¸”ç›´æ¥è°ƒç”¨ä»¥ä¸Šå‡ ç§æ“ä½œã€‚\nè°ƒç”¨è¯­æ³•ä¸ºï¼šå¤´æ–‡ä»¶\u0026ndash;\u0026lt;stack\u0026gt;,è¯­æ³• stack \u0026lt;å˜é‡æ•°æ®ç±»å‹\u0026gt; æ ˆåç§°ï¼›name.option()ä¸ºæ“ä½œ\nä»£ç  #include\u0026lt;iostream\u0026gt; #include\u0026lt;stack\u0026gt; using namespace std; void Reverse(char *C,int n){ stack\u0026lt;char\u0026gt; S; for(int i=0;i\u0026lt;n;i++){ S.push(C[i]); } for(int i=0;i\u0026lt;n;i++){ C[i] = S.top(); S.pop(); } } int main(){ char C[51]; printf(\u0026#34;Enter a string\\n\u0026#34;); gets(C); Reverse(C,strlen(C)); printf(\u0026#34;Output: %s\u0026#34;,C); return 0; } è¾“å…¥/å‡ºç»“æœ\nEnter a string hello! Output: !olleh II. Reverse linked list ä»£ç  #include\u0026lt;iostream\u0026gt; #include\u0026lt;stack\u0026gt; using namespace std; struct Node{ int data; struct Node* link; }; struct Node* head; void Reverse(){ stack\u0026lt;struct Node*\u0026gt; S; Node* temp = head; while(temp != NULL){ S.push(temp); temp = temp-\u0026gt;link; } temp = S.top(); head = temp; S.pop(); while(!S.empty()){ temp-\u0026gt;link = S.top(); S.pop(); temp = temp-\u0026gt;link; } temp-\u0026gt;link = NULL; } void InsertAtHead(int x){ struct Node* temp = (struct Node*)malloc(sizeof(struct Node)); temp-\u0026gt;data = x; temp-\u0026gt;link = head; head = temp; } void Print(){ struct Node* temp = head; while(temp-\u0026gt;link != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;link; } printf(\u0026#34;\\n\u0026#34;); } int main(){ head = NULL; InsertAtHead(5); InsertAtHead(4); InsertAtHead(3); InsertAtHead(2); InsertAtHead(1); printf(\u0026#34;Input: \u0026#34;); Print(); Reverse(); printf(\u0026#34;Output: \u0026#34;); Print(); return 0; } è¾“å‡ºç»“æœ Input: 1 2 3 4 5 Output: 5 4 3 2 1 ","permalink":"https://m1yan.github.io/posts/202318-%E7%94%A8%E6%A0%88%E5%8F%8D%E8%BD%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%96%E5%8F%8D%E8%BD%AC%E4%B8%80%E4%B8%AA%E9%93%BE%E8%A1%A8/","summary":"\u003ch1 id=\"introduction-of-stack\"\u003eIntroduction of Stack\u003c/h1\u003e\n\u003cp\u003eæ ˆæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå±äºæŠ½è±¡æ•°æ®ç»“æ„(ADT)ï¼Œéµå¾ªLast-In-First-Out(LIFO)åŸåˆ™ã€‚\u003c/p\u003e","title":"ç”¨æ ˆåè½¬ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–åè½¬ä¸€ä¸ªé“¾è¡¨"},{"content":"åŒå‘é“¾è¡¨ä»‹ç» åŒå‘é“¾è¡¨çš„ç»“æ„å¦‚ä¸‹ï¼š\nstruct Node{ int data; struct Node* prev; struct Node* next; }; å¯ä»¥çœ‹åˆ°åŒå‘é“¾è¡¨çš„èŠ‚ç‚¹æ˜¯ç”±ä¸¤ä¸ªç»“æ„ä½“æŒ‡é’ˆåŠç›¸å…³æ•°æ®æ„æˆçš„ï¼Œå› æ­¤å¯ä»¥æ›´æ–¹ä¾¿åœ°å¯¹é“¾è¡¨ä¸­çš„èŠ‚ç‚¹è¿›è¡Œè®¿é—®å’Œæ•°æ®çš„ä¿®æ”¹ã€‚\nåŒå‘é“¾è¡¨çš„å®ç° è¿›è¡Œå‡ ä¸ªåŸºæœ¬æ“ä½œï¼šå¤´éƒ¨æ’å…¥(InsertAtHead)ã€å°¾éƒ¨æ’å…¥(InsertAtTail)ã€æ‰“å°(Print)ã€åå‘æ‰“å°(ReversePrint)ã€‚\nå¤´éƒ¨æ’å…¥(InsertAtHead) æ’å…¥æ—¶è¦å…ˆåœ¨å †åŒºå¼€è¾Ÿä¸€å—åŠ¨æ€å†…å­˜ï¼Œä¸ºäº†é¿å…ä»£ç é‡å¤ï¼Œæˆ‘ä»¬è®¾è®¡ä¸€ä¸ªå‡½æ•°GetNewNode(int x)ï¼Œå¯ä»¥åœ¨å †åŒºæ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå­˜å‚¨æ•°æ®xï¼ŒåŒæ—¶è¿”å›å †åŒºå†…å­˜çš„åœ°å€ã€‚\nstruct Node* GetNewNode(int x){ struct Node* newNode = (struct Node*)malloc(sizeof(struct Node)); newNode-\u0026gt;data = x; newNode-\u0026gt;next = NULL; newNode-\u0026gt;prev = NULL; return newNode; } å†è¿›è¡Œå¤´éƒ¨æ’å…¥\nvoid InsertAtHead(int x){ struct Node* newNode = GetNewNode(x); if(head == NULL){ head = newNode; return; } head-\u0026gt;prev = newNode; newNode-\u0026gt;next = head; head = newNode; } å°¾éƒ¨æ’å…¥(InsertAtTail) åªéœ€è¦å…ˆéå†åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†è¿›è¡Œæ’å…¥æ“ä½œå³å¯ã€‚\nvoid InsertAtTail(int x){ struct Node* newNode = GetNewNode(x); if(head == NULL){ head = newNode; return; } struct Node* temp = head; while(temp-\u0026gt;next != NULL){ temp = temp-\u0026gt;next; } temp-\u0026gt;next = newNode; newNode-\u0026gt;prev = temp; } æ‰“å°(Print) void Print(){ struct Node* temp = head; printf(\u0026#34;Forward: \u0026#34;); while(temp != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;next; } printf(\u0026#34;\\n\u0026#34;); } åå‘æ‰“å°(ReversePrint) åŒæ ·éœ€è¦å…ˆéå†åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚\nvoid ReversePrint(){ struct Node* temp = head; while(temp-\u0026gt;next != NULL){ temp = temp-\u0026gt;next; } printf(\u0026#34;Reverse: \u0026#34;); while(temp != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;prev; } printf(\u0026#34;\\n\u0026#34;); } å®Œæ•´å®ç°å¦‚ä¸‹ï¼š #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; struct Node{ int data; struct Node* prev; struct Node* next; }; struct Node* head = NULL; struct Node* GetNewNode(int x){ struct Node* newNode = (struct Node*)malloc(sizeof(struct Node)); newNode-\u0026gt;data = x; newNode-\u0026gt;next = NULL; newNode-\u0026gt;prev = NULL; return newNode; } void InsertAtHead(int x){ struct Node* newNode = GetNewNode(x); if(head == NULL){ head = newNode; return; } head-\u0026gt;prev = newNode; newNode-\u0026gt;next = head; head = newNode; } void InsertAtTail(int x){ struct Node* newNode = GetNewNode(x); if(head == NULL){ head = newNode; return; } struct Node* temp = head; while(temp-\u0026gt;next != NULL){ temp = temp-\u0026gt;next; } temp-\u0026gt;next = newNode; newNode-\u0026gt;prev = temp; } void Print(){ struct Node* temp = head; printf(\u0026#34;Forward: \u0026#34;); while(temp != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;next; } printf(\u0026#34;\\n\u0026#34;); } void ReversePrint(){ struct Node* temp = head; while(temp-\u0026gt;next != NULL){ temp = temp-\u0026gt;next; } printf(\u0026#34;Reverse: \u0026#34;); while(temp != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;prev; } printf(\u0026#34;\\n\u0026#34;); } int main(){ InsertAtTail(1);Print(); InsertAtHead(3);Print(); InsertAtHead(2);Print(); InsertAtHead(4);Print(); InsertAtTail(5);Print(); ReversePrint(); return 0; } è¾“å‡ºç»“æœï¼š\nForward: 1 Forward: 3 1 Forward: 2 3 1 Forward: 4 2 3 1 Forward: 4 2 3 1 5 Reverse: 5 1 3 2 4 ","permalink":"https://m1yan.github.io/posts/202315-%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8doubly-linked-list/","summary":"\u003ch1 id=\"åŒå‘é“¾è¡¨ä»‹ç»\"\u003eåŒå‘é“¾è¡¨ä»‹ç»\u003c/h1\u003e\n\u003cp\u003eåŒå‘é“¾è¡¨çš„ç»“æ„å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eprev\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eå¯ä»¥çœ‹åˆ°åŒå‘é“¾è¡¨çš„èŠ‚ç‚¹æ˜¯ç”±ä¸¤ä¸ªç»“æ„ä½“æŒ‡é’ˆåŠç›¸å…³æ•°æ®æ„æˆçš„ï¼Œå› æ­¤å¯ä»¥æ›´æ–¹ä¾¿åœ°å¯¹é“¾è¡¨ä¸­çš„èŠ‚ç‚¹è¿›è¡Œè®¿é—®å’Œæ•°æ®çš„ä¿®æ”¹ã€‚\u003c/p\u003e","title":"åŒå‘é“¾è¡¨(Doubly Linked List)"},{"content":"\nä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåè½¬ä¸€ä¸ªé“¾è¡¨åªéœ€è¦æ”¹å˜Node.linkã€‚\nI. è¿­ä»£å®ç° æ€è·¯ è®¾ç½®ä¸‰ä¸ªç»“æ„ä½“æŒ‡é’ˆPrevã€currentã€nextï¼Œåˆ†åˆ«ä¿å­˜ä¹‹å‰çš„èŠ‚ç‚¹çš„åœ°å€ã€ç›®å‰çš„èŠ‚ç‚¹åœ°å€ã€ä¹‹åçš„èŠ‚ç‚¹åœ°å€ã€‚\nä»£ç å®ç° void Reverse(){ struct Node *current, *prev, *next; current = head; prev = NULL; while(current != NULL){ next = current-\u0026gt;next;//next ç”¨æ¥å­˜å‚¨å½“å‰Nodeçš„nextï¼Œå½“Node.nextè¢«prevè¦†ç›–åï¼Œnextå°†å€¼èµ‹ ç»™currentä»è€Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ã€‚ current-\u0026gt;next = prev; prev = current; current = next; } head = prev; } å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š\n#include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; struct Node{ int data; struct Node* next; }; struct Node* head; void Insert(int n){ struct Node* temp = (struct Node*)malloc(sizeof(struct Node)); temp-\u0026gt;data = n; temp-\u0026gt;next = NULL; struct Node* temp1 = head; if(head == NULL){ head = temp; return; } while(temp1-\u0026gt;next != NULL){ temp1 = temp1-\u0026gt;next; } temp1-\u0026gt;next = temp; } void Print(){ struct Node* temp = head; while(temp != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;next; } printf(\u0026#34;\\n\u0026#34;); } void Reverse(){ struct Node *current, *prev, *next; current = head; prev = NULL; while(current != NULL){ next = current-\u0026gt;next;//next ç”¨æ¥å­˜å‚¨å½“å‰Nodeçš„nextï¼Œå½“Node.nextè¢«prevè¦†ç›–åï¼Œnextå°†å€¼èµ‹ ç»™currentä»è€Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ã€‚ current-\u0026gt;next = prev; prev = current; current = next; } head = prev; } int main(){ head = NULL; Insert(2); Insert(4); Insert(6); Insert(5); Print(); Reverse(); Print(); return 0; } è¾“å‡ºç»“æœï¼š\n2 4 6 5 5 6 4 2 II. é€’å½’å®ç° 1ï¼‰é€’å½’å®ç°è¾“å‡ºçš„åè½¬ æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªé€’å½’å½¢å¼çš„Printå‡½æ•°ï¼Œå› ä¸ºé€’å½’éœ€è¦ç»™å‡½æ•°ä¼ å‚ï¼Œå› æ­¤å‡½æ•°å½¢å¼ä¸ºPrint(struct Node* p)ã€‚\nvoid Print(struct Node* p){//påˆå§‹ä¸ºå¤´èŠ‚ç‚¹çš„åœ°å€ if(p == NULL){ printf(\u0026#34;\\n\u0026#34;); return; } printf(\u0026#34;%d \u0026#34;,p-\u0026gt;data); Print(p-\u0026gt;next); } æ­¤æ—¶æ€»æ˜¯å…ˆè¾“å‡ºå†è°ƒç”¨å‡½æ•°è‡ªèº«ï¼Œå› æ­¤æ˜¯æ­£å‘è¾“å‡ºã€‚å¦‚æœæˆ‘ä»¬å°†printfä¸Printä¸¤è¡Œä»£ç äº¤æ¢ä½ç½®ï¼Œå³\nvoid Print(struct Node* p){//påˆå§‹ä¸ºå¤´èŠ‚ç‚¹çš„åœ°å€ if(p == NULL) return; Print(p-\u0026gt;next); printf(\u0026#34;%d \u0026#34;,p-\u0026gt;data); } é‚£ä¹ˆå‡½æ•°ä¼šåœ¨è¾“å‡ºä¹‹å‰å…ˆè¿›è¡Œé‡å¤è°ƒç”¨ï¼Œè¿›è¡Œåˆ°é€’å½’ç»“æŸæ¡ä»¶åï¼Œä¾æ¬¡æ‰§è¡Œè¾“å‡ºã€‚\nå®Œæ•´ä»£ç å¦‚ä¸‹ #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; struct Node{ int data; struct Node* next; }; struct Node* head; void Insert(int n){ struct Node* temp = (struct Node*)malloc(sizeof(struct Node)); temp-\u0026gt;data = n; temp-\u0026gt;next = NULL; struct Node* temp1 = head; if(head == NULL){ head = temp; return; } while(temp1-\u0026gt;next != NULL){ temp1 = temp1-\u0026gt;next; } temp1-\u0026gt;next = temp; } void Print(){ struct Node* temp = head; while(temp != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;next; } printf(\u0026#34;\\n\u0026#34;); } void ReversePrint(struct Node* p){//påˆå§‹ä¸ºå¤´èŠ‚ç‚¹çš„åœ°å€ if(p == NULL) return; ReversePrint(p-\u0026gt;next); printf(\u0026#34;%d \u0026#34;,p-\u0026gt;data); } int main(){ head = NULL; Insert(2); Insert(4); Insert(6); Insert(5);\tPrint(); ReversePrint(head); return 0; } è¾“å‡ºç»“æœ 2 4 6 5 5 6 4 2 2ï¼‰é€’å½’å®ç°é“¾è¡¨åè½¬ åè½¬è¾“å‡ºå¹¶æ²¡æœ‰å®ç°é“¾è¡¨çš„åè½¬ï¼Œå› ä¸ºheadã€nextçš„å€¼éƒ½æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶å¯ä»¥é‡‡ç”¨é€’å½’çš„æ–¹å¼å®ç°é“¾è¡¨çš„åè½¬ã€‚\nè®¾è®¡ä¸€ä¸ªReverseå‡½æ•°ï¼Œä½¿å¾—å…¶èƒ½å¤Ÿä»¥é€’å½’æ–¹å¼å®ç°é“¾è¡¨åè½¬ã€‚ void Reverse(struct Node* p){//påˆå§‹ä¸ºå¤´èŠ‚ç‚¹çš„åœ°å€ if(p-\u0026gt;next == NULL){ head = p; return; } Reverse(p-\u0026gt;next); struct Node* q = p-\u0026gt;next; q-\u0026gt;next = p;//ä¹Ÿå¯ä»¥ç®€æ´åœ°è¡¨ç¤ºä¸ºp-\u0026gt;next-\u0026gt;next = p p-\u0026gt;next = NULL; } å®Œæ•´ä»£ç å¦‚ä¸‹ #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; struct Node{ int data; struct Node* next; }; struct Node* head; void Insert(int n){ struct Node* temp = (struct Node*)malloc(sizeof(struct Node)); temp-\u0026gt;data = n; temp-\u0026gt;next = NULL; struct Node* temp1 = head; if(head == NULL){ head = temp; return; } while(temp1-\u0026gt;next != NULL){ temp1 = temp1-\u0026gt;next; } temp1-\u0026gt;next = temp; } void Print(){ struct Node* temp = head; while(temp != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;next; } printf(\u0026#34;\\n\u0026#34;); } void Reverse(struct Node* p){//påˆå§‹ä¸ºå¤´èŠ‚ç‚¹çš„åœ°å€ if(p-\u0026gt;next == NULL){ head = p; return; } Reverse(p-\u0026gt;next); struct Node* q = p-\u0026gt;next; q-\u0026gt;next = p; p-\u0026gt;next = NULL; } int main(){ head = NULL; Insert(2); Insert(4); Insert(6); Insert(5);\tPrint(); Reverse(head); Print(); return 0; } ","permalink":"https://m1yan.github.io/posts/202213-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8%E8%BF%AD%E4%BB%A3%E5%8F%8A%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0/","summary":"\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://pic3.zhimg.com/80/v2-c610a28038b0cfba44431bfe4ac48e24_r.jpg\"\u003e\u003c/p\u003e\n\u003cp\u003eä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåè½¬ä¸€ä¸ªé“¾è¡¨åªéœ€è¦æ”¹å˜Node.linkã€‚\u003c/p\u003e\n\u003ch2 id=\"i-è¿­ä»£å®ç°\"\u003eI. è¿­ä»£å®ç°\u003c/h2\u003e\n\u003ch3 id=\"æ€è·¯\"\u003eæ€è·¯\u003c/h3\u003e\n\u003cp\u003eè®¾ç½®ä¸‰ä¸ªç»“æ„ä½“æŒ‡é’ˆPrevã€currentã€nextï¼Œåˆ†åˆ«ä¿å­˜ä¹‹å‰çš„èŠ‚ç‚¹çš„åœ°å€ã€ç›®å‰çš„èŠ‚ç‚¹åœ°å€ã€ä¹‹åçš„èŠ‚ç‚¹åœ°å€ã€‚\u003c/p\u003e","title":"åè½¬é“¾è¡¨ï¼ˆè¿­ä»£åŠé€’å½’å®ç°ï¼‰"},{"content":"é“¾è¡¨æ˜¯ä¸€ç§å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„åŸºæœ¬å•ä½æ˜¯nodeï¼Œç”±dataå’Œlinkä¸¤éƒ¨åˆ†ç»„æˆã€‚\nåˆ›å»ºä¸€ä¸ªé“¾è¡¨éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š 1.åˆ›å»ºèŠ‚ç‚¹çš„ç»“æ„ä½“ ä¸€ä¸ªç®€å•çš„ç»“æ„ä½“ï¼Œç”±æ•°æ®å’Œç»“æ„ä½“æŒ‡é’ˆæ„æˆï¼Œä»£ç å¦‚ä¸‹ï¼š\nstruct Node{ int data; struct Node* link; }; 2.åˆ›å»ºå˜é‡ä¿å­˜å¤´èŠ‚ç‚¹çš„åœ°å€ struct Node* head; head = NULL; 3.åœ¨å †åŒºä¸ºèŠ‚ç‚¹å¼€è¾Ÿä¸€ä¸ªåŠ¨æ€ç©ºé—´ struct Node* temp = (struct Node*)malloc(sizeof(struct Node)); 4.ä¸ºèŠ‚ç‚¹èµ‹å€¼ temp-\u0026gt;data = 2; temp-\u0026gt;link = NULL; 5.æ›´æ”¹å¤´èŠ‚ç‚¹çš„åœ°å€ head = temp; ä¸‹é¢å°è¯•éå†ä¸€ä¸ªé“¾è¡¨ï¼Œå¹¶é€ä¸ªæ•°è¾“å‡º struct Node* temp1 = head; while(temp -\u0026gt; link != NULL){ printf(\u0026#34;%d \u0026#34;,temp1-\u0026gt;data); temp1 = temp1-\u0026gt;link; } ","permalink":"https://m1yan.github.io/posts/202312-linked-list---implementation-in-c/","summary":"\u003cp\u003eé“¾è¡¨æ˜¯ä¸€ç§å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„åŸºæœ¬å•ä½æ˜¯nodeï¼Œç”±dataå’Œlinkä¸¤éƒ¨åˆ†ç»„æˆã€‚\u003c/p\u003e\n\u003ch2 id=\"åˆ›å»ºä¸€ä¸ªé“¾è¡¨éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤\"\u003eåˆ›å»ºä¸€ä¸ªé“¾è¡¨éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\u003c/h2\u003e\n\u003ch3 id=\"1åˆ›å»ºèŠ‚ç‚¹çš„ç»“æ„ä½“\"\u003e1.åˆ›å»ºèŠ‚ç‚¹çš„ç»“æ„ä½“\u003c/h3\u003e\n\u003cp\u003eä¸€ä¸ªç®€å•çš„ç»“æ„ä½“ï¼Œç”±æ•°æ®å’Œç»“æ„ä½“æŒ‡é’ˆæ„æˆï¼Œä»£ç å¦‚ä¸‹ï¼š\u003c/p\u003e","title":"Linked list - Implementation in C"},{"content":"\næ€è·¯ è®¾è®¡ä¸€ä¸ª Insert(int dataï¼Œint n) å‡½æ•°ï¼Œä½¿å¾—ä¸€ä¸ªå­˜æœ‰è¯¥æ•°æ®çš„èŠ‚ç‚¹èƒ½å¤Ÿæ’å…¥ç¬¬nä¸ªä½ç½®ã€‚\nä»£ç å®ç° è®¾è®¡ä¸€ä¸ª Insert å‡½æ•°ï¼Œä¸€ä¸ª Print å‡½æ•° ä»¥åŠ main å‡½æ•°ã€‚\n#include\u0026lt;stdio.h\u0026gt; #include\u0026lt;stdlib.h\u0026gt; struct Node{ int data; struct Node* next; }; struct Node* head;//å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡headï¼Œä½¿æ‰€æœ‰çš„å‡½æ•°éƒ½èƒ½å¤Ÿè°ƒç”¨ï¼Œæ— éœ€ä¼ å‚ã€‚ void Insert (int data,int n){ struct Node* temp1 = (struct Node*)malloc(sizeof(struct Node)); temp1-\u0026gt;data = data; temp1-\u0026gt;next = NULL; if(n==1){ temp1-\u0026gt;next = head; head = temp1; return; } struct Node* temp2 = head; for(int i=0;i\u0026lt;n-2;i++){ temp2 = temp2-\u0026gt;next;//å¾ªç¯åçš„temp2æ˜¯ç¬¬n-1ä¸ªNodeçš„åœ°å€ï¼Œä¹Ÿæ˜¯ç¬¬n-2ä¸ªNodeçš„nextå€¼ } temp1-\u0026gt;next = temp2-\u0026gt;next; temp2-\u0026gt;next = temp1;//ç¬¬n-1ä¸ªNodeçš„nextæ›´æ”¹ä¸ºæ’å…¥Nodeçš„åœ°å€ } void Print(){ struct Node* temp = head; while(temp != NULL){ printf(\u0026#34;%d \u0026#34;,temp-\u0026gt;data); temp = temp-\u0026gt;next; } printf(\u0026#34;\\n\u0026#34;); } int main(){ head = NULL; printf(\u0026#34;How many numbers?\\n\u0026#34;); int n,i,number,position; scanf(\u0026#34;%d\u0026#34;,\u0026amp;n); for(i=0;i\u0026lt;n;i++){ printf(\u0026#34;Enter the number and position\\n\u0026#34;); scanf(\u0026#34;%d%d\u0026#34;,\u0026amp;number,\u0026amp;position); Insert(number,position); Print(); } return 0; } ","permalink":"https://m1yan.github.io/posts/202312-%E5%9C%A8%E9%93%BE%E8%A1%A8%E7%9A%84%E4%BB%BB%E6%84%8F%E4%BD%8D%E7%BD%AE%E6%8F%92%E5%85%A5%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9/","summary":"\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://pic1.zhimg.com/80/v2-df124cb2a854c5f1b32272a12ddbb0e0_r.jpg\"\u003e\u003c/p\u003e\n\u003ch3 id=\"æ€è·¯\"\u003eæ€è·¯\u003c/h3\u003e\n\u003cp\u003eè®¾è®¡ä¸€ä¸ª Insert(int dataï¼Œint n) å‡½æ•°ï¼Œä½¿å¾—ä¸€ä¸ªå­˜æœ‰è¯¥æ•°æ®çš„èŠ‚ç‚¹èƒ½å¤Ÿæ’å…¥ç¬¬nä¸ªä½ç½®ã€‚\u003c/p\u003e","title":"åœ¨é“¾è¡¨çš„ä»»æ„ä½ç½®æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹"}]