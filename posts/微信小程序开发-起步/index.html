<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>微信小程序开发-起步 | M1YAN&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="小程序项目结构
1.基本组成结构

pages用来存放所有小程序页面
utils用来存放工具性质的模块
app.js 小程序项目的入口文件
app.json 小程序项目的全局配置文件
app.wxss 小程序项目的全局样式文件
project.config.json 用来配置小程序及其页面是否允许被微信索引
">
<meta name="author" content="Mi Yan">
<link rel="canonical" href="https://m1yan.github.io/posts/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91-%E8%B5%B7%E6%AD%A5/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d77bdc992da4cb34344677f4385e53cf34c99acf4c535ef64a740cb221eac3d0.css" integrity="sha256-13vcmS2kyzQ0Rnf0OF5TzzTJms9MU172SnQMsiHqw9A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://m1yan.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://m1yan.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://m1yan.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://m1yan.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://m1yan.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://m1yan.github.io/posts/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91-%E8%B5%B7%E6%AD%A5/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css" integrity="sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js" integrity="sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false}
          ],
          
          throwOnError : false
        });
    });
</script>

<link rel="stylesheet" href="https://s1.hdslb.com/bfs/static/jinkela/long/font/regular.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet"><meta property="og:url" content="https://m1yan.github.io/posts/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91-%E8%B5%B7%E6%AD%A5/">
  <meta property="og:site_name" content="M1YAN&#39;s Blog">
  <meta property="og:title" content="微信小程序开发-起步">
  <meta property="og:description" content="小程序项目结构 1.基本组成结构 pages用来存放所有小程序页面 utils用来存放工具性质的模块 app.js 小程序项目的入口文件 app.json 小程序项目的全局配置文件 app.wxss 小程序项目的全局样式文件 project.config.json 用来配置小程序及其页面是否允许被微信索引 ">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-08-29T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-08-29T00:00:00+00:00">
      <meta property="og:image" content="https://m1yan.github.io/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://m1yan.github.io/images/papermod-cover.png">
<meta name="twitter:title" content="微信小程序开发-起步">
<meta name="twitter:description" content="小程序项目结构
1.基本组成结构

pages用来存放所有小程序页面
utils用来存放工具性质的模块
app.js 小程序项目的入口文件
app.json 小程序项目的全局配置文件
app.wxss 小程序项目的全局样式文件
project.config.json 用来配置小程序及其页面是否允许被微信索引
">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://m1yan.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "微信小程序开发-起步",
      "item": "https://m1yan.github.io/posts/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91-%E8%B5%B7%E6%AD%A5/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "微信小程序开发-起步",
  "name": "微信小程序开发-起步",
  "description": "小程序项目结构 1.基本组成结构 pages用来存放所有小程序页面 utils用来存放工具性质的模块 app.js 小程序项目的入口文件 app.json 小程序项目的全局配置文件 app.wxss 小程序项目的全局样式文件 project.config.json 用来配置小程序及其页面是否允许被微信索引 ",
  "keywords": [
    
  ],
  "articleBody": "小程序项目结构 1.基本组成结构 pages用来存放所有小程序页面 utils用来存放工具性质的模块 app.js 小程序项目的入口文件 app.json 小程序项目的全局配置文件 app.wxss 小程序项目的全局样式文件 project.config.json 用来配置小程序及其页面是否允许被微信索引 2.小程序页面的组成成分 小程序官方建议把小程序页面都存放在page目录中，其中每个页面由四个基本文件组成\n.js文件 （页面的脚本文件，存放页面的数据、事件处理函数等） .json文件 （当前页面的配置文件，配置页面的外观、表现等） .wxml文件 （当前页面的模板结构文件） .wxss文件 （当前页面的样式表文件） JSON配置文件 1.4种json文件 项目根目录的app.json文件 根目录中的project.config.json文件 根目录中的sitemap.json文件 每个page中的json配置文件 2. app.json文件 当前小程序的全局配置，包括小程序的页面路径，窗口外观，界面表现，底部Tab等。\n配置内容：\npages：记录当前小程序的所有路径 window：小程序所有页面的背景色、文字颜色等 style：小程序组件所使用的版本样式 sitemapLocation：指明sitemap.json的位置 3.project.config.json 文件 project.config.json 是项目配置文件，记录我们对小程序的个性化配置，例如：\nsetting 中保存了编译相关配置 projectname 项目名称 appid 保存小程序的账号ID 4.sitemap.json 文件 小程序内搜索，类似PC网页中的SEO。该文件用来配置小程序页面是否允许微信索引。\n5. 页面的 .json 配置文件 小程序中的每个页面，可以使用.json文件来对本页面窗口外观进行配置，页面中的配置项会覆盖app.json中window的配置项。\n6.新建小程序页面 在app.json-\u003epages 中新增页面的存放路径，小程序开发者工具自动帮助自动创建对应页面文件\n例如，新建list文件夹，在pages中新增：\n\"pages/list/list\" 即可新建list文件夹并且内含list.js , list.json , list.wxml , list.wxss。\n7.修改项目首页 只需调整app.json-\u003epages 数组中页面路径的前后顺序，即可修改项目的首页。第一位的页面当作项目首页进行渲染。\nWXML模板 1.什么是WXML WXML(Weixin Makeup Language) 是小程序框架设置的一套标签语言，用来构建小程序页面的结构，作用类似网页开发中的HTML。\n2.WXML与HTML区别 标签名称不同 HTML(div, span, img, a) WXML(view, text, image, navigator) 属性节点不同 超链接 提供了类似vue中的模板语法 数据绑定 列表渲染 条件渲染 WXSS样式 1.什么是WXSS WXSS(WeiXin Style Sheets)是一套样式语言，用于描述WXML的组件样式，类似网页开发中的CSS。\n2.WXSS和CSS区别 新增了rpx尺寸单位 提供了全局样式和局部样式 WXSS仅支持部分CSS选择器 JS逻辑交互 1. .js文件 app.js 是整个小程序的入口文件，通过调用App( )函数来启动小程序。 页面的js文件 页面的入口文件，通过调用Page( )函数来创建并运行页面。 普通js文件 普通的功能模块文件，用来封装公共的函数或属性供页面使用。 小程序的宿主环境 包含内容： 通信模型 运行机制 组件 API 通信模型 1.通信主体 小程序的通信主体是渲染层和逻辑层\nWXML模板和WXSS样式工作在渲染层 JS脚本工作在逻辑层 2.小程序的通信模型 渲染层与逻辑层间的通信 由微信客户端进行转发 逻辑层和第三方服务器之间的通信 由微信客户端进行转发 3. 小程序启动过程 小程序代码包下载到本地 解析app.json全局配置文件 执行app.js小程序入口文件，调用App( )创建小程序实例 渲染小程序首页 小程序启动完成 4. 页面渲染过程 加载解析页面的.json配置文件 加载页面的wxml模板和wxss样式 执行页面的.js文件，调用Page( )创建页面实例 页面渲染完成 组件 1. 组件分类 小程序中的组件也是宿主环境提供的，开发者可以基于组件快速搭建页面结构。\n组件分为了9大类：\n视图容器 基础内容 表单组件 导航组件 媒体组件 map地图组件 canvas画布组件 开放能力 无障碍访问 2.常用视图容器类组件 view 普通视图区域 类似HTML中的div，是一个块级元素 用来实现页面的布局效果 scroll-view 可滚动的视图区域 用来实现滚动列表效果 swiper和swiper-item 轮播图组件和轮播图item组件 view组件的基本使用 编写wxml文件 \u003ctext\u003e横向布局\u003c/text\u003e \u003cview class=\"container1\"\u003e \u003cview\u003eA\u003c/view\u003e \u003cview\u003eB\u003c/view\u003e \u003cview\u003eC\u003c/view\u003e \u003c/view\u003e 编写wxss文件 .container1 view{ width: 100px; height: 100px; text-align: center; line-height: 100px; } .container1 view:nth-child(1){ background-color: aquamarine; } .container1 view:nth-child(2){ background-color: blueviolet; } .container1 view:nth-child(3){ background-color: rgb(216, 66, 66); } .container1{ display: flex; justify-content: space-around; } scroll-view组件的基本使用 1.wxml文件\n\u003ctext\u003e滚动组件\u003c/text\u003e \u003cscroll-view class=\"container2\" scroll-y\u003e \u003cview\u003eA\u003c/view\u003e \u003cview\u003eB\u003c/view\u003e \u003cview\u003eC\u003c/view\u003e \u003c/scroll-view\u003e 2.wxss文件\n.container2 view{ width: 100px; height: 100px; text-align: center; line-height: 100px; } .container2 view:nth-child(1){ background-color: aquamarine; } .container2 view:nth-child(2){ background-color: blueviolet; } .container2 view:nth-child(3){ background-color: rgb(109, 50, 50); } .container2{ border: 1px solid crimson; height: 120px; /*纵向滚动需要设置高度*/ width: 100px; } swiper和swiper-item组件的基本使用 wxml文件 \u003ctext\u003e轮播图\u003c/text\u003e \u003cswiper class=\"swiper-container\" indicator-dots\u003e \u003cswiper-item\u003e \u003cview class=\"item\"\u003eA\u003c/view\u003e \u003c/swiper-item\u003e \u003cswiper-item\u003e \u003cview class=\"item\"\u003eB\u003c/view\u003e \u003c/swiper-item\u003e \u003cswiper-item\u003e \u003cview class=\"item\"\u003eC\u003c/view\u003e \u003c/swiper-item\u003e \u003c/swiper\u003e wxss文件 .swiper-container{ height: 150px;/*组件高度*/ } .item{ height: 100%; line-height: 150px; text-align: center; } /* 背景颜色不显示原因：child()后面加空格再加.item */ swiper-item:nth-child(1) .item{ background-color:royalblue; } swiper-item:nth-child(2) .item{ background-color: rgb(65, 225, 212); } swiper-item:nth-child(3) .item{ background-color: rgb(221, 120, 199); } swiper组件的常用属性 属性 类型 默认值 说明 indicator-dot boolean false 是否显示面板指示点 indicator-color color rgba(0,0,0,.3) 指示点颜色 indicator-active-color color #000000 当前选中的指示点颜色 autoplay boolean false 是否自动切换 interval number 5000 自动切换时间间隔 circular boolean false 是否衔接滑动 3. 常用的基础内容组件 text 文本组件 类似HTML中的span标签，是一个行内元素 rich-text 富文本组件 支持把HTML字符串渲染为WXML结构 text组件的基本使用 通过text组件的user-select属性，实现长按选择文本内容的效果： \u003ctext user-select\u003e12345678\u003c/text\u003e rich-text组件基本使用 通过rich-text组件的nodes属性，可以把HTML字符串渲染成对应的UI结构： \u003crich-text nodes=\"标题\"\u003e\u003c/rich-text\u003e 4. 其他常用组件 button 按钮组件 功能比HTML中的button按钮丰富 通过open-type属性可以调用微信提供的各种功能（客服、转发、获取用户授权、获取用户信息等） image 图片组件 image组件默认宽度为300px，高度约240px navigator 页面导航组件 类似HTML中的a链接 button组件基本使用 \u003cview\u003e----通过type类型----\u003c/view\u003e \u003cbutton\u003e普通按钮\u003c/button\u003e \u003cbutton type=\"primary\"\u003e主色调按钮\u003c/button\u003e \u003cbutton type=\"warn\"\u003e警告按钮\u003c/button\u003e \u003cbutton\u003e\u003c/button\u003e \u003cview\u003e----小尺寸按钮----\u003c/view\u003e \u003cbutton size=\"mini\"\u003e默认按钮\u003c/button\u003e \u003cbutton type=\"primary\" size=\"mini\"\u003e主色调按钮\u003c/button\u003e \u003cview\u003e----plain镂空按钮----\u003c/view\u003e \u003cbutton plain\u003e普通按钮\u003c/button\u003e \u003cbutton type=\"primary\" plain\u003e主色调按钮\u003c/button\u003e image图片组件基本使用 \u003cimage\u003e\u003c/image\u003e \u003cimage src=\"/adress/pic\"\u003e\u003c/image\u003e image组件的mode属性 mode属性用来指定图片的裁剪和缩放模式，常用mode属性：\nmode值 说明 scaleToFill (默认值)缩放模式，不保持纵横比，拉伸填满image元素 aspectFit 缩放模式，保持纵横比缩放，可以完整显示图片 aspectFill 缩放模式，只保持短边能完整显示 widthFix 缩放模式，宽度不变，高度自动变化，保证原图长宽比不变 heightFix 缩放模式，高度不变，宽度自动变化，保持原图长宽比不变 API 1. 小程序API概述 小程序中的API是宿主环境提供的，开发者可以方便地调用微信提供的功能。如获取用户信息，支付等。\n2.三类API 时间监听API 特点：以on开头，用来监听某些事件的触发 举例：wx.onWindowResize(function callback)监听窗口尺寸的变化 同步API 特点1：以Sync结尾的API都是同步API 特点2：同步API的执行结果，可以通过函数返回值直接获取，如果执行出错会抛出异常 举例：wx.setStorageSync(“key”,“value”)向本地存储中写入内容 异步API 特点：类似于jQuery中$.ajax(option)函数，需要通过success、fail、complete接收调用的结果 举例：wx.request()发起网络数据请求，通过success回调函数接收数据 ",
  "wordCount" : "3600",
  "inLanguage": "zh",
  "image": "https://m1yan.github.io/images/papermod-cover.png","datePublished": "2023-08-29T00:00:00Z",
  "dateModified": "2023-08-29T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Mi Yan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://m1yan.github.io/posts/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91-%E8%B5%B7%E6%AD%A5/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "M1YAN's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://m1yan.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://m1yan.github.io/" accesskey="h" title="M1YAN&#39;s Blog (Alt + H)">M1YAN&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://m1yan.github.io/en/" title="English"
                            aria-label="English">English</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://m1yan.github.io/archives" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://m1yan.github.io/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://m1yan.github.io/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://m1yan.github.io/" title="CV">
                    <span>CV</span>
                </a>
            </li>
            <li>
                <a href="https://m1yan.github.io/slides/" title="Slides">
                    <span>Slides</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://m1yan.github.io/">主页</a>&nbsp;»&nbsp;<a href="https://m1yan.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      微信小程序开发-起步
    </h1>
    <div class="post-meta"><span title='2023-08-29 00:00:00 +0000 UTC'>八月 29, 2023</span>&nbsp;·&nbsp;8 分钟&nbsp;·&nbsp;Mi Yan&nbsp;|&nbsp;<a href="https://github.com/M1YAN/M1YAN.github.io/tree/main/posts/posts/%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%bc%80%e5%8f%91-%e8%b5%b7%e6%ad%a5.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%a1%b9%e7%9b%ae%e7%bb%93%e6%9e%84" aria-label="小程序项目结构">小程序项目结构</a><ul>
                        <ul>
                        
                <li>
                    <a href="#1%e5%9f%ba%e6%9c%ac%e7%bb%84%e6%88%90%e7%bb%93%e6%9e%84" aria-label="1.基本组成结构">1.基本组成结构</a></li>
                <li>
                    <a href="#2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%a1%b5%e9%9d%a2%e7%9a%84%e7%bb%84%e6%88%90%e6%88%90%e5%88%86" aria-label="2.小程序页面的组成成分">2.小程序页面的组成成分</a></li></ul>
                    
                <li>
                    <a href="#json%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="JSON配置文件">JSON配置文件</a><ul>
                        
                <li>
                    <a href="#14%e7%a7%8djson%e6%96%87%e4%bb%b6" aria-label="1.4种json文件">1.4种json文件</a></li>
                <li>
                    <a href="#2-appjson%e6%96%87%e4%bb%b6" aria-label="2. app.json文件">2. app.json文件</a></li>
                <li>
                    <a href="#3projectconfigjson-%e6%96%87%e4%bb%b6" aria-label="3.project.config.json 文件">3.project.config.json 文件</a></li>
                <li>
                    <a href="#4sitemapjson-%e6%96%87%e4%bb%b6" aria-label="4.sitemap.json 文件">4.sitemap.json 文件</a></li>
                <li>
                    <a href="#5-%e9%a1%b5%e9%9d%a2%e7%9a%84-json-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="5. 页面的 .json 配置文件">5. 页面的 .json 配置文件</a></li>
                <li>
                    <a href="#6%e6%96%b0%e5%bb%ba%e5%b0%8f%e7%a8%8b%e5%ba%8f%e9%a1%b5%e9%9d%a2" aria-label="6.新建小程序页面">6.新建小程序页面</a></li>
                <li>
                    <a href="#7%e4%bf%ae%e6%94%b9%e9%a1%b9%e7%9b%ae%e9%a6%96%e9%a1%b5" aria-label="7.修改项目首页">7.修改项目首页</a></li></ul>
                </li>
                <li>
                    <a href="#wxml%e6%a8%a1%e6%9d%bf" aria-label="WXML模板">WXML模板</a><ul>
                        
                <li>
                    <a href="#1%e4%bb%80%e4%b9%88%e6%98%afwxml" aria-label="1.什么是WXML">1.什么是WXML</a></li>
                <li>
                    <a href="#2wxml%e4%b8%8ehtml%e5%8c%ba%e5%88%ab" aria-label="2.WXML与HTML区别">2.WXML与HTML区别</a></li></ul>
                </li>
                <li>
                    <a href="#wxss%e6%a0%b7%e5%bc%8f" aria-label="WXSS样式">WXSS样式</a><ul>
                        
                <li>
                    <a href="#1%e4%bb%80%e4%b9%88%e6%98%afwxss" aria-label="1.什么是WXSS">1.什么是WXSS</a></li>
                <li>
                    <a href="#2wxss%e5%92%8ccss%e5%8c%ba%e5%88%ab" aria-label="2.WXSS和CSS区别">2.WXSS和CSS区别</a></li></ul>
                </li>
                <li>
                    <a href="#js%e9%80%bb%e8%be%91%e4%ba%a4%e4%ba%92" aria-label="JS逻辑交互">JS逻辑交互</a><ul>
                        
                <li>
                    <a href="#1--js%e6%96%87%e4%bb%b6" aria-label="1.  .js文件">1.  .js文件</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e5%ae%bf%e4%b8%bb%e7%8e%af%e5%a2%83" aria-label="小程序的宿主环境">小程序的宿主环境</a><ul>
                        
                <li>
                    <a href="#%e5%8c%85%e5%90%ab%e5%86%85%e5%ae%b9" aria-label="包含内容：">包含内容：</a></li>
                <li>
                    <a href="#%e9%80%9a%e4%bf%a1%e6%a8%a1%e5%9e%8b" aria-label="通信模型">通信模型</a><ul>
                        
                <li>
                    <a href="#1%e9%80%9a%e4%bf%a1%e4%b8%bb%e4%bd%93" aria-label="1.通信主体">1.通信主体</a></li>
                <li>
                    <a href="#2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%9a%84%e9%80%9a%e4%bf%a1%e6%a8%a1%e5%9e%8b" aria-label="2.小程序的通信模型">2.小程序的通信模型</a></li>
                <li>
                    <a href="#3-%e5%b0%8f%e7%a8%8b%e5%ba%8f%e5%90%af%e5%8a%a8%e8%bf%87%e7%a8%8b" aria-label="3. 小程序启动过程">3. 小程序启动过程</a></li>
                <li>
                    <a href="#4-%e9%a1%b5%e9%9d%a2%e6%b8%b2%e6%9f%93%e8%bf%87%e7%a8%8b" aria-label="4. 页面渲染过程">4. 页面渲染过程</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%bb%84%e4%bb%b6" aria-label="组件">组件</a><ul>
                        
                <li>
                    <a href="#1-%e7%bb%84%e4%bb%b6%e5%88%86%e7%b1%bb" aria-label="1. 组件分类">1. 组件分类</a></li>
                <li>
                    <a href="#2%e5%b8%b8%e7%94%a8%e8%a7%86%e5%9b%be%e5%ae%b9%e5%99%a8%e7%b1%bb%e7%bb%84%e4%bb%b6" aria-label="2.常用视图容器类组件">2.常用视图容器类组件</a><ul>
                        
                <li>
                    <a href="#view%e7%bb%84%e4%bb%b6%e7%9a%84%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="view组件的基本使用">view组件的基本使用</a></li>
                <li>
                    <a href="#scroll-view%e7%bb%84%e4%bb%b6%e7%9a%84%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="scroll-view组件的基本使用">scroll-view组件的基本使用</a></li>
                <li>
                    <a href="#swiper%e5%92%8cswiper-item%e7%bb%84%e4%bb%b6%e7%9a%84%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="swiper和swiper-item组件的基本使用">swiper和swiper-item组件的基本使用</a></li></ul>
                </li>
                <li>
                    <a href="#3-%e5%b8%b8%e7%94%a8%e7%9a%84%e5%9f%ba%e7%a1%80%e5%86%85%e5%ae%b9%e7%bb%84%e4%bb%b6" aria-label="3. 常用的基础内容组件">3. 常用的基础内容组件</a><ul>
                        
                <li>
                    <a href="#text%e7%bb%84%e4%bb%b6%e7%9a%84%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="text组件的基本使用">text组件的基本使用</a></li>
                <li>
                    <a href="#rich-text%e7%bb%84%e4%bb%b6%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="rich-text组件基本使用">rich-text组件基本使用</a></li></ul>
                </li>
                <li>
                    <a href="#4-%e5%85%b6%e4%bb%96%e5%b8%b8%e7%94%a8%e7%bb%84%e4%bb%b6" aria-label="4. 其他常用组件">4. 其他常用组件</a><ul>
                        
                <li>
                    <a href="#button%e7%bb%84%e4%bb%b6%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="button组件基本使用">button组件基本使用</a></li>
                <li>
                    <a href="#image%e5%9b%be%e7%89%87%e7%bb%84%e4%bb%b6%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="image图片组件基本使用">image图片组件基本使用</a><ul>
                        
                <li>
                    <a href="#image%e7%bb%84%e4%bb%b6%e7%9a%84mode%e5%b1%9e%e6%80%a7" aria-label="image组件的mode属性">image组件的mode属性</a></li></ul>
                </li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#api" aria-label="API">API</a><ul>
                        
                <li>
                    <a href="#1-%e5%b0%8f%e7%a8%8b%e5%ba%8fapi%e6%a6%82%e8%bf%b0" aria-label="1. 小程序API概述">1. 小程序API概述</a></li>
                <li>
                    <a href="#2%e4%b8%89%e7%b1%bbapi" aria-label="2.三类API">2.三类API</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="小程序项目结构">小程序项目结构<a hidden class="anchor" aria-hidden="true" href="#小程序项目结构">#</a></h1>
<h3 id="1基本组成结构">1.基本组成结构<a hidden class="anchor" aria-hidden="true" href="#1基本组成结构">#</a></h3>
<ol>
<li>pages用来存放所有小程序页面</li>
<li>utils用来存放工具性质的模块</li>
<li>app.js 小程序项目的入口文件</li>
<li>app.json 小程序项目的全局配置文件</li>
<li>app.wxss 小程序项目的全局样式文件</li>
<li>project.config.json 用来配置小程序及其页面是否允许被微信索引</li>
</ol>
<h3 id="2小程序页面的组成成分">2.小程序页面的组成成分<a hidden class="anchor" aria-hidden="true" href="#2小程序页面的组成成分">#</a></h3>
<blockquote>
<p>小程序官方建议把小程序页面都存放在<code>page目录</code>中，其中每个页面由四个基本文件组成</p>
</blockquote>
<ol>
<li>.js文件 （页面的脚本文件，存放页面的数据、事件处理函数等）</li>
<li>.json文件 （当前页面的配置文件，配置页面的外观、表现等）</li>
<li>.wxml文件 （当前页面的模板结构文件）</li>
<li>.wxss文件 （当前页面的样式表文件）</li>
</ol>
<h2 id="json配置文件">JSON配置文件<a hidden class="anchor" aria-hidden="true" href="#json配置文件">#</a></h2>
<h3 id="14种json文件">1.4种json文件<a hidden class="anchor" aria-hidden="true" href="#14种json文件">#</a></h3>
<ol>
<li>项目根目录的app.json文件</li>
<li>根目录中的project.config.json文件</li>
<li>根目录中的sitemap.json文件</li>
<li>每个page中的json配置文件</li>
</ol>
<h3 id="2-appjson文件">2. app.json文件<a hidden class="anchor" aria-hidden="true" href="#2-appjson文件">#</a></h3>
<blockquote>
<p>当前小程序的全局配置，包括小程序的<code>页面路径</code>，<code>窗口外观</code>，<code>界面表现</code>，<code>底部Tab</code>等。</p>
</blockquote>
<p>配置内容：</p>
<ol>
<li>pages：记录当前小程序的所有路径</li>
<li>window：小程序所有页面的背景色、文字颜色等</li>
<li>style：小程序组件所使用的版本样式</li>
<li>sitemapLocation：指明sitemap.json的位置</li>
</ol>
<h3 id="3projectconfigjson-文件">3.project.config.json 文件<a hidden class="anchor" aria-hidden="true" href="#3projectconfigjson-文件">#</a></h3>
<blockquote>
<p>project.config.json 是项目配置文件，记录我们对小程序的个性化配置，例如：</p>
</blockquote>
<ul>
<li>setting 中保存了编译相关配置</li>
<li>projectname 项目名称</li>
<li>appid 保存小程序的账号ID</li>
</ul>
<h3 id="4sitemapjson-文件">4.sitemap.json 文件<a hidden class="anchor" aria-hidden="true" href="#4sitemapjson-文件">#</a></h3>
<blockquote>
<p>小程序内搜索，类似PC网页中的SEO。该文件用来配置小程序页面是否允许微信索引。</p>
</blockquote>
<h3 id="5-页面的-json-配置文件">5. 页面的 .json 配置文件<a hidden class="anchor" aria-hidden="true" href="#5-页面的-json-配置文件">#</a></h3>
<blockquote>
<p>小程序中的每个页面，可以使用.json文件来对本页面窗口外观进行配置，页面中的配置项会覆盖app.json中window的配置项。</p>
</blockquote>
<h3 id="6新建小程序页面">6.新建小程序页面<a hidden class="anchor" aria-hidden="true" href="#6新建小程序页面">#</a></h3>
<blockquote>
<p>在app.json-&gt;pages 中新增页面的存放路径，小程序开发者工具自动帮助自动创建对应页面文件</p>
</blockquote>
<p>例如，新建list文件夹，在pages中新增：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">&#34;pages/list/list&#34;</span>
</span></span></code></pre></div><p>即可新建list文件夹并且内含list.js , list.json , list.wxml , list.wxss。</p>
<h3 id="7修改项目首页">7.修改项目首页<a hidden class="anchor" aria-hidden="true" href="#7修改项目首页">#</a></h3>
<blockquote>
<p>只需调整app.json-&gt;pages 数组中页面路径的前后顺序，即可修改项目的首页。第一位的页面当作项目首页进行渲染。</p>
</blockquote>
<h2 id="wxml模板">WXML模板<a hidden class="anchor" aria-hidden="true" href="#wxml模板">#</a></h2>
<h3 id="1什么是wxml">1.什么是WXML<a hidden class="anchor" aria-hidden="true" href="#1什么是wxml">#</a></h3>
<blockquote>
<p>WXML(Weixin Makeup Language) 是小程序框架设置的一套标签语言，用来构建小程序页面的结构，作用类似网页开发中的HTML。</p>
</blockquote>
<h3 id="2wxml与html区别">2.WXML与HTML区别<a hidden class="anchor" aria-hidden="true" href="#2wxml与html区别">#</a></h3>
<ol>
<li>标签名称不同</li>
</ol>
<ul>
<li>HTML(div, span, img, a)</li>
<li>WXML(view, text, image, navigator)</li>
</ul>
<ol start="2">
<li>属性节点不同</li>
</ol>
<ul>
<li><a herf="#">超链接</a></li>
<li><navigator url="/page/home/home"></navigator></li>
</ul>
<ol start="3">
<li>提供了类似vue中的模板语法</li>
</ol>
<ul>
<li>数据绑定</li>
<li>列表渲染</li>
<li>条件渲染</li>
</ul>
<h2 id="wxss样式">WXSS样式<a hidden class="anchor" aria-hidden="true" href="#wxss样式">#</a></h2>
<h3 id="1什么是wxss">1.什么是WXSS<a hidden class="anchor" aria-hidden="true" href="#1什么是wxss">#</a></h3>
<p>WXSS(WeiXin Style Sheets)是一套样式语言，用于描述WXML的组件样式，类似网页开发中的CSS。</p>
<h3 id="2wxss和css区别">2.WXSS和CSS区别<a hidden class="anchor" aria-hidden="true" href="#2wxss和css区别">#</a></h3>
<ol>
<li>新增了rpx尺寸单位</li>
<li>提供了全局样式和局部样式</li>
<li>WXSS仅支持部分CSS选择器</li>
</ol>
<h2 id="js逻辑交互">JS逻辑交互<a hidden class="anchor" aria-hidden="true" href="#js逻辑交互">#</a></h2>
<h3 id="1--js文件">1.  .js文件<a hidden class="anchor" aria-hidden="true" href="#1--js文件">#</a></h3>
<ol>
<li>app.js</li>
</ol>
<ul>
<li>是整个小程序的入口文件，通过调用App( )函数来启动小程序。</li>
</ul>
<ol start="2">
<li>页面的js文件</li>
</ol>
<ul>
<li>页面的入口文件，通过调用Page( )函数来创建并运行页面。</li>
</ul>
<ol start="3">
<li>普通js文件</li>
</ol>
<ul>
<li>普通的功能模块文件，用来封装公共的函数或属性供页面使用。</li>
</ul>
<h1 id="小程序的宿主环境">小程序的宿主环境<a hidden class="anchor" aria-hidden="true" href="#小程序的宿主环境">#</a></h1>
<h2 id="包含内容">包含内容：<a hidden class="anchor" aria-hidden="true" href="#包含内容">#</a></h2>
<ol>
<li>通信模型</li>
<li>运行机制</li>
<li>组件</li>
<li>API</li>
</ol>
<h2 id="通信模型">通信模型<a hidden class="anchor" aria-hidden="true" href="#通信模型">#</a></h2>
<h3 id="1通信主体">1.通信主体<a hidden class="anchor" aria-hidden="true" href="#1通信主体">#</a></h3>
<blockquote>
<p>小程序的通信主体是<code>渲染层</code>和<code>逻辑层</code></p>
</blockquote>
<ol>
<li>WXML模板和WXSS样式工作在渲染层</li>
<li>JS脚本工作在逻辑层</li>
</ol>
<h3 id="2小程序的通信模型">2.小程序的通信模型<a hidden class="anchor" aria-hidden="true" href="#2小程序的通信模型">#</a></h3>
<ol>
<li>渲染层与逻辑层间的通信</li>
</ol>
<ul>
<li>由微信客户端进行转发</li>
</ul>
<ol start="2">
<li>逻辑层和第三方服务器之间的通信</li>
</ol>
<ul>
<li>由微信客户端进行转发</li>
</ul>
<h3 id="3-小程序启动过程">3. 小程序启动过程<a hidden class="anchor" aria-hidden="true" href="#3-小程序启动过程">#</a></h3>
<ol>
<li>小程序代码包下载到本地</li>
<li>解析app.json全局配置文件</li>
<li>执行app.js小程序入口文件，调用App( )创建小程序实例</li>
<li>渲染小程序首页</li>
<li>小程序启动完成</li>
</ol>
<h3 id="4-页面渲染过程">4. 页面渲染过程<a hidden class="anchor" aria-hidden="true" href="#4-页面渲染过程">#</a></h3>
<ol>
<li>加载解析页面的.json配置文件</li>
<li>加载页面的wxml模板和wxss样式</li>
<li>执行页面的.js文件，调用Page( )创建页面实例</li>
<li>页面渲染完成</li>
</ol>
<h2 id="组件">组件<a hidden class="anchor" aria-hidden="true" href="#组件">#</a></h2>
<h3 id="1-组件分类">1. 组件分类<a hidden class="anchor" aria-hidden="true" href="#1-组件分类">#</a></h3>
<blockquote>
<p>小程序中的组件也是宿主环境提供的，开发者可以基于组件快速搭建页面结构。</p>
</blockquote>
<p>组件分为了9大类：</p>
<ol>
<li><strong>视图容器</strong></li>
<li><strong>基础内容</strong></li>
<li><strong>表单组件</strong></li>
<li><strong>导航组件</strong></li>
<li>媒体组件</li>
<li>map地图组件</li>
<li>canvas画布组件</li>
<li>开放能力</li>
<li>无障碍访问</li>
</ol>
<h3 id="2常用视图容器类组件">2.常用视图容器类组件<a hidden class="anchor" aria-hidden="true" href="#2常用视图容器类组件">#</a></h3>
<ol>
<li>view</li>
</ol>
<ul>
<li>普通视图区域</li>
<li>类似HTML中的div，是一个块级元素</li>
<li>用来实现页面的布局效果</li>
</ul>
<ol start="2">
<li>scroll-view</li>
</ol>
<ul>
<li>可滚动的视图区域</li>
<li>用来实现滚动列表效果</li>
</ul>
<ol start="3">
<li>swiper和swiper-item</li>
</ol>
<ul>
<li>轮播图组件和轮播图item组件</li>
</ul>
<h4 id="view组件的基本使用">view组件的基本使用<a hidden class="anchor" aria-hidden="true" href="#view组件的基本使用">#</a></h4>
<ol>
<li>编写wxml文件</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">text</span><span class="p">&gt;</span>横向布局<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;container1&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>A<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>B<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>C<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span></code></pre></div><ol start="2">
<li>编写wxss文件</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container1</span> <span class="nt">view</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">line-height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container1</span> <span class="nt">view</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">1</span><span class="o">)</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="kc">aquamarine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container1</span> <span class="nt">view</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">2</span><span class="o">)</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="kc">blueviolet</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container1</span> <span class="nt">view</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="mi">216</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">66</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container1</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">justify-content</span><span class="p">:</span> <span class="kc">space-around</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="scroll-view组件的基本使用">scroll-view组件的基本使用<a hidden class="anchor" aria-hidden="true" href="#scroll-view组件的基本使用">#</a></h4>
<p>1.wxml文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">text</span><span class="p">&gt;</span>滚动组件<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--scroll-x 横向滚动--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--scroll-y 纵向滚动--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--使用纵向滚动时，要给scroll-view一个固定高度--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">scroll-view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;container2&#34;</span> <span class="na">scroll-y</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>A<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>B<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>C<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">scroll-view</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>2.wxss文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container2</span> <span class="nt">view</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">line-height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container2</span> <span class="nt">view</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">1</span><span class="o">)</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="kc">aquamarine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container2</span> <span class="nt">view</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">2</span><span class="o">)</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="kc">blueviolet</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container2</span> <span class="nt">view</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="mi">109</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container2</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">crimson</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">120</span><span class="kt">px</span><span class="p">;</span>   <span class="c">/*纵向滚动需要设置高度*/</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="swiper和swiper-item组件的基本使用">swiper和swiper-item组件的基本使用<a hidden class="anchor" aria-hidden="true" href="#swiper和swiper-item组件的基本使用">#</a></h4>
<ol>
<li>wxml文件</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!--pages/list/list.wxml--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--轮播图--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- indicator-dots属性：显示面板指示点 --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">text</span><span class="p">&gt;</span>轮播图<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">swiper</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;swiper-container&#34;</span> <span class="na">indicator-dots</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">swiper-item</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>A<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">swiper-item</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">swiper-item</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>B<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">swiper-item</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">swiper-item</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>C<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">swiper-item</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">swiper</span><span class="p">&gt;</span>
</span></span></code></pre></div><ol start="2">
<li>wxss文件</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">swiper-container</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">150</span><span class="kt">px</span><span class="p">;</span><span class="c">/*组件高度*/</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">item</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">line-height</span><span class="p">:</span> <span class="mi">150</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c">/* 背景颜色不显示原因：child()后面加空格再加.item */</span>
</span></span><span class="line"><span class="cl"><span class="nt">swiper-item</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">1</span><span class="o">)</span> <span class="p">.</span><span class="nc">item</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span><span class="kc">royalblue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nt">swiper-item</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">2</span><span class="o">)</span> <span class="p">.</span><span class="nc">item</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">225</span><span class="p">,</span> <span class="mi">212</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nt">swiper-item</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">3</span><span class="o">)</span> <span class="p">.</span><span class="nc">item</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="mi">221</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">199</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><ol start="3">
<li>swiper组件的常用属性</li>
</ol>
<table>
  <thead>
      <tr>
          <th style="text-align: center">属性</th>
          <th style="text-align: center">类型</th>
          <th style="text-align: center">默认值</th>
          <th style="text-align: center">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">indicator-dot</td>
          <td style="text-align: center">boolean</td>
          <td style="text-align: center">false</td>
          <td style="text-align: center">是否显示面板指示点</td>
      </tr>
      <tr>
          <td style="text-align: center">indicator-color</td>
          <td style="text-align: center">color</td>
          <td style="text-align: center">rgba(0,0,0,.3)</td>
          <td style="text-align: center">指示点颜色</td>
      </tr>
      <tr>
          <td style="text-align: center">indicator-active-color</td>
          <td style="text-align: center">color</td>
          <td style="text-align: center">#000000</td>
          <td style="text-align: center">当前选中的指示点颜色</td>
      </tr>
      <tr>
          <td style="text-align: center">autoplay</td>
          <td style="text-align: center">boolean</td>
          <td style="text-align: center">false</td>
          <td style="text-align: center">是否自动切换</td>
      </tr>
      <tr>
          <td style="text-align: center">interval</td>
          <td style="text-align: center">number</td>
          <td style="text-align: center">5000</td>
          <td style="text-align: center">自动切换时间间隔</td>
      </tr>
      <tr>
          <td style="text-align: center">circular</td>
          <td style="text-align: center">boolean</td>
          <td style="text-align: center">false</td>
          <td style="text-align: center">是否衔接滑动</td>
      </tr>
  </tbody>
</table>
<h3 id="3-常用的基础内容组件">3. 常用的基础内容组件<a hidden class="anchor" aria-hidden="true" href="#3-常用的基础内容组件">#</a></h3>
<ol>
<li>text</li>
</ol>
<ul>
<li>文本组件</li>
<li>类似HTML中的span标签，是一个行内元素</li>
</ul>
<ol start="2">
<li>rich-text</li>
</ol>
<ul>
<li>富文本组件</li>
<li>支持把HTML字符串渲染为WXML结构</li>
</ul>
<h4 id="text组件的基本使用">text组件的基本使用<a hidden class="anchor" aria-hidden="true" href="#text组件的基本使用">#</a></h4>
<ul>
<li>通过text组件的user-select属性，实现长按选择文本内容的效果：</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">text</span> <span class="na">user-select</span><span class="p">&gt;</span>12345678<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span></code></pre></div><h4 id="rich-text组件基本使用">rich-text组件基本使用<a hidden class="anchor" aria-hidden="true" href="#rich-text组件基本使用">#</a></h4>
<ul>
<li>通过rich-text组件的nodes属性，可以把HTML字符串渲染成对应的UI结构：</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">rich-text</span> <span class="na">nodes</span><span class="o">=</span><span class="s">&#34;&lt;h1 style=&#39;color: red;&#39;&gt;标题&lt;/h1&gt;&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">rich-text</span><span class="p">&gt;</span>
</span></span></code></pre></div><h3 id="4-其他常用组件">4. 其他常用组件<a hidden class="anchor" aria-hidden="true" href="#4-其他常用组件">#</a></h3>
<ol>
<li>button</li>
</ol>
<ul>
<li>按钮组件</li>
<li>功能比HTML中的button按钮丰富</li>
<li>通过open-type属性可以调用微信提供的各种功能（客服、转发、获取用户授权、获取用户信息等）</li>
</ul>
<ol start="2">
<li>image</li>
</ol>
<ul>
<li>图片组件</li>
<li>image组件默认宽度为300px，高度约240px</li>
</ul>
<ol start="3">
<li>navigator</li>
</ol>
<ul>
<li>页面导航组件</li>
<li>类似HTML中的a链接</li>
</ul>
<h4 id="button组件基本使用">button组件基本使用<a hidden class="anchor" aria-hidden="true" href="#button组件基本使用">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>----通过type类型----<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>普通按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span><span class="p">&gt;</span>主色调按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;warn&#34;</span><span class="p">&gt;</span>警告按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>----小尺寸按钮----<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;mini&#34;</span><span class="p">&gt;</span>默认按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span> <span class="na">size</span><span class="o">=</span><span class="s">&#34;mini&#34;</span><span class="p">&gt;</span>主色调按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span><span class="p">&gt;</span>----plain镂空按钮----<span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">plain</span><span class="p">&gt;</span>普通按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span> <span class="na">plain</span><span class="p">&gt;</span>主色调按钮<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span></code></pre></div><h4 id="image图片组件基本使用">image图片组件基本使用<a hidden class="anchor" aria-hidden="true" href="#image图片组件基本使用">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">image</span><span class="p">&gt;&lt;/</span><span class="nt">image</span><span class="p">&gt;</span> <span class="c">&lt;!--空图片--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">image</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/adress/pic&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">image</span><span class="p">&gt;</span>
</span></span></code></pre></div><h5 id="image组件的mode属性">image组件的mode属性<a hidden class="anchor" aria-hidden="true" href="#image组件的mode属性">#</a></h5>
<blockquote>
<p>mode属性用来指定图片的裁剪和缩放模式，常用mode属性：</p>
</blockquote>
<table>
  <thead>
      <tr>
          <th>mode值</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>scaleToFill</td>
          <td>(默认值)缩放模式，不保持纵横比，拉伸填满image元素</td>
      </tr>
      <tr>
          <td>aspectFit</td>
          <td>缩放模式，保持纵横比缩放，可以完整显示图片</td>
      </tr>
      <tr>
          <td>aspectFill</td>
          <td>缩放模式，只保持短边能完整显示</td>
      </tr>
      <tr>
          <td>widthFix</td>
          <td>缩放模式，宽度不变，高度自动变化，保证原图长宽比不变</td>
      </tr>
      <tr>
          <td>heightFix</td>
          <td>缩放模式，高度不变，宽度自动变化，保持原图长宽比不变</td>
      </tr>
  </tbody>
</table>
<h2 id="api">API<a hidden class="anchor" aria-hidden="true" href="#api">#</a></h2>
<h3 id="1-小程序api概述">1. 小程序API概述<a hidden class="anchor" aria-hidden="true" href="#1-小程序api概述">#</a></h3>
<p>小程序中的API是宿主环境提供的，开发者可以方便地调用微信提供的功能。如获取用户信息，支付等。</p>
<h3 id="2三类api">2.三类API<a hidden class="anchor" aria-hidden="true" href="#2三类api">#</a></h3>
<ol>
<li>时间监听API</li>
</ol>
<ul>
<li>特点：以on开头，用来监听某些事件的触发</li>
<li>举例：wx.onWindowResize(function callback)监听窗口尺寸的变化</li>
</ul>
<ol start="2">
<li>同步API</li>
</ol>
<ul>
<li>特点1：以Sync结尾的API都是同步API</li>
<li>特点2：同步API的执行结果，可以通过函数返回值直接获取，如果执行出错会抛出异常</li>
<li>举例：wx.setStorageSync(&ldquo;key&rdquo;,&ldquo;value&rdquo;)向本地存储中写入内容</li>
</ul>
<ol start="3">
<li>异步API</li>
</ol>
<ul>
<li>特点：类似于jQuery中$.ajax(option)函数，需要通过success、fail、complete接收调用的结果</li>
<li>举例：wx.request()发起网络数据请求，通过success回调函数接收数据</li>
</ul>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://m1yan.github.io/posts/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E6%A8%A1%E6%9D%BF%E4%B8%8E%E9%85%8D%E7%BD%AE/">
    <span class="title">« 上一页</span>
    <br>
    <span>微信小程序开发-模板与配置</span>
  </a>
  <a class="next" href="https://m1yan.github.io/posts/2023221-%E5%B9%B6%E6%9F%A5%E9%9B%86%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/">
    <span class="title">下一页 »</span>
    <br>
    <span>并查集及其应用</span>
  </a>
</nav>

  </footer><script src="https://giscus.app/client.js"
        data-repo="M1YAN/M1YAN.github.io"
        data-repo-id="R_kgDOLdlkMA"
        data-category="Announcements"
        data-category-id="DIC_kwDOLdlkMM4Ck7BX"
        data-mapping="url"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>© <a href="https://m1yan.github.io">M1Yan&rsquo;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<script src="https://immmmm.com/waterfall.min.js"></script>
<script src="https://immmmm.com/imgStatus.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    
    var photosAll = document.getElementsByTagName('gallery') || '';
    if(photosAll){
      for(var i=0;i < photosAll.length;i++){
        photosAll[i].innerHTML = '<div class="gallery-photos">'+photosAll[i].innerHTML+'</div>'
        var photosIMG = photosAll[i].getElementsByTagName('img')
        for(var j=0;j < photosIMG.length;j++){
          wrap(photosIMG[j], document.createElement('div'));
        }
      }
    }
    function wrap(el, wrapper) {
      wrapper.className = "gallery-photo";
      el.parentNode.insertBefore(wrapper, el);
      wrapper.appendChild(el);
    }
    
    let galleryPhotos = document.querySelectorAll('.gallery-photos') || ''
    if(galleryPhotos){
      imgStatus.watch('.gallery-photo img', function(imgs) {
        if(imgs.isDone()){
          for(var i=0;i < galleryPhotos.length;i++){
            waterfall(galleryPhotos[i]);
            let pagePhoto = galleryPhotos[i].querySelectorAll('.gallery-photo');
            for(var j=0;j < pagePhoto.length;j++){pagePhoto[j].className += " visible"};
          }
        }
      });
      window.addEventListener('resize', function () {
        for(var i=0;i < galleryPhotos.length;i++){
          waterfall(galleryPhotos[i]);
        }
      });
    }
  });
</script>
<script type="text/javascript" src="https://immmmm.com/view-image.js"></script>
<script>
  window.ViewImage && ViewImage.init('.gallery-photo img')
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
